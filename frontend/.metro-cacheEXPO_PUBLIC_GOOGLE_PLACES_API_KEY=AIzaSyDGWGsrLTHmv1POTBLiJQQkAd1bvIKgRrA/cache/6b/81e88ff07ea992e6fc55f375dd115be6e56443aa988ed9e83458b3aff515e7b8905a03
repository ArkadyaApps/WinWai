{"dependencies":[{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":69,"index":103}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../utils/locationService","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":104},"end":{"line":3,"column":59,"index":163}}],"key":"eEvTusP89/yU1QhgEb1RDiGxzMw=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useLanguageStore\", {\n    enumerable: true,\n    get: function () {\n      return useLanguageStore;\n    }\n  });\n  var _zustand = require(_dependencyMap[0], \"zustand\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _utilsLocationService = require(_dependencyMap[2], \"../utils/locationService\");\n  // Map country codes to languages\n  const getLanguageFromCountryCode = countryCode => {\n    const languageMap = {\n      'TH': 'th',\n      // Thailand -> Thai\n      'FR': 'fr',\n      // France -> French\n      'BE': 'fr',\n      // Belgium -> French (can be refined)\n      'CH': 'fr',\n      // Switzerland -> French (can be refined)\n      'CA': 'fr' // Canada -> French (can be refined for Quebec)\n    };\n    return languageMap[countryCode] || 'en'; // Default to English\n  };\n  const useLanguageStore = (0, _zustand.create)(set => ({\n    language: 'en',\n    isLanguageDetected: false,\n    setLanguage: async language => {\n      await AsyncStorage.default.setItem('app_language', language);\n      await AsyncStorage.default.setItem('language_manually_set', 'true');\n      set({\n        language\n      });\n    },\n    initializeLanguage: async () => {\n      try {\n        // First check if user has manually set a language preference\n        const manuallySet = await AsyncStorage.default.getItem('language_manually_set');\n        const saved = await AsyncStorage.default.getItem('app_language');\n        if (manuallySet === 'true' && saved) {\n          // User has manually set language, use their preference\n          set({\n            language: saved,\n            isLanguageDetected: true\n          });\n          return;\n        }\n\n        // Try to detect language from geolocation\n        try {\n          const location = await (0, _utilsLocationService.getUserLocation)();\n          if (location && location.countryCode) {\n            const detectedLanguage = getLanguageFromCountryCode(location.countryCode);\n            console.log(`Detected country: ${location.country} (${location.countryCode}), setting language to: ${detectedLanguage}`);\n\n            // Save detected language\n            await AsyncStorage.default.setItem('app_language', detectedLanguage);\n            set({\n              language: detectedLanguage,\n              isLanguageDetected: true\n            });\n            return;\n          }\n        } catch (geoError) {\n          console.error('Geolocation-based language detection failed:', geoError);\n        }\n\n        // Fallback: Use saved language or default to English\n        if (saved) {\n          set({\n            language: saved,\n            isLanguageDetected: true\n          });\n        } else {\n          set({\n            language: 'en',\n            isLanguageDetected: true\n          });\n        }\n      } catch (error) {\n        console.error('Failed to initialize language:', error);\n        set({\n          language: 'en',\n          isLanguageDetected: true\n        });\n      }\n    }\n  }));\n});","lineCount":101,"map":[[12,2,27,0,"Object"],[12,8,27,0],[12,9,27,0,"defineProperty"],[12,23,27,0],[12,24,27,0,"exports"],[12,31,27,0],[13,4,27,0,"enumerable"],[13,14,27,0],[14,4,27,0,"get"],[14,7,27,0],[14,18,27,0,"get"],[14,19,27,0],[15,6,27,0],[15,13,27,0,"useLanguageStore"],[15,29,27,0],[16,4,27,0],[17,2,27,0],[18,2,1,0],[18,6,1,0,"_zustand"],[18,14,1,0],[18,17,1,0,"require"],[18,24,1,0],[18,25,1,0,"_dependencyMap"],[18,39,1,0],[19,2,2,0],[19,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,42,2,0],[19,45,2,0,"require"],[19,52,2,0],[19,53,2,0,"_dependencyMap"],[19,67,2,0],[20,2,2,0],[20,6,2,0,"AsyncStorage"],[20,18,2,0],[20,21,2,0,"_interopDefault"],[20,36,2,0],[20,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[20,73,2,0],[21,2,3,0],[21,6,3,0,"_utilsLocationService"],[21,27,3,0],[21,30,3,0,"require"],[21,37,3,0],[21,38,3,0,"_dependencyMap"],[21,52,3,0],[22,2,14,0],[23,2,15,0],[23,8,15,6,"getLanguageFromCountryCode"],[23,34,15,32],[23,37,15,36,"countryCode"],[23,48,15,55],[23,52,15,70],[24,4,16,2],[24,10,16,8,"languageMap"],[24,21,16,48],[24,24,16,51],[25,6,17,4],[25,10,17,8],[25,12,17,10],[25,16,17,14],[26,6,17,16],[27,6,18,4],[27,10,18,8],[27,12,18,10],[27,16,18,14],[28,6,18,16],[29,6,19,4],[29,10,19,8],[29,12,19,10],[29,16,19,14],[30,6,19,16],[31,6,20,4],[31,10,20,8],[31,12,20,10],[31,16,20,14],[32,6,20,16],[33,6,21,4],[33,10,21,8],[33,12,21,10],[33,16,21,14],[33,17,21,16],[34,4,22,2],[34,5,22,3],[35,4,24,2],[35,11,24,9,"languageMap"],[35,22,24,20],[35,23,24,21,"countryCode"],[35,34,24,32],[35,35,24,33],[35,39,24,37],[35,43,24,41],[35,44,24,42],[35,45,24,43],[36,2,25,0],[36,3,25,1],[37,2,27,7],[37,8,27,13,"useLanguageStore"],[37,24,27,29],[37,27,27,32],[37,31,27,32,"create"],[37,39,27,38],[37,40,27,38,"create"],[37,46,27,38],[37,48,27,55,"set"],[37,51,27,58],[37,56,27,64],[38,4,28,2,"language"],[38,12,28,10],[38,14,28,12],[38,18,28,16],[39,4,29,2,"isLanguageDetected"],[39,22,29,20],[39,24,29,22],[39,29,29,27],[40,4,30,2,"setLanguage"],[40,15,30,13],[40,17,30,15],[40,23,30,22,"language"],[40,31,30,30],[40,35,30,35],[41,6,31,4],[41,12,31,10,"AsyncStorage"],[41,24,31,22],[41,25,31,22,"default"],[41,32,31,22],[41,33,31,23,"setItem"],[41,40,31,30],[41,41,31,31],[41,55,31,45],[41,57,31,47,"language"],[41,65,31,55],[41,66,31,56],[42,6,32,4],[42,12,32,10,"AsyncStorage"],[42,24,32,22],[42,25,32,22,"default"],[42,32,32,22],[42,33,32,23,"setItem"],[42,40,32,30],[42,41,32,31],[42,64,32,54],[42,66,32,56],[42,72,32,62],[42,73,32,63],[43,6,33,4,"set"],[43,9,33,7],[43,10,33,8],[44,8,33,10,"language"],[45,6,33,19],[45,7,33,20],[45,8,33,21],[46,4,34,2],[46,5,34,3],[47,4,35,2,"initializeLanguage"],[47,22,35,20],[47,24,35,22],[47,30,35,22,"initializeLanguage"],[47,31,35,22],[47,36,35,34],[48,6,36,4],[48,10,36,8],[49,8,37,6],[50,8,38,6],[50,14,38,12,"manuallySet"],[50,25,38,23],[50,28,38,26],[50,34,38,32,"AsyncStorage"],[50,46,38,44],[50,47,38,44,"default"],[50,54,38,44],[50,55,38,45,"getItem"],[50,62,38,52],[50,63,38,53],[50,86,38,76],[50,87,38,77],[51,8,39,6],[51,14,39,12,"saved"],[51,19,39,17],[51,22,39,20],[51,28,39,26,"AsyncStorage"],[51,40,39,38],[51,41,39,38,"default"],[51,48,39,38],[51,49,39,39,"getItem"],[51,56,39,46],[51,57,39,47],[51,71,39,61],[51,72,39,62],[52,8,41,6],[52,12,41,10,"manuallySet"],[52,23,41,21],[52,28,41,26],[52,34,41,32],[52,38,41,36,"saved"],[52,43,41,41],[52,45,41,43],[53,10,42,8],[54,10,43,8,"set"],[54,13,43,11],[54,14,43,12],[55,12,43,14,"language"],[55,20,43,22],[55,22,43,24,"saved"],[55,27,43,41],[56,12,43,43,"isLanguageDetected"],[56,30,43,61],[56,32,43,63],[57,10,43,68],[57,11,43,69],[57,12,43,70],[58,10,44,8],[59,8,45,6],[61,8,47,6],[62,8,48,6],[62,12,48,10],[63,10,49,8],[63,16,49,14,"location"],[63,24,49,22],[63,27,49,25],[63,33,49,31],[63,37,49,31,"getUserLocation"],[63,58,49,46],[63,59,49,46,"getUserLocation"],[63,74,49,46],[63,76,49,47],[63,77,49,48],[64,10,50,8],[64,14,50,12,"location"],[64,22,50,20],[64,26,50,24,"location"],[64,34,50,32],[64,35,50,33,"countryCode"],[64,46,50,44],[64,48,50,46],[65,12,51,10],[65,18,51,16,"detectedLanguage"],[65,34,51,32],[65,37,51,35,"getLanguageFromCountryCode"],[65,63,51,61],[65,64,51,62,"location"],[65,72,51,70],[65,73,51,71,"countryCode"],[65,84,51,82],[65,85,51,83],[66,12,52,10,"console"],[66,19,52,17],[66,20,52,18,"log"],[66,23,52,21],[66,24,52,22],[66,45,52,43,"location"],[66,53,52,51],[66,54,52,52,"country"],[66,61,52,59],[66,66,52,64,"location"],[66,74,52,72],[66,75,52,73,"countryCode"],[66,86,52,84],[66,113,52,111,"detectedLanguage"],[66,129,52,127],[66,131,52,129],[66,132,52,130],[68,12,54,10],[69,12,55,10],[69,18,55,16,"AsyncStorage"],[69,30,55,28],[69,31,55,28,"default"],[69,38,55,28],[69,39,55,29,"setItem"],[69,46,55,36],[69,47,55,37],[69,61,55,51],[69,63,55,53,"detectedLanguage"],[69,79,55,69],[69,80,55,70],[70,12,56,10,"set"],[70,15,56,13],[70,16,56,14],[71,14,56,16,"language"],[71,22,56,24],[71,24,56,26,"detectedLanguage"],[71,40,56,42],[72,14,56,44,"isLanguageDetected"],[72,32,56,62],[72,34,56,64],[73,12,56,69],[73,13,56,70],[73,14,56,71],[74,12,57,10],[75,10,58,8],[76,8,59,6],[76,9,59,7],[76,10,59,8],[76,17,59,15,"geoError"],[76,25,59,23],[76,27,59,25],[77,10,60,8,"console"],[77,17,60,15],[77,18,60,16,"error"],[77,23,60,21],[77,24,60,22],[77,70,60,68],[77,72,60,70,"geoError"],[77,80,60,78],[77,81,60,79],[78,8,61,6],[80,8,63,6],[81,8,64,6],[81,12,64,10,"saved"],[81,17,64,15],[81,19,64,17],[82,10,65,8,"set"],[82,13,65,11],[82,14,65,12],[83,12,65,14,"language"],[83,20,65,22],[83,22,65,24,"saved"],[83,27,65,41],[84,12,65,43,"isLanguageDetected"],[84,30,65,61],[84,32,65,63],[85,10,65,68],[85,11,65,69],[85,12,65,70],[86,8,66,6],[86,9,66,7],[86,15,66,13],[87,10,67,8,"set"],[87,13,67,11],[87,14,67,12],[88,12,67,14,"language"],[88,20,67,22],[88,22,67,24],[88,26,67,28],[89,12,67,30,"isLanguageDetected"],[89,30,67,48],[89,32,67,50],[90,10,67,55],[90,11,67,56],[90,12,67,57],[91,8,68,6],[92,6,69,4],[92,7,69,5],[92,8,69,6],[92,15,69,13,"error"],[92,20,69,18],[92,22,69,20],[93,8,70,6,"console"],[93,15,70,13],[93,16,70,14,"error"],[93,21,70,19],[93,22,70,20],[93,54,70,52],[93,56,70,54,"error"],[93,61,70,59],[93,62,70,60],[94,8,71,6,"set"],[94,11,71,9],[94,12,71,10],[95,10,71,12,"language"],[95,18,71,20],[95,20,71,22],[95,24,71,26],[96,10,71,28,"isLanguageDetected"],[96,28,71,46],[96,30,71,48],[97,8,71,53],[97,9,71,54],[97,10,71,55],[98,6,72,4],[99,4,73,2],[100,2,74,0],[100,3,74,1],[100,4,74,2],[100,5,74,3],[101,0,74,4],[101,3]],"functionMap":{"names":["<global>","getLanguageFromCountryCode","create$argument_0","setLanguage","initializeLanguage"],"mappings":"AAA;mCCc;CDU;sDEE;eCG;GDI;sBEC;GFsC;EFC"},"hasCjsExports":false},"type":"js/module"}]}