{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":62,"column":47,"index":2370}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"expo-modules-core","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":45,"index":45}}],"key":"ka0FS6s7ZmvhJq+hEjGkLLrGpyo="}},{"name":"./ExpoLocation","data":{"asyncType":null,"locs":[{"start":{"line":2,"column":0,"index":46},"end":{"line":2,"column":42,"index":88}}],"key":"NazjAXvjzikX33zTD6JfXGTtbHU="}},{"name":"./Location.types","data":{"asyncType":null,"locs":[{"start":{"line":3,"column":0,"index":89},"end":{"line":3,"column":52,"index":141}}],"key":"vXS2ioQo9nEEinMJI6VUtnEwTmA="}},{"name":"./LocationSubscribers","data":{"asyncType":null,"locs":[{"start":{"line":4,"column":0,"index":142},"end":{"line":4,"column":59,"index":201}}],"key":"20N26u4utX11viz78IRkHvoKo9I="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.installWebGeolocationPolyfill = installWebGeolocationPolyfill;\n  var _expoModulesCore = require(_dependencyMap[1], \"expo-modules-core\");\n  var _ExpoLocation = _interopRequireDefault(require(_dependencyMap[2], \"./ExpoLocation\"));\n  var _Location = require(_dependencyMap[3], \"./Location.types\");\n  var _LocationSubscribers = require(_dependencyMap[4], \"./LocationSubscribers\");\n  // @needsAudit\n  /**\n   * Polyfills `navigator.geolocation` for interop with the core React Native and Web API approach to geolocation.\n   */\n  function installWebGeolocationPolyfill() {\n    if (_expoModulesCore.Platform.OS !== 'web') {\n      // Make sure `window.navigator` is defined in the global scope.\n      if (!('window' in global)) {\n        global.window = global;\n      }\n      if (!('navigator' in global.window)) {\n        global.window.navigator = {};\n      }\n      // @ts-ignore\n      window.navigator.geolocation = {\n        getCurrentPosition,\n        watchPosition,\n        clearWatch,\n        // We don't polyfill stopObserving, this is an internal method that probably should not even exist\n        // in react-native docs\n        stopObserving: () => {}\n      };\n    }\n  }\n  function convertGeolocationOptions(options) {\n    return {\n      accuracy: options.enableHighAccuracy ? _Location.LocationAccuracy.High : _Location.LocationAccuracy.Balanced\n    };\n  }\n  function getCurrentPosition(success) {\n    let error = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : () => {};\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    _getCurrentPositionAsyncWrapper(success, error, options);\n  }\n  // This function exists to let us continue to return undefined from getCurrentPosition, while still\n  // using async/await for the internal implementation of it\n  async function _getCurrentPositionAsyncWrapper(success, error, options) {\n    try {\n      await _ExpoLocation.default.requestPermissionsAsync();\n      const result = await _ExpoLocation.default.getCurrentPositionAsync(convertGeolocationOptions(options));\n      success(result);\n    } catch (e) {\n      error(e);\n    }\n  }\n  // Polyfill: navigator.geolocation.watchPosition\n  function watchPosition(success, error, options) {\n    const watchId = _LocationSubscribers.LocationSubscriber.registerCallback(success);\n    _ExpoLocation.default.watchPositionImplAsync(watchId, options).catch(err => {\n      _LocationSubscribers.LocationSubscriber.unregisterCallback(watchId);\n      error({\n        watchId,\n        message: err.message,\n        code: err.code\n      });\n    });\n    return watchId;\n  }\n  // Polyfill: navigator.geolocation.clearWatch\n  function clearWatch(watchId) {\n    _LocationSubscribers.LocationSubscriber.unregisterCallback(watchId);\n  }\n});","lineCount":73,"map":[[7,2,1,0],[7,6,1,0,"_expoModulesCore"],[7,22,1,0],[7,25,1,0,"require"],[7,32,1,0],[7,33,1,0,"_dependencyMap"],[7,47,1,0],[8,2,2,0],[8,6,2,0,"_ExpoLocation"],[8,19,2,0],[8,22,2,0,"_interopRequireDefault"],[8,44,2,0],[8,45,2,0,"require"],[8,52,2,0],[8,53,2,0,"_dependencyMap"],[8,67,2,0],[9,2,3,0],[9,6,3,0,"_Location"],[9,15,3,0],[9,18,3,0,"require"],[9,25,3,0],[9,26,3,0,"_dependencyMap"],[9,40,3,0],[10,2,4,0],[10,6,4,0,"_LocationSubscribers"],[10,26,4,0],[10,29,4,0,"require"],[10,36,4,0],[10,37,4,0,"_dependencyMap"],[10,51,4,0],[11,2,5,0],[12,2,6,0],[13,0,7,0],[14,0,8,0],[15,2,9,7],[15,11,9,16,"installWebGeolocationPolyfill"],[15,40,9,45,"installWebGeolocationPolyfill"],[15,41,9,45],[15,43,9,48],[16,4,10,4],[16,8,10,8,"Platform"],[16,33,10,16],[16,34,10,17,"OS"],[16,36,10,19],[16,41,10,24],[16,46,10,29],[16,48,10,31],[17,6,11,8],[18,6,12,8],[18,10,12,12],[18,12,12,14],[18,20,12,22],[18,24,12,26,"global"],[18,30,12,32],[18,31,12,33],[18,33,12,35],[19,8,13,12,"global"],[19,14,13,18],[19,15,13,19,"window"],[19,21,13,25],[19,24,13,28,"global"],[19,30,13,34],[20,6,14,8],[21,6,15,8],[21,10,15,12],[21,12,15,14],[21,23,15,25],[21,27,15,29,"global"],[21,33,15,35],[21,34,15,36,"window"],[21,40,15,42],[21,41,15,43],[21,43,15,45],[22,8,16,12,"global"],[22,14,16,18],[22,15,16,19,"window"],[22,21,16,25],[22,22,16,26,"navigator"],[22,31,16,35],[22,34,16,38],[22,35,16,39],[22,36,16,40],[23,6,17,8],[24,6,18,8],[25,6,19,8,"window"],[25,12,19,14],[25,13,19,15,"navigator"],[25,22,19,24],[25,23,19,25,"geolocation"],[25,34,19,36],[25,37,19,39],[26,8,20,12,"getCurrentPosition"],[26,26,20,30],[27,8,21,12,"watchPosition"],[27,21,21,25],[28,8,22,12,"clearWatch"],[28,18,22,22],[29,8,23,12],[30,8,24,12],[31,8,25,12,"stopObserving"],[31,21,25,25],[31,23,25,27,"stopObserving"],[31,24,25,27],[31,29,25,33],[31,30,25,35],[32,6,26,8],[32,7,26,9],[33,4,27,4],[34,2,28,0],[35,2,29,0],[35,11,29,9,"convertGeolocationOptions"],[35,36,29,34,"convertGeolocationOptions"],[35,37,29,35,"options"],[35,44,29,42],[35,46,29,44],[36,4,30,4],[36,11,30,11],[37,6,31,8,"accuracy"],[37,14,31,16],[37,16,31,18,"options"],[37,23,31,25],[37,24,31,26,"enableHighAccuracy"],[37,42,31,44],[37,45,31,47,"LocationAccuracy"],[37,71,31,63],[37,72,31,64,"High"],[37,76,31,68],[37,79,31,71,"LocationAccuracy"],[37,105,31,87],[37,106,31,88,"Balanced"],[38,4,32,4],[38,5,32,5],[39,2,33,0],[40,2,34,0],[40,11,34,9,"getCurrentPosition"],[40,29,34,27,"getCurrentPosition"],[40,30,34,28,"success"],[40,37,34,35],[40,39,34,70],[41,4,34,70],[41,8,34,37,"error"],[41,13,34,42],[41,16,34,42,"arguments"],[41,25,34,42],[41,26,34,42,"length"],[41,32,34,42],[41,40,34,42,"arguments"],[41,49,34,42],[41,57,34,42,"undefined"],[41,66,34,42],[41,69,34,42,"arguments"],[41,78,34,42],[41,84,34,45],[41,90,34,51],[41,91,34,53],[41,92,34,54],[42,4,34,54],[42,8,34,56,"options"],[42,15,34,63],[42,18,34,63,"arguments"],[42,27,34,63],[42,28,34,63,"length"],[42,34,34,63],[42,42,34,63,"arguments"],[42,51,34,63],[42,59,34,63,"undefined"],[42,68,34,63],[42,71,34,63,"arguments"],[42,80,34,63],[42,86,34,66],[42,87,34,67],[42,88,34,68],[43,4,35,4,"_getCurrentPositionAsyncWrapper"],[43,35,35,35],[43,36,35,36,"success"],[43,43,35,43],[43,45,35,45,"error"],[43,50,35,50],[43,52,35,52,"options"],[43,59,35,59],[43,60,35,60],[44,2,36,0],[45,2,37,0],[46,2,38,0],[47,2,39,0],[47,17,39,15,"_getCurrentPositionAsyncWrapper"],[47,48,39,46,"_getCurrentPositionAsyncWrapper"],[47,49,39,47,"success"],[47,56,39,54],[47,58,39,56,"error"],[47,63,39,61],[47,65,39,63,"options"],[47,72,39,70],[47,74,39,72],[48,4,40,4],[48,8,40,8],[49,6,41,8],[49,12,41,14,"ExpoLocation"],[49,33,41,26],[49,34,41,27,"requestPermissionsAsync"],[49,57,41,50],[49,58,41,51],[49,59,41,52],[50,6,42,8],[50,12,42,14,"result"],[50,18,42,20],[50,21,42,23],[50,27,42,29,"ExpoLocation"],[50,48,42,41],[50,49,42,42,"getCurrentPositionAsync"],[50,72,42,65],[50,73,42,66,"convertGeolocationOptions"],[50,98,42,91],[50,99,42,92,"options"],[50,106,42,99],[50,107,42,100],[50,108,42,101],[51,6,43,8,"success"],[51,13,43,15],[51,14,43,16,"result"],[51,20,43,22],[51,21,43,23],[52,4,44,4],[52,5,44,5],[52,6,45,4],[52,13,45,11,"e"],[52,14,45,12],[52,16,45,14],[53,6,46,8,"error"],[53,11,46,13],[53,12,46,14,"e"],[53,13,46,15],[53,14,46,16],[54,4,47,4],[55,2,48,0],[56,2,49,0],[57,2,50,0],[57,11,50,9,"watchPosition"],[57,24,50,22,"watchPosition"],[57,25,50,23,"success"],[57,32,50,30],[57,34,50,32,"error"],[57,39,50,37],[57,41,50,39,"options"],[57,48,50,46],[57,50,50,48],[58,4,51,4],[58,10,51,10,"watchId"],[58,17,51,17],[58,20,51,20,"LocationSubscriber"],[58,59,51,38],[58,60,51,39,"registerCallback"],[58,76,51,55],[58,77,51,56,"success"],[58,84,51,63],[58,85,51,64],[59,4,52,4,"ExpoLocation"],[59,25,52,16],[59,26,52,17,"watchPositionImplAsync"],[59,48,52,39],[59,49,52,40,"watchId"],[59,56,52,47],[59,58,52,49,"options"],[59,65,52,56],[59,66,52,57],[59,67,52,58,"catch"],[59,72,52,63],[59,73,52,65,"err"],[59,76,52,68],[59,80,52,73],[60,6,53,8,"LocationSubscriber"],[60,45,53,26],[60,46,53,27,"unregisterCallback"],[60,64,53,45],[60,65,53,46,"watchId"],[60,72,53,53],[60,73,53,54],[61,6,54,8,"error"],[61,11,54,13],[61,12,54,14],[62,8,54,16,"watchId"],[62,15,54,23],[63,8,54,25,"message"],[63,15,54,32],[63,17,54,34,"err"],[63,20,54,37],[63,21,54,38,"message"],[63,28,54,45],[64,8,54,47,"code"],[64,12,54,51],[64,14,54,53,"err"],[64,17,54,56],[64,18,54,57,"code"],[65,6,54,62],[65,7,54,63],[65,8,54,64],[66,4,55,4],[66,5,55,5],[66,6,55,6],[67,4,56,4],[67,11,56,11,"watchId"],[67,18,56,18],[68,2,57,0],[69,2,58,0],[70,2,59,0],[70,11,59,9,"clearWatch"],[70,21,59,19,"clearWatch"],[70,22,59,20,"watchId"],[70,29,59,27],[70,31,59,29],[71,4,60,4,"LocationSubscriber"],[71,43,60,22],[71,44,60,23,"unregisterCallback"],[71,62,60,41],[71,63,60,42,"watchId"],[71,70,60,49],[71,71,60,50],[72,2,61,0],[73,0,61,1]],"functionMap":{"names":["<global>","installWebGeolocationPolyfill","window.navigator.geolocation.stopObserving","convertGeolocationOptions","getCurrentPosition","<anonymous>","_getCurrentPositionAsyncWrapper","watchPosition","ExpoLocation.watchPositionImplAsync._catch$argument_0","clearWatch"],"mappings":"AAA;OCQ;2BCgB,SD;CDG;AGC;CHI;AIC,6CC,SD;CJE;AMG;CNS;AOE;gECE;KDG;CPE;ASE;CTE"}},"type":"js/module"}]}