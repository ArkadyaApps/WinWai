{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":127,"column":0,"index":3703}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"../NativeAnimatedHelper","data":{"asyncType":null,"locs":[{"start":{"line":17,"column":0,"index":406},"end":{"line":17,"column":59,"index":465}}],"key":"1ezhP5tF6Z9mOXoBZysNLcWfZtg="}},{"name":"../nodes/AnimatedProps","data":{"asyncType":null,"locs":[{"start":{"line":18,"column":0,"index":466},"end":{"line":18,"column":51,"index":517}}],"key":"b5tA9uVU8NDfoB47WehpgCijIe8="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  /**\n   * Copyright (c) Meta Platforms, Inc. and affiliates.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   *\n   * \n   * @format\n   */\n\n  'use strict';\n\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n  var _NativeAnimatedHelper = _interopRequireDefault(require(_dependencyMap[1], \"../NativeAnimatedHelper\"));\n  var _AnimatedProps = _interopRequireDefault(require(_dependencyMap[2], \"../nodes/AnimatedProps\"));\n  let startNativeAnimationNextId = 1;\n\n  // Important note: start() and stop() will only be called at most once.\n  // Once an animation has been stopped or finished its course, it will\n  // not be reused.\n  class Animation {\n    start(fromValue, onUpdate, onEnd, previousAnimation, animatedValue) {}\n    stop() {\n      if (this._nativeId) {\n        _NativeAnimatedHelper.default.API.stopAnimation(this._nativeId);\n      }\n    }\n    __getNativeAnimationConfig() {\n      // Subclasses that have corresponding animation implementation done in native\n      // should override this method\n      throw new Error('This animation type cannot be offloaded to native');\n    }\n\n    // Helper function for subclasses to make sure onEnd is only called once.\n    __debouncedOnEnd(result) {\n      const onEnd = this.__onEnd;\n      this.__onEnd = null;\n      onEnd && onEnd(result);\n    }\n    __findAnimatedPropsNodes(node) {\n      const result = [];\n      if (node instanceof _AnimatedProps.default) {\n        result.push(node);\n        return result;\n      }\n      for (const child of node.__getChildren()) {\n        result.push(...this.__findAnimatedPropsNodes(child));\n      }\n      return result;\n    }\n    __startNativeAnimation(animatedValue) {\n      const startNativeAnimationWaitId = `${startNativeAnimationNextId}:startAnimation`;\n      startNativeAnimationNextId += 1;\n      _NativeAnimatedHelper.default.API.setWaitingForIdentifier(startNativeAnimationWaitId);\n      try {\n        const config = this.__getNativeAnimationConfig();\n        animatedValue.__makeNative(config.platformConfig);\n        this._nativeId = _NativeAnimatedHelper.default.generateNewAnimationId();\n        _NativeAnimatedHelper.default.API.startAnimatingNode(this._nativeId, animatedValue.__getNativeTag(), config, result => {\n          this.__debouncedOnEnd(result);\n\n          // When using natively driven animations, once the animation completes,\n          // we need to ensure that the JS side nodes are synced with the updated\n          // values.\n          const {\n            value\n          } = result;\n          if (value != null) {\n            animatedValue.__onAnimatedValueUpdateReceived(value);\n\n            // Once the JS side node is synced with the updated values, trigger an\n            // update on the AnimatedProps nodes to call any registered callbacks.\n            this.__findAnimatedPropsNodes(animatedValue).forEach(node => node.update());\n          }\n        });\n      } catch (e) {\n        throw e;\n      } finally {\n        _NativeAnimatedHelper.default.API.unsetWaitingForIdentifier(startNativeAnimationWaitId);\n      }\n    }\n  }\n  exports.default = Animation;\n});","lineCount":89,"map":[[2,2,1,0],[3,0,2,0],[4,0,3,0],[5,0,4,0],[6,0,5,0],[7,0,6,0],[8,0,7,0],[9,0,8,0],[10,0,9,0],[12,2,11,0],[12,14,11,12],[14,2,11,13],[14,6,11,13,"_interopRequireDefault"],[14,28,11,13],[14,31,11,13,"require"],[14,38,11,13],[14,39,11,13,"_dependencyMap"],[14,53,11,13],[15,2,11,13,"Object"],[15,8,11,13],[15,9,11,13,"defineProperty"],[15,23,11,13],[15,24,11,13,"exports"],[15,31,11,13],[16,4,11,13,"value"],[16,9,11,13],[17,2,11,13],[18,2,11,13,"exports"],[18,9,11,13],[18,10,11,13,"default"],[18,17,11,13],[19,2,17,0],[19,6,17,0,"_NativeAnimatedHelper"],[19,27,17,0],[19,30,17,0,"_interopRequireDefault"],[19,52,17,0],[19,53,17,0,"require"],[19,60,17,0],[19,61,17,0,"_dependencyMap"],[19,75,17,0],[20,2,18,0],[20,6,18,0,"_AnimatedProps"],[20,20,18,0],[20,23,18,0,"_interopRequireDefault"],[20,45,18,0],[20,46,18,0,"require"],[20,53,18,0],[20,54,18,0,"_dependencyMap"],[20,68,18,0],[21,2,31,0],[21,6,31,4,"startNativeAnimationNextId"],[21,32,31,30],[21,35,31,33],[21,36,31,34],[23,2,33,0],[24,2,34,0],[25,2,35,0],[26,2,36,15],[26,8,36,21,"Animation"],[26,17,36,30],[26,18,36,31],[27,4,44,2,"start"],[27,9,44,7,"start"],[27,10,45,4,"fromValue"],[27,19,45,21],[27,21,46,4,"onUpdate"],[27,29,46,37],[27,31,47,4,"onEnd"],[27,36,47,23],[27,38,48,4,"previousAnimation"],[27,55,48,33],[27,57,49,4,"animatedValue"],[27,70,49,32],[27,72,50,10],[27,73,50,11],[28,4,52,2,"stop"],[28,8,52,6,"stop"],[28,9,52,6],[28,11,52,15],[29,6,53,4],[29,10,53,8],[29,14,53,12],[29,15,53,13,"_nativeId"],[29,24,53,22],[29,26,53,24],[30,8,54,6,"NativeAnimatedHelper"],[30,37,54,26],[30,38,54,27,"API"],[30,41,54,30],[30,42,54,31,"stopAnimation"],[30,55,54,44],[30,56,54,45],[30,60,54,49],[30,61,54,50,"_nativeId"],[30,70,54,59],[30,71,54,60],[31,6,55,4],[32,4,56,2],[33,4,58,2,"__getNativeAnimationConfig"],[33,30,58,28,"__getNativeAnimationConfig"],[33,31,58,28],[33,33,58,36],[34,6,59,4],[35,6,60,4],[36,6,61,4],[36,12,61,10],[36,16,61,14,"Error"],[36,21,61,19],[36,22,61,20],[36,73,61,71],[36,74,61,72],[37,4,62,2],[39,4,64,2],[40,4,65,2,"__debouncedOnEnd"],[40,20,65,18,"__debouncedOnEnd"],[40,21,65,19,"result"],[40,27,65,36],[40,29,65,44],[41,6,66,4],[41,12,66,10,"onEnd"],[41,17,66,15],[41,20,66,18],[41,24,66,22],[41,25,66,23,"__onEnd"],[41,32,66,30],[42,6,67,4],[42,10,67,8],[42,11,67,9,"__onEnd"],[42,18,67,16],[42,21,67,19],[42,25,67,23],[43,6,68,4,"onEnd"],[43,11,68,9],[43,15,68,13,"onEnd"],[43,20,68,18],[43,21,68,19,"result"],[43,27,68,25],[43,28,68,26],[44,4,69,2],[45,4,71,2,"__findAnimatedPropsNodes"],[45,28,71,26,"__findAnimatedPropsNodes"],[45,29,71,27,"node"],[45,33,71,45],[45,35,71,69],[46,6,72,4],[46,12,72,10,"result"],[46,18,72,16],[46,21,72,19],[46,23,72,21],[47,6,74,4],[47,10,74,8,"node"],[47,14,74,12],[47,26,74,24,"AnimatedProps"],[47,48,74,37],[47,50,74,39],[48,8,75,6,"result"],[48,14,75,12],[48,15,75,13,"push"],[48,19,75,17],[48,20,75,18,"node"],[48,24,75,22],[48,25,75,23],[49,8,76,6],[49,15,76,13,"result"],[49,21,76,19],[50,6,77,4],[51,6,79,4],[51,11,79,9],[51,17,79,15,"child"],[51,22,79,20],[51,26,79,24,"node"],[51,30,79,28],[51,31,79,29,"__getChildren"],[51,44,79,42],[51,45,79,43],[51,46,79,44],[51,48,79,46],[52,8,80,6,"result"],[52,14,80,12],[52,15,80,13,"push"],[52,19,80,17],[52,20,80,18],[52,23,80,21],[52,27,80,25],[52,28,80,26,"__findAnimatedPropsNodes"],[52,52,80,50],[52,53,80,51,"child"],[52,58,80,56],[52,59,80,57],[52,60,80,58],[53,6,81,4],[54,6,83,4],[54,13,83,11,"result"],[54,19,83,17],[55,4,84,2],[56,4,86,2,"__startNativeAnimation"],[56,26,86,24,"__startNativeAnimation"],[56,27,86,25,"animatedValue"],[56,40,86,53],[56,42,86,61],[57,6,87,4],[57,12,87,10,"startNativeAnimationWaitId"],[57,38,87,36],[57,41,87,39],[57,44,87,42,"startNativeAnimationNextId"],[57,70,87,68],[57,87,87,85],[58,6,88,4,"startNativeAnimationNextId"],[58,32,88,30],[58,36,88,34],[58,37,88,35],[59,6,89,4,"NativeAnimatedHelper"],[59,35,89,24],[59,36,89,25,"API"],[59,39,89,28],[59,40,89,29,"setWaitingForIdentifier"],[59,63,89,52],[59,64,90,6,"startNativeAnimationWaitId"],[59,90,91,4],[59,91,91,5],[60,6,92,4],[60,10,92,8],[61,8,93,6],[61,14,93,12,"config"],[61,20,93,18],[61,23,93,21],[61,27,93,25],[61,28,93,26,"__getNativeAnimationConfig"],[61,54,93,52],[61,55,93,53],[61,56,93,54],[62,8,94,6,"animatedValue"],[62,21,94,19],[62,22,94,20,"__makeNative"],[62,34,94,32],[62,35,94,33,"config"],[62,41,94,39],[62,42,94,40,"platformConfig"],[62,56,94,54],[62,57,94,55],[63,8,95,6],[63,12,95,10],[63,13,95,11,"_nativeId"],[63,22,95,20],[63,25,95,23,"NativeAnimatedHelper"],[63,54,95,43],[63,55,95,44,"generateNewAnimationId"],[63,77,95,66],[63,78,95,67],[63,79,95,68],[64,8,96,6,"NativeAnimatedHelper"],[64,37,96,26],[64,38,96,27,"API"],[64,41,96,30],[64,42,96,31,"startAnimatingNode"],[64,60,96,49],[64,61,97,8],[64,65,97,12],[64,66,97,13,"_nativeId"],[64,75,97,22],[64,77,98,8,"animatedValue"],[64,90,98,21],[64,91,98,22,"__getNativeTag"],[64,105,98,36],[64,106,98,37],[64,107,98,38],[64,109,99,8,"config"],[64,115,99,14],[64,117,100,8,"result"],[64,123,100,14],[64,127,100,18],[65,10,101,10],[65,14,101,14],[65,15,101,15,"__debouncedOnEnd"],[65,31,101,31],[65,32,101,32,"result"],[65,38,101,38],[65,39,101,39],[67,10,103,10],[68,10,104,10],[69,10,105,10],[70,10,106,10],[70,16,106,16],[71,12,106,17,"value"],[72,10,106,22],[72,11,106,23],[72,14,106,26,"result"],[72,20,106,32],[73,10,107,10],[73,14,107,14,"value"],[73,19,107,19],[73,23,107,23],[73,27,107,27],[73,29,107,29],[74,12,108,12,"animatedValue"],[74,25,108,25],[74,26,108,26,"__onAnimatedValueUpdateReceived"],[74,57,108,57],[74,58,108,58,"value"],[74,63,108,63],[74,64,108,64],[76,12,110,12],[77,12,111,12],[78,12,112,12],[78,16,112,16],[78,17,112,17,"__findAnimatedPropsNodes"],[78,41,112,41],[78,42,112,42,"animatedValue"],[78,55,112,55],[78,56,112,56],[78,57,112,57,"forEach"],[78,64,112,64],[78,65,112,65,"node"],[78,69,112,69],[78,73,113,14,"node"],[78,77,113,18],[78,78,113,19,"update"],[78,84,113,25],[78,85,113,26],[78,86,114,12],[78,87,114,13],[79,10,115,10],[80,8,116,8],[80,9,117,6],[80,10,117,7],[81,6,118,4],[81,7,118,5],[81,8,118,6],[81,15,118,13,"e"],[81,16,118,14],[81,18,118,16],[82,8,119,6],[82,14,119,12,"e"],[82,15,119,13],[83,6,120,4],[83,7,120,5],[83,16,120,14],[84,8,121,6,"NativeAnimatedHelper"],[84,37,121,26],[84,38,121,27,"API"],[84,41,121,30],[84,42,121,31,"unsetWaitingForIdentifier"],[84,67,121,56],[84,68,122,8,"startNativeAnimationWaitId"],[84,94,123,6],[84,95,123,7],[85,6,124,4],[86,4,125,2],[87,2,126,0],[88,2,126,1,"exports"],[88,9,126,1],[88,10,126,1,"default"],[88,17,126,1],[88,20,126,1,"Animation"],[88,29,126,1],[89,0,126,1]],"functionMap":{"names":["<global>","Animation","start","stop","__getNativeAnimationConfig","__debouncedOnEnd","__findAnimatedPropsNodes","__startNativeAnimation","NativeAnimatedHelper.API.startAnimatingNode$argument_3","__findAnimatedPropsNodes.forEach$argument_0"],"mappings":"AAA;eCmC;ECQ;YDM;EEE;GFI;EGE;GHI;EIG;GJI;EKE;GLa;EME;QCc;iECY;2BDC;SDG;GNS;CDC"}},"type":"js/module"}]}