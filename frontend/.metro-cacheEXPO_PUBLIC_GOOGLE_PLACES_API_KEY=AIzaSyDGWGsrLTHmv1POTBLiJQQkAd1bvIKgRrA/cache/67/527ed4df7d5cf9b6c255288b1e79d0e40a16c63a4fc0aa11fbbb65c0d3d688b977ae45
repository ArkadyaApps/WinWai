{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":134,"column":0,"index":3605}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"../NativeAnimatedHelper","data":{"asyncType":null,"locs":[{"start":{"line":17,"column":0,"index":414},"end":{"line":17,"column":59,"index":473}}],"key":"1ezhP5tF6Z9mOXoBZysNLcWfZtg="}},{"name":"./Animation","data":{"asyncType":null,"locs":[{"start":{"line":18,"column":0,"index":474},"end":{"line":18,"column":36,"index":510}}],"key":"9WxVttYJbsm4GySM1jMcLifLq2U="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  /**\n   * Copyright (c) Meta Platforms, Inc. and affiliates.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   *\n   * \n   * @format\n   */\n\n  'use strict';\n\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n  var _NativeAnimatedHelper = _interopRequireDefault(require(_dependencyMap[1], \"../NativeAnimatedHelper\"));\n  var _Animation = _interopRequireDefault(require(_dependencyMap[2], \"./Animation\"));\n  class DecayAnimation extends _Animation.default {\n    constructor(config) {\n      super();\n      this._deceleration = config.deceleration ?? 0.998;\n      this._velocity = config.velocity;\n      this._useNativeDriver = _NativeAnimatedHelper.default.shouldUseNativeDriver(config);\n      this._platformConfig = config.platformConfig;\n      this.__isInteraction = config.isInteraction ?? !this._useNativeDriver;\n      this.__iterations = config.iterations ?? 1;\n    }\n    __getNativeAnimationConfig() {\n      return {\n        type: 'decay',\n        deceleration: this._deceleration,\n        velocity: this._velocity,\n        iterations: this.__iterations,\n        platformConfig: this._platformConfig\n      };\n    }\n    start(fromValue, onUpdate, onEnd, previousAnimation, animatedValue) {\n      this.__active = true;\n      this._lastValue = fromValue;\n      this._fromValue = fromValue;\n      this._onUpdate = onUpdate;\n      this.__onEnd = onEnd;\n      this._startTime = Date.now();\n      if (!this._useNativeDriver && animatedValue.__isNative === true) {\n        throw new Error('Attempting to run JS driven animation on animated node ' + 'that has been moved to \"native\" earlier by starting an ' + 'animation with `useNativeDriver: true`');\n      }\n      if (this._useNativeDriver) {\n        this.__startNativeAnimation(animatedValue);\n      } else {\n        // $FlowFixMe[method-unbinding] added when improving typing for this parameters\n        this._animationFrame = requestAnimationFrame(this.onUpdate.bind(this));\n      }\n    }\n    onUpdate() {\n      const now = Date.now();\n      const value = this._fromValue + this._velocity / (1 - this._deceleration) * (1 - Math.exp(-(1 - this._deceleration) * (now - this._startTime)));\n      this._onUpdate(value);\n      if (Math.abs(this._lastValue - value) < 0.1) {\n        this.__debouncedOnEnd({\n          finished: true\n        });\n        return;\n      }\n      this._lastValue = value;\n      if (this.__active) {\n        // $FlowFixMe[method-unbinding] added when improving typing for this parameters\n        this._animationFrame = requestAnimationFrame(this.onUpdate.bind(this));\n      }\n    }\n    stop() {\n      super.stop();\n      this.__active = false;\n      global.cancelAnimationFrame(this._animationFrame);\n      this.__debouncedOnEnd({\n        finished: false\n      });\n    }\n  }\n  exports.default = DecayAnimation;\n});","lineCount":83,"map":[[2,2,1,0],[3,0,2,0],[4,0,3,0],[5,0,4,0],[6,0,5,0],[7,0,6,0],[8,0,7,0],[9,0,8,0],[10,0,9,0],[12,2,11,0],[12,14,11,12],[14,2,11,13],[14,6,11,13,"_interopRequireDefault"],[14,28,11,13],[14,31,11,13,"require"],[14,38,11,13],[14,39,11,13,"_dependencyMap"],[14,53,11,13],[15,2,11,13,"Object"],[15,8,11,13],[15,9,11,13,"defineProperty"],[15,23,11,13],[15,24,11,13,"exports"],[15,31,11,13],[16,4,11,13,"value"],[16,9,11,13],[17,2,11,13],[18,2,11,13,"exports"],[18,9,11,13],[18,10,11,13,"default"],[18,17,11,13],[19,2,17,0],[19,6,17,0,"_NativeAnimatedHelper"],[19,27,17,0],[19,30,17,0,"_interopRequireDefault"],[19,52,17,0],[19,53,17,0,"require"],[19,60,17,0],[19,61,17,0,"_dependencyMap"],[19,75,17,0],[20,2,18,0],[20,6,18,0,"_Animation"],[20,16,18,0],[20,19,18,0,"_interopRequireDefault"],[20,41,18,0],[20,42,18,0,"require"],[20,49,18,0],[20,50,18,0,"_dependencyMap"],[20,64,18,0],[21,2,38,15],[21,8,38,21,"DecayAnimation"],[21,22,38,35],[21,31,38,44,"Animation"],[21,49,38,53],[21,50,38,54],[22,4,49,2,"constructor"],[22,15,49,13,"constructor"],[22,16,49,14,"config"],[22,22,49,48],[22,24,49,50],[23,6,50,4],[23,11,50,9],[23,12,50,10],[23,13,50,11],[24,6,51,4],[24,10,51,8],[24,11,51,9,"_deceleration"],[24,24,51,22],[24,27,51,25,"config"],[24,33,51,31],[24,34,51,32,"deceleration"],[24,46,51,44],[24,50,51,48],[24,55,51,53],[25,6,52,4],[25,10,52,8],[25,11,52,9,"_velocity"],[25,20,52,18],[25,23,52,21,"config"],[25,29,52,27],[25,30,52,28,"velocity"],[25,38,52,36],[26,6,53,4],[26,10,53,8],[26,11,53,9,"_useNativeDriver"],[26,27,53,25],[26,30,53,28,"NativeAnimatedHelper"],[26,59,53,48],[26,60,53,49,"shouldUseNativeDriver"],[26,81,53,70],[26,82,53,71,"config"],[26,88,53,77],[26,89,53,78],[27,6,54,4],[27,10,54,8],[27,11,54,9,"_platformConfig"],[27,26,54,24],[27,29,54,27,"config"],[27,35,54,33],[27,36,54,34,"platformConfig"],[27,50,54,48],[28,6,55,4],[28,10,55,8],[28,11,55,9,"__isInteraction"],[28,26,55,24],[28,29,55,27,"config"],[28,35,55,33],[28,36,55,34,"isInteraction"],[28,49,55,47],[28,53,55,51],[28,54,55,52],[28,58,55,56],[28,59,55,57,"_useNativeDriver"],[28,75,55,73],[29,6,56,4],[29,10,56,8],[29,11,56,9,"__iterations"],[29,23,56,21],[29,26,56,24,"config"],[29,32,56,30],[29,33,56,31,"iterations"],[29,43,56,41],[29,47,56,45],[29,48,56,46],[30,4,57,2],[31,4,59,2,"__getNativeAnimationConfig"],[31,30,59,28,"__getNativeAnimationConfig"],[31,31,59,28],[31,33,65,5],[32,6,66,4],[32,13,66,11],[33,8,67,6,"type"],[33,12,67,10],[33,14,67,12],[33,21,67,19],[34,8,68,6,"deceleration"],[34,20,68,18],[34,22,68,20],[34,26,68,24],[34,27,68,25,"_deceleration"],[34,40,68,38],[35,8,69,6,"velocity"],[35,16,69,14],[35,18,69,16],[35,22,69,20],[35,23,69,21,"_velocity"],[35,32,69,30],[36,8,70,6,"iterations"],[36,18,70,16],[36,20,70,18],[36,24,70,22],[36,25,70,23,"__iterations"],[36,37,70,35],[37,8,71,6,"platformConfig"],[37,22,71,20],[37,24,71,22],[37,28,71,26],[37,29,71,27,"_platformConfig"],[38,6,72,4],[38,7,72,5],[39,4,73,2],[40,4,75,2,"start"],[40,9,75,7,"start"],[40,10,76,4,"fromValue"],[40,19,76,21],[40,21,77,4,"onUpdate"],[40,29,77,37],[40,31,78,4,"onEnd"],[40,36,78,23],[40,38,79,4,"previousAnimation"],[40,55,79,33],[40,57,80,4,"animatedValue"],[40,70,80,32],[40,72,81,10],[41,6,82,4],[41,10,82,8],[41,11,82,9,"__active"],[41,19,82,17],[41,22,82,20],[41,26,82,24],[42,6,83,4],[42,10,83,8],[42,11,83,9,"_lastValue"],[42,21,83,19],[42,24,83,22,"fromValue"],[42,33,83,31],[43,6,84,4],[43,10,84,8],[43,11,84,9,"_fromValue"],[43,21,84,19],[43,24,84,22,"fromValue"],[43,33,84,31],[44,6,85,4],[44,10,85,8],[44,11,85,9,"_onUpdate"],[44,20,85,18],[44,23,85,21,"onUpdate"],[44,31,85,29],[45,6,86,4],[45,10,86,8],[45,11,86,9,"__onEnd"],[45,18,86,16],[45,21,86,19,"onEnd"],[45,26,86,24],[46,6,87,4],[46,10,87,8],[46,11,87,9,"_startTime"],[46,21,87,19],[46,24,87,22,"Date"],[46,28,87,26],[46,29,87,27,"now"],[46,32,87,30],[46,33,87,31],[46,34,87,32],[47,6,89,4],[47,10,89,8],[47,11,89,9],[47,15,89,13],[47,16,89,14,"_useNativeDriver"],[47,32,89,30],[47,36,89,34,"animatedValue"],[47,49,89,47],[47,50,89,48,"__isNative"],[47,60,89,58],[47,65,89,63],[47,69,89,67],[47,71,89,69],[48,8,90,6],[48,14,90,12],[48,18,90,16,"Error"],[48,23,90,21],[48,24,91,8],[48,81,91,65],[48,84,92,10],[48,141,92,67],[48,144,93,10],[48,184,94,6],[48,185,94,7],[49,6,95,4],[50,6,97,4],[50,10,97,8],[50,14,97,12],[50,15,97,13,"_useNativeDriver"],[50,31,97,29],[50,33,97,31],[51,8,98,6],[51,12,98,10],[51,13,98,11,"__startNativeAnimation"],[51,35,98,33],[51,36,98,34,"animatedValue"],[51,49,98,47],[51,50,98,48],[52,6,99,4],[52,7,99,5],[52,13,99,11],[53,8,100,6],[54,8,101,6],[54,12,101,10],[54,13,101,11,"_animationFrame"],[54,28,101,26],[54,31,101,29,"requestAnimationFrame"],[54,52,101,50],[54,53,101,51],[54,57,101,55],[54,58,101,56,"onUpdate"],[54,66,101,64],[54,67,101,65,"bind"],[54,71,101,69],[54,72,101,70],[54,76,101,74],[54,77,101,75],[54,78,101,76],[55,6,102,4],[56,4,103,2],[57,4,105,2,"onUpdate"],[57,12,105,10,"onUpdate"],[57,13,105,10],[57,15,105,19],[58,6,106,4],[58,12,106,10,"now"],[58,15,106,13],[58,18,106,16,"Date"],[58,22,106,20],[58,23,106,21,"now"],[58,26,106,24],[58,27,106,25],[58,28,106,26],[59,6,108,4],[59,12,108,10,"value"],[59,17,108,15],[59,20,109,6],[59,24,109,10],[59,25,109,11,"_fromValue"],[59,35,109,21],[59,38,110,7],[59,42,110,11],[59,43,110,12,"_velocity"],[59,52,110,21],[59,56,110,25],[59,57,110,26],[59,60,110,29],[59,64,110,33],[59,65,110,34,"_deceleration"],[59,78,110,47],[59,79,110,48],[59,83,111,9],[59,84,111,10],[59,87,111,13,"Math"],[59,91,111,17],[59,92,111,18,"exp"],[59,95,111,21],[59,96,111,22],[59,98,111,24],[59,99,111,25],[59,102,111,28],[59,106,111,32],[59,107,111,33,"_deceleration"],[59,120,111,46],[59,121,111,47],[59,125,111,51,"now"],[59,128,111,54],[59,131,111,57],[59,135,111,61],[59,136,111,62,"_startTime"],[59,146,111,72],[59,147,111,73],[59,148,111,74],[59,149,111,75],[60,6,113,4],[60,10,113,8],[60,11,113,9,"_onUpdate"],[60,20,113,18],[60,21,113,19,"value"],[60,26,113,24],[60,27,113,25],[61,6,115,4],[61,10,115,8,"Math"],[61,14,115,12],[61,15,115,13,"abs"],[61,18,115,16],[61,19,115,17],[61,23,115,21],[61,24,115,22,"_lastValue"],[61,34,115,32],[61,37,115,35,"value"],[61,42,115,40],[61,43,115,41],[61,46,115,44],[61,49,115,47],[61,51,115,49],[62,8,116,6],[62,12,116,10],[62,13,116,11,"__debouncedOnEnd"],[62,29,116,27],[62,30,116,28],[63,10,116,29,"finished"],[63,18,116,37],[63,20,116,39],[64,8,116,43],[64,9,116,44],[64,10,116,45],[65,8,117,6],[66,6,118,4],[67,6,120,4],[67,10,120,8],[67,11,120,9,"_lastValue"],[67,21,120,19],[67,24,120,22,"value"],[67,29,120,27],[68,6,121,4],[68,10,121,8],[68,14,121,12],[68,15,121,13,"__active"],[68,23,121,21],[68,25,121,23],[69,8,122,6],[70,8,123,6],[70,12,123,10],[70,13,123,11,"_animationFrame"],[70,28,123,26],[70,31,123,29,"requestAnimationFrame"],[70,52,123,50],[70,53,123,51],[70,57,123,55],[70,58,123,56,"onUpdate"],[70,66,123,64],[70,67,123,65,"bind"],[70,71,123,69],[70,72,123,70],[70,76,123,74],[70,77,123,75],[70,78,123,76],[71,6,124,4],[72,4,125,2],[73,4,127,2,"stop"],[73,8,127,6,"stop"],[73,9,127,6],[73,11,127,15],[74,6,128,4],[74,11,128,9],[74,12,128,10,"stop"],[74,16,128,14],[74,17,128,15],[74,18,128,16],[75,6,129,4],[75,10,129,8],[75,11,129,9,"__active"],[75,19,129,17],[75,22,129,20],[75,27,129,25],[76,6,130,4,"global"],[76,12,130,10],[76,13,130,11,"cancelAnimationFrame"],[76,33,130,31],[76,34,130,32],[76,38,130,36],[76,39,130,37,"_animationFrame"],[76,54,130,52],[76,55,130,53],[77,6,131,4],[77,10,131,8],[77,11,131,9,"__debouncedOnEnd"],[77,27,131,25],[77,28,131,26],[78,8,131,27,"finished"],[78,16,131,35],[78,18,131,37],[79,6,131,42],[79,7,131,43],[79,8,131,44],[80,4,132,2],[81,2,133,0],[82,2,133,1,"exports"],[82,9,133,1],[82,10,133,1,"default"],[82,17,133,1],[82,20,133,1,"DecayAnimation"],[82,34,133,1],[83,0,133,1]],"functionMap":{"names":["<global>","DecayAnimation","constructor","__getNativeAnimationConfig","start","onUpdate","stop"],"mappings":"AAA;eCqC;ECW;GDQ;EEE;GFc;EGE;GH4B;EIE;GJoB;EKE;GLK;CDC"}},"type":"js/module"}]}