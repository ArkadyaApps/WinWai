{"dependencies":[{"name":"./gesture","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":15,"index":187},"end":{"line":8,"column":35,"index":207}}],"key":"UDLzvLUTPKPQreUSUZ++gAgg2pg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.ExclusiveGesture = exports.SimultaneousGesture = exports.ComposedGesture = void 0;\n  var _gesture = require(_dependencyMap[0], \"./gesture\");\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n    return obj;\n  }\n  function extendRelation(currentRelation, extendWith) {\n    if (currentRelation === undefined) {\n      return [...extendWith];\n    } else {\n      return [...currentRelation, ...extendWith];\n    }\n  }\n  class ComposedGesture extends _gesture.Gesture {\n    constructor(...gestures) {\n      super();\n      _defineProperty(this, \"gestures\", []);\n      _defineProperty(this, \"simultaneousGestures\", []);\n      _defineProperty(this, \"requireGesturesToFail\", []);\n      this.gestures = gestures;\n    }\n    prepareSingleGesture(gesture, simultaneousGestures, requireGesturesToFail) {\n      if (gesture instanceof _gesture.BaseGesture) {\n        const newConfig = {\n          ...gesture.config\n        };\n        newConfig.simultaneousWith = extendRelation(newConfig.simultaneousWith, simultaneousGestures);\n        newConfig.requireToFail = extendRelation(newConfig.requireToFail, requireGesturesToFail);\n        gesture.config = newConfig;\n      } else if (gesture instanceof ComposedGesture) {\n        gesture.simultaneousGestures = simultaneousGestures;\n        gesture.requireGesturesToFail = requireGesturesToFail;\n        gesture.prepare();\n      }\n    }\n    prepare() {\n      for (const gesture of this.gestures) {\n        this.prepareSingleGesture(gesture, this.simultaneousGestures, this.requireGesturesToFail);\n      }\n    }\n    initialize() {\n      for (const gesture of this.gestures) {\n        gesture.initialize();\n      }\n    }\n    toGestureArray() {\n      return this.gestures.flatMap(gesture => gesture.toGestureArray());\n    }\n  }\n  exports.ComposedGesture = ComposedGesture;\n  class SimultaneousGesture extends ComposedGesture {\n    prepare() {\n      // this piece of magic works something like this:\n      // for every gesture in the array\n      const simultaneousArrays = this.gestures.map(gesture =>\n      // we take the array it's in\n      this.gestures // and make a copy without it\n      .filter(x => x !== gesture) // then we flatmap the result to get list of raw (not composed) gestures\n      // this way we don't make the gestures simultaneous with themselves, which is\n      // important when the gesture is `ExclusiveGesture` - we don't want to make\n      // exclusive gestures simultaneous\n      .flatMap(x => x.toGestureArray()));\n      for (let i = 0; i < this.gestures.length; i++) {\n        this.prepareSingleGesture(this.gestures[i], simultaneousArrays[i], this.requireGesturesToFail);\n      }\n    }\n  }\n  exports.SimultaneousGesture = SimultaneousGesture;\n  class ExclusiveGesture extends ComposedGesture {\n    prepare() {\n      // transforms the array of gestures into array of grouped raw (not composed) gestures\n      // i.e. [gesture1, gesture2, ComposedGesture(gesture3, gesture4)] -> [[gesture1], [gesture2], [gesture3, gesture4]]\n      const gestureArrays = this.gestures.map(gesture => gesture.toGestureArray());\n      let requireToFail = [];\n      for (let i = 0; i < this.gestures.length; i++) {\n        this.prepareSingleGesture(this.gestures[i], this.simultaneousGestures, this.requireGesturesToFail.concat(requireToFail)); // every group gets to wait for all groups before it\n\n        requireToFail = requireToFail.concat(gestureArrays[i]);\n      }\n    }\n  }\n  exports.ExclusiveGesture = ExclusiveGesture;\n});","lineCount":98,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0,"Object"],[4,8,3,6],[4,9,3,7,"defineProperty"],[4,23,3,21],[4,24,3,22,"exports"],[4,31,3,29],[4,33,3,31],[4,45,3,43],[4,47,3,45],[5,4,4,2,"value"],[5,9,4,7],[5,11,4,9],[6,2,5,0],[6,3,5,1],[6,4,5,2],[7,2,6,0,"exports"],[7,9,6,7],[7,10,6,8,"ExclusiveGesture"],[7,26,6,24],[7,29,6,27,"exports"],[7,36,6,34],[7,37,6,35,"SimultaneousGesture"],[7,56,6,54],[7,59,6,57,"exports"],[7,66,6,64],[7,67,6,65,"ComposedGesture"],[7,82,6,80],[7,85,6,83],[7,90,6,88],[7,91,6,89],[8,2,8,0],[8,6,8,4,"_gesture"],[8,14,8,12],[8,17,8,15,"require"],[8,24,8,22],[8,25,8,22,"_dependencyMap"],[8,39,8,22],[8,55,8,34],[8,56,8,35],[9,2,10,0],[9,11,10,9,"_defineProperty"],[9,26,10,24,"_defineProperty"],[9,27,10,25,"obj"],[9,30,10,28],[9,32,10,30,"key"],[9,35,10,33],[9,37,10,35,"value"],[9,42,10,40],[9,44,10,42],[10,4,10,44],[10,8,10,48,"key"],[10,11,10,51],[10,15,10,55,"obj"],[10,18,10,58],[10,20,10,60],[11,6,10,62,"Object"],[11,12,10,68],[11,13,10,69,"defineProperty"],[11,27,10,83],[11,28,10,84,"obj"],[11,31,10,87],[11,33,10,89,"key"],[11,36,10,92],[11,38,10,94],[12,8,10,96,"value"],[12,13,10,101],[12,15,10,103,"value"],[12,20,10,108],[13,8,10,110,"enumerable"],[13,18,10,120],[13,20,10,122],[13,24,10,126],[14,8,10,128,"configurable"],[14,20,10,140],[14,22,10,142],[14,26,10,146],[15,8,10,148,"writable"],[15,16,10,156],[15,18,10,158],[16,6,10,163],[16,7,10,164],[16,8,10,165],[17,4,10,167],[17,5,10,168],[17,11,10,174],[18,6,10,176,"obj"],[18,9,10,179],[18,10,10,180,"key"],[18,13,10,183],[18,14,10,184],[18,17,10,187,"value"],[18,22,10,192],[19,4,10,194],[20,4,10,196],[20,11,10,203,"obj"],[20,14,10,206],[21,2,10,208],[22,2,12,0],[22,11,12,9,"extendRelation"],[22,25,12,23,"extendRelation"],[22,26,12,24,"currentRelation"],[22,41,12,39],[22,43,12,41,"extendWith"],[22,53,12,51],[22,55,12,53],[23,4,13,2],[23,8,13,6,"currentRelation"],[23,23,13,21],[23,28,13,26,"undefined"],[23,37,13,35],[23,39,13,37],[24,6,14,4],[24,13,14,11],[24,14,14,12],[24,17,14,15,"extendWith"],[24,27,14,25],[24,28,14,26],[25,4,15,2],[25,5,15,3],[25,11,15,9],[26,6,16,4],[26,13,16,11],[26,14,16,12],[26,17,16,15,"currentRelation"],[26,32,16,30],[26,34,16,32],[26,37,16,35,"extendWith"],[26,47,16,45],[26,48,16,46],[27,4,17,2],[28,2,18,0],[29,2,20,0],[29,8,20,6,"ComposedGesture"],[29,23,20,21],[29,32,20,30,"_gesture"],[29,40,20,38],[29,41,20,39,"Gesture"],[29,48,20,46],[29,49,20,47],[30,4,21,2,"constructor"],[30,15,21,13,"constructor"],[30,16,21,14],[30,19,21,17,"gestures"],[30,27,21,25],[30,29,21,27],[31,6,22,4],[31,11,22,9],[31,12,22,10],[31,13,22,11],[32,6,24,4,"_defineProperty"],[32,21,24,19],[32,22,24,20],[32,26,24,24],[32,28,24,26],[32,38,24,36],[32,40,24,38],[32,42,24,40],[32,43,24,41],[33,6,26,4,"_defineProperty"],[33,21,26,19],[33,22,26,20],[33,26,26,24],[33,28,26,26],[33,50,26,48],[33,52,26,50],[33,54,26,52],[33,55,26,53],[34,6,28,4,"_defineProperty"],[34,21,28,19],[34,22,28,20],[34,26,28,24],[34,28,28,26],[34,51,28,49],[34,53,28,51],[34,55,28,53],[34,56,28,54],[35,6,30,4],[35,10,30,8],[35,11,30,9,"gestures"],[35,19,30,17],[35,22,30,20,"gestures"],[35,30,30,28],[36,4,31,2],[37,4,33,2,"prepareSingleGesture"],[37,24,33,22,"prepareSingleGesture"],[37,25,33,23,"gesture"],[37,32,33,30],[37,34,33,32,"simultaneousGestures"],[37,54,33,52],[37,56,33,54,"requireGesturesToFail"],[37,77,33,75],[37,79,33,77],[38,6,34,4],[38,10,34,8,"gesture"],[38,17,34,15],[38,29,34,27,"_gesture"],[38,37,34,35],[38,38,34,36,"BaseGesture"],[38,49,34,47],[38,51,34,49],[39,8,35,6],[39,14,35,12,"newConfig"],[39,23,35,21],[39,26,35,24],[40,10,35,26],[40,13,35,29,"gesture"],[40,20,35,36],[40,21,35,37,"config"],[41,8,36,6],[41,9,36,7],[42,8,37,6,"newConfig"],[42,17,37,15],[42,18,37,16,"simultaneousWith"],[42,34,37,32],[42,37,37,35,"extendRelation"],[42,51,37,49],[42,52,37,50,"newConfig"],[42,61,37,59],[42,62,37,60,"simultaneousWith"],[42,78,37,76],[42,80,37,78,"simultaneousGestures"],[42,100,37,98],[42,101,37,99],[43,8,38,6,"newConfig"],[43,17,38,15],[43,18,38,16,"requireToFail"],[43,31,38,29],[43,34,38,32,"extendRelation"],[43,48,38,46],[43,49,38,47,"newConfig"],[43,58,38,56],[43,59,38,57,"requireToFail"],[43,72,38,70],[43,74,38,72,"requireGesturesToFail"],[43,95,38,93],[43,96,38,94],[44,8,39,6,"gesture"],[44,15,39,13],[44,16,39,14,"config"],[44,22,39,20],[44,25,39,23,"newConfig"],[44,34,39,32],[45,6,40,4],[45,7,40,5],[45,13,40,11],[45,17,40,15,"gesture"],[45,24,40,22],[45,36,40,34,"ComposedGesture"],[45,51,40,49],[45,53,40,51],[46,8,41,6,"gesture"],[46,15,41,13],[46,16,41,14,"simultaneousGestures"],[46,36,41,34],[46,39,41,37,"simultaneousGestures"],[46,59,41,57],[47,8,42,6,"gesture"],[47,15,42,13],[47,16,42,14,"requireGesturesToFail"],[47,37,42,35],[47,40,42,38,"requireGesturesToFail"],[47,61,42,59],[48,8,43,6,"gesture"],[48,15,43,13],[48,16,43,14,"prepare"],[48,23,43,21],[48,24,43,22],[48,25,43,23],[49,6,44,4],[50,4,45,2],[51,4,47,2,"prepare"],[51,11,47,9,"prepare"],[51,12,47,9],[51,14,47,12],[52,6,48,4],[52,11,48,9],[52,17,48,15,"gesture"],[52,24,48,22],[52,28,48,26],[52,32,48,30],[52,33,48,31,"gestures"],[52,41,48,39],[52,43,48,41],[53,8,49,6],[53,12,49,10],[53,13,49,11,"prepareSingleGesture"],[53,33,49,31],[53,34,49,32,"gesture"],[53,41,49,39],[53,43,49,41],[53,47,49,45],[53,48,49,46,"simultaneousGestures"],[53,68,49,66],[53,70,49,68],[53,74,49,72],[53,75,49,73,"requireGesturesToFail"],[53,96,49,94],[53,97,49,95],[54,6,50,4],[55,4,51,2],[56,4,53,2,"initialize"],[56,14,53,12,"initialize"],[56,15,53,12],[56,17,53,15],[57,6,54,4],[57,11,54,9],[57,17,54,15,"gesture"],[57,24,54,22],[57,28,54,26],[57,32,54,30],[57,33,54,31,"gestures"],[57,41,54,39],[57,43,54,41],[58,8,55,6,"gesture"],[58,15,55,13],[58,16,55,14,"initialize"],[58,26,55,24],[58,27,55,25],[58,28,55,26],[59,6,56,4],[60,4,57,2],[61,4,59,2,"toGestureArray"],[61,18,59,16,"toGestureArray"],[61,19,59,16],[61,21,59,19],[62,6,60,4],[62,13,60,11],[62,17,60,15],[62,18,60,16,"gestures"],[62,26,60,24],[62,27,60,25,"flatMap"],[62,34,60,32],[62,35,60,33,"gesture"],[62,42,60,40],[62,46,60,44,"gesture"],[62,53,60,51],[62,54,60,52,"toGestureArray"],[62,68,60,66],[62,69,60,67],[62,70,60,68],[62,71,60,69],[63,4,61,2],[64,2,63,0],[65,2,65,0,"exports"],[65,9,65,7],[65,10,65,8,"ComposedGesture"],[65,25,65,23],[65,28,65,26,"ComposedGesture"],[65,43,65,41],[66,2,67,0],[66,8,67,6,"SimultaneousGesture"],[66,27,67,25],[66,36,67,34,"ComposedGesture"],[66,51,67,49],[66,52,67,50],[67,4,68,2,"prepare"],[67,11,68,9,"prepare"],[67,12,68,9],[67,14,68,12],[68,6,69,4],[69,6,70,4],[70,6,71,4],[70,12,71,10,"simultaneousArrays"],[70,30,71,28],[70,33,71,31],[70,37,71,35],[70,38,71,36,"gestures"],[70,46,71,44],[70,47,71,45,"map"],[70,50,71,48],[70,51,71,49,"gesture"],[70,58,71,56],[71,6,71,60],[72,6,72,4],[72,10,72,8],[72,11,72,9,"gestures"],[72,19,72,17],[72,20,72,18],[73,6,72,18],[73,7,73,5,"filter"],[73,13,73,11],[73,14,73,12,"x"],[73,15,73,13],[73,19,73,17,"x"],[73,20,73,18],[73,25,73,23,"gesture"],[73,32,73,30],[73,33,73,31],[73,34,73,32],[74,6,74,4],[75,6,75,4],[76,6,76,4],[77,6,76,4],[77,7,77,5,"flatMap"],[77,14,77,12],[77,15,77,13,"x"],[77,16,77,14],[77,20,77,18,"x"],[77,21,77,19],[77,22,77,20,"toGestureArray"],[77,36,77,34],[77,37,77,35],[77,38,77,36],[77,39,77,37],[77,40,77,38],[78,6,79,4],[78,11,79,9],[78,15,79,13,"i"],[78,16,79,14],[78,19,79,17],[78,20,79,18],[78,22,79,20,"i"],[78,23,79,21],[78,26,79,24],[78,30,79,28],[78,31,79,29,"gestures"],[78,39,79,37],[78,40,79,38,"length"],[78,46,79,44],[78,48,79,46,"i"],[78,49,79,47],[78,51,79,49],[78,53,79,51],[79,8,80,6],[79,12,80,10],[79,13,80,11,"prepareSingleGesture"],[79,33,80,31],[79,34,80,32],[79,38,80,36],[79,39,80,37,"gestures"],[79,47,80,45],[79,48,80,46,"i"],[79,49,80,47],[79,50,80,48],[79,52,80,50,"simultaneousArrays"],[79,70,80,68],[79,71,80,69,"i"],[79,72,80,70],[79,73,80,71],[79,75,80,73],[79,79,80,77],[79,80,80,78,"requireGesturesToFail"],[79,101,80,99],[79,102,80,100],[80,6,81,4],[81,4,82,2],[82,2,84,0],[83,2,86,0,"exports"],[83,9,86,7],[83,10,86,8,"SimultaneousGesture"],[83,29,86,27],[83,32,86,30,"SimultaneousGesture"],[83,51,86,49],[84,2,88,0],[84,8,88,6,"ExclusiveGesture"],[84,24,88,22],[84,33,88,31,"ComposedGesture"],[84,48,88,46],[84,49,88,47],[85,4,89,2,"prepare"],[85,11,89,9,"prepare"],[85,12,89,9],[85,14,89,12],[86,6,90,4],[87,6,91,4],[88,6,92,4],[88,12,92,10,"gestureArrays"],[88,25,92,23],[88,28,92,26],[88,32,92,30],[88,33,92,31,"gestures"],[88,41,92,39],[88,42,92,40,"map"],[88,45,92,43],[88,46,92,44,"gesture"],[88,53,92,51],[88,57,92,55,"gesture"],[88,64,92,62],[88,65,92,63,"toGestureArray"],[88,79,92,77],[88,80,92,78],[88,81,92,79],[88,82,92,80],[89,6,93,4],[89,10,93,8,"requireToFail"],[89,23,93,21],[89,26,93,24],[89,28,93,26],[90,6,95,4],[90,11,95,9],[90,15,95,13,"i"],[90,16,95,14],[90,19,95,17],[90,20,95,18],[90,22,95,20,"i"],[90,23,95,21],[90,26,95,24],[90,30,95,28],[90,31,95,29,"gestures"],[90,39,95,37],[90,40,95,38,"length"],[90,46,95,44],[90,48,95,46,"i"],[90,49,95,47],[90,51,95,49],[90,53,95,51],[91,8,96,6],[91,12,96,10],[91,13,96,11,"prepareSingleGesture"],[91,33,96,31],[91,34,96,32],[91,38,96,36],[91,39,96,37,"gestures"],[91,47,96,45],[91,48,96,46,"i"],[91,49,96,47],[91,50,96,48],[91,52,96,50],[91,56,96,54],[91,57,96,55,"simultaneousGestures"],[91,77,96,75],[91,79,96,77],[91,83,96,81],[91,84,96,82,"requireGesturesToFail"],[91,105,96,103],[91,106,96,104,"concat"],[91,112,96,110],[91,113,96,111,"requireToFail"],[91,126,96,124],[91,127,96,125],[91,128,96,126],[91,129,96,127],[91,130,96,128],[93,8,98,6,"requireToFail"],[93,21,98,19],[93,24,98,22,"requireToFail"],[93,37,98,35],[93,38,98,36,"concat"],[93,44,98,42],[93,45,98,43,"gestureArrays"],[93,58,98,56],[93,59,98,57,"i"],[93,60,98,58],[93,61,98,59],[93,62,98,60],[94,6,99,4],[95,4,100,2],[96,2,102,0],[97,2,104,0,"exports"],[97,9,104,7],[97,10,104,8,"ExclusiveGesture"],[97,26,104,24],[97,29,104,27,"ExclusiveGesture"],[97,45,104,43],[98,0,104,44],[98,3]],"functionMap":{"names":["<global>","_defineProperty","extendRelation","ComposedGesture","ComposedGesture#constructor","ComposedGesture#prepareSingleGesture","ComposedGesture#prepare","ComposedGesture#initialize","ComposedGesture#toGestureArray","gestures.flatMap$argument_0","SimultaneousGesture","SimultaneousGesture#prepare","gestures.map$argument_0","gestures.filter$argument_0","gestures.filter.flatMap$argument_0","ExclusiveGesture","ExclusiveGesture#prepare"],"mappings":"AAA;ACS,iND;AEE;CFM;AGE;ECC;GDU;EEE;GFY;EGE;GHI;EIE;GJI;EKE;iCCC,mCD;GLC;CHE;AUI;ECC;iDCG;YCE,kBD;aEI,uBF,CD;GDK;CVE;AeI;ECC;4CJG,mCI;GDQ;CfE"},"hasCjsExports":true},"type":"js/module"}]}