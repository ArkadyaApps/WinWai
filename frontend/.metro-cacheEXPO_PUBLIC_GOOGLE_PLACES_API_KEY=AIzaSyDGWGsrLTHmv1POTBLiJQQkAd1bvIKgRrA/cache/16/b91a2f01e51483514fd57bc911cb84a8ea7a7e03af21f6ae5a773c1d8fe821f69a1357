{"dependencies":[{"name":"./gesture","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":211},"end":{"line":3,"column":49,"index":260}}],"key":"o5NgfUJQHKr9PBMfvlu69EXuwZE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"ComposedGesture\", {\n    enumerable: true,\n    get: function () {\n      return ComposedGesture;\n    }\n  });\n  Object.defineProperty(exports, \"SimultaneousGesture\", {\n    enumerable: true,\n    get: function () {\n      return SimultaneousGesture;\n    }\n  });\n  Object.defineProperty(exports, \"ExclusiveGesture\", {\n    enumerable: true,\n    get: function () {\n      return ExclusiveGesture;\n    }\n  });\n  var _gesture = require(_dependencyMap[0], \"./gesture\");\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n    return obj;\n  }\n  function extendRelation(currentRelation, extendWith) {\n    if (currentRelation === undefined) {\n      return [...extendWith];\n    } else {\n      return [...currentRelation, ...extendWith];\n    }\n  }\n  class ComposedGesture extends _gesture.Gesture {\n    constructor(...gestures) {\n      super();\n      _defineProperty(this, \"gestures\", []);\n      _defineProperty(this, \"simultaneousGestures\", []);\n      _defineProperty(this, \"requireGesturesToFail\", []);\n      this.gestures = gestures;\n    }\n    prepareSingleGesture(gesture, simultaneousGestures, requireGesturesToFail) {\n      if (gesture instanceof _gesture.BaseGesture) {\n        const newConfig = Object.assign({}, gesture.config);\n        newConfig.simultaneousWith = extendRelation(newConfig.simultaneousWith, simultaneousGestures);\n        newConfig.requireToFail = extendRelation(newConfig.requireToFail, requireGesturesToFail);\n        gesture.config = newConfig;\n      } else if (gesture instanceof ComposedGesture) {\n        gesture.simultaneousGestures = simultaneousGestures;\n        gesture.requireGesturesToFail = requireGesturesToFail;\n        gesture.prepare();\n      }\n    }\n    prepare() {\n      for (const gesture of this.gestures) {\n        this.prepareSingleGesture(gesture, this.simultaneousGestures, this.requireGesturesToFail);\n      }\n    }\n    initialize() {\n      for (const gesture of this.gestures) {\n        gesture.initialize();\n      }\n    }\n    toGestureArray() {\n      return this.gestures.flatMap(gesture => gesture.toGestureArray());\n    }\n  }\n  class SimultaneousGesture extends ComposedGesture {\n    prepare() {\n      // this piece of magic works something like this:\n      // for every gesture in the array\n      const simultaneousArrays = this.gestures.map(gesture =>\n      // we take the array it's in\n      this.gestures // and make a copy without it\n      .filter(x => x !== gesture) // then we flatmap the result to get list of raw (not composed) gestures\n      // this way we don't make the gestures simultaneous with themselves, which is\n      // important when the gesture is `ExclusiveGesture` - we don't want to make\n      // exclusive gestures simultaneous\n      .flatMap(x => x.toGestureArray()));\n      for (let i = 0; i < this.gestures.length; i++) {\n        this.prepareSingleGesture(this.gestures[i], simultaneousArrays[i], this.requireGesturesToFail);\n      }\n    }\n  }\n  class ExclusiveGesture extends ComposedGesture {\n    prepare() {\n      // transforms the array of gestures into array of grouped raw (not composed) gestures\n      // i.e. [gesture1, gesture2, ComposedGesture(gesture3, gesture4)] -> [[gesture1], [gesture2], [gesture3, gesture4]]\n      const gestureArrays = this.gestures.map(gesture => gesture.toGestureArray());\n      let requireToFail = [];\n      for (let i = 0; i < this.gestures.length; i++) {\n        this.prepareSingleGesture(this.gestures[i], this.simultaneousGestures, this.requireGesturesToFail.concat(requireToFail)); // every group gets to wait for all groups before it\n\n        requireToFail = requireToFail.concat(gestureArrays[i]);\n      }\n    }\n  }\n});","lineCount":110,"map":[[7,2,13,0,"Object"],[7,8,13,0],[7,9,13,0,"defineProperty"],[7,23,13,0],[7,24,13,0,"exports"],[7,31,13,0],[8,4,13,0,"enumerable"],[8,14,13,0],[9,4,13,0,"get"],[9,7,13,0],[9,18,13,0,"get"],[9,19,13,0],[10,6,13,0],[10,13,13,0,"ComposedGesture"],[10,28,13,0],[11,4,13,0],[12,2,13,0],[13,2,57,0,"Object"],[13,8,57,0],[13,9,57,0,"defineProperty"],[13,23,57,0],[13,24,57,0,"exports"],[13,31,57,0],[14,4,57,0,"enumerable"],[14,14,57,0],[15,4,57,0,"get"],[15,7,57,0],[15,18,57,0,"get"],[15,19,57,0],[16,6,57,0],[16,13,57,0,"SimultaneousGesture"],[16,32,57,0],[17,4,57,0],[18,2,57,0],[19,2,75,0,"Object"],[19,8,75,0],[19,9,75,0,"defineProperty"],[19,23,75,0],[19,24,75,0,"exports"],[19,31,75,0],[20,4,75,0,"enumerable"],[20,14,75,0],[21,4,75,0,"get"],[21,7,75,0],[21,18,75,0,"get"],[21,19,75,0],[22,6,75,0],[22,13,75,0,"ExclusiveGesture"],[22,29,75,0],[23,4,75,0],[24,2,75,0],[25,2,3,0],[25,6,3,0,"_gesture"],[25,14,3,0],[25,17,3,0,"require"],[25,24,3,0],[25,25,3,0,"_dependencyMap"],[25,39,3,0],[26,2,1,0],[26,11,1,9,"_defineProperty"],[26,26,1,24,"_defineProperty"],[26,27,1,25,"obj"],[26,30,1,28],[26,32,1,30,"key"],[26,35,1,33],[26,37,1,35,"value"],[26,42,1,40],[26,44,1,42],[27,4,1,44],[27,8,1,48,"key"],[27,11,1,51],[27,15,1,55,"obj"],[27,18,1,58],[27,20,1,60],[28,6,1,62,"Object"],[28,12,1,68],[28,13,1,69,"defineProperty"],[28,27,1,83],[28,28,1,84,"obj"],[28,31,1,87],[28,33,1,89,"key"],[28,36,1,92],[28,38,1,94],[29,8,1,96,"value"],[29,13,1,101],[29,15,1,103,"value"],[29,20,1,108],[30,8,1,110,"enumerable"],[30,18,1,120],[30,20,1,122],[30,24,1,126],[31,8,1,128,"configurable"],[31,20,1,140],[31,22,1,142],[31,26,1,146],[32,8,1,148,"writable"],[32,16,1,156],[32,18,1,158],[33,6,1,163],[33,7,1,164],[33,8,1,165],[34,4,1,167],[34,5,1,168],[34,11,1,174],[35,6,1,176,"obj"],[35,9,1,179],[35,10,1,180,"key"],[35,13,1,183],[35,14,1,184],[35,17,1,187,"value"],[35,22,1,192],[36,4,1,194],[37,4,1,196],[37,11,1,203,"obj"],[37,14,1,206],[38,2,1,208],[39,2,5,0],[39,11,5,9,"extendRelation"],[39,25,5,23,"extendRelation"],[39,26,5,24,"currentRelation"],[39,41,5,39],[39,43,5,41,"extendWith"],[39,53,5,51],[39,55,5,53],[40,4,6,2],[40,8,6,6,"currentRelation"],[40,23,6,21],[40,28,6,26,"undefined"],[40,37,6,35],[40,39,6,37],[41,6,7,4],[41,13,7,11],[41,14,7,12],[41,17,7,15,"extendWith"],[41,27,7,25],[41,28,7,26],[42,4,8,2],[42,5,8,3],[42,11,8,9],[43,6,9,4],[43,13,9,11],[43,14,9,12],[43,17,9,15,"currentRelation"],[43,32,9,30],[43,34,9,32],[43,37,9,35,"extendWith"],[43,47,9,45],[43,48,9,46],[44,4,10,2],[45,2,11,0],[46,2,13,7],[46,8,13,13,"ComposedGesture"],[46,23,13,28],[46,32,13,37,"Gesture"],[46,40,13,44],[46,41,13,44,"Gesture"],[46,48,13,44],[46,49,13,45],[47,4,14,2,"constructor"],[47,15,14,13,"constructor"],[47,16,14,14],[47,19,14,17,"gestures"],[47,27,14,25],[47,29,14,27],[48,6,15,4],[48,11,15,9],[48,12,15,10],[48,13,15,11],[49,6,17,4,"_defineProperty"],[49,21,17,19],[49,22,17,20],[49,26,17,24],[49,28,17,26],[49,38,17,36],[49,40,17,38],[49,42,17,40],[49,43,17,41],[50,6,19,4,"_defineProperty"],[50,21,19,19],[50,22,19,20],[50,26,19,24],[50,28,19,26],[50,50,19,48],[50,52,19,50],[50,54,19,52],[50,55,19,53],[51,6,21,4,"_defineProperty"],[51,21,21,19],[51,22,21,20],[51,26,21,24],[51,28,21,26],[51,51,21,49],[51,53,21,51],[51,55,21,53],[51,56,21,54],[52,6,23,4],[52,10,23,8],[52,11,23,9,"gestures"],[52,19,23,17],[52,22,23,20,"gestures"],[52,30,23,28],[53,4,24,2],[54,4,26,2,"prepareSingleGesture"],[54,24,26,22,"prepareSingleGesture"],[54,25,26,23,"gesture"],[54,32,26,30],[54,34,26,32,"simultaneousGestures"],[54,54,26,52],[54,56,26,54,"requireGesturesToFail"],[54,77,26,75],[54,79,26,77],[55,6,27,4],[55,10,27,8,"gesture"],[55,17,27,15],[55,29,27,27,"BaseGesture"],[55,37,27,38],[55,38,27,38,"BaseGesture"],[55,49,27,38],[55,51,27,40],[56,8,28,6],[56,14,28,12,"newConfig"],[56,23,28,21],[56,26,28,21,"Object"],[56,32,28,21],[56,33,28,21,"assign"],[56,39,28,21],[56,44,28,29,"gesture"],[56,51,28,36],[56,52,28,37,"config"],[56,58,28,43],[56,59,29,7],[57,8,30,6,"newConfig"],[57,17,30,15],[57,18,30,16,"simultaneousWith"],[57,34,30,32],[57,37,30,35,"extendRelation"],[57,51,30,49],[57,52,30,50,"newConfig"],[57,61,30,59],[57,62,30,60,"simultaneousWith"],[57,78,30,76],[57,80,30,78,"simultaneousGestures"],[57,100,30,98],[57,101,30,99],[58,8,31,6,"newConfig"],[58,17,31,15],[58,18,31,16,"requireToFail"],[58,31,31,29],[58,34,31,32,"extendRelation"],[58,48,31,46],[58,49,31,47,"newConfig"],[58,58,31,56],[58,59,31,57,"requireToFail"],[58,72,31,70],[58,74,31,72,"requireGesturesToFail"],[58,95,31,93],[58,96,31,94],[59,8,32,6,"gesture"],[59,15,32,13],[59,16,32,14,"config"],[59,22,32,20],[59,25,32,23,"newConfig"],[59,34,32,32],[60,6,33,4],[60,7,33,5],[60,13,33,11],[60,17,33,15,"gesture"],[60,24,33,22],[60,36,33,34,"ComposedGesture"],[60,51,33,49],[60,53,33,51],[61,8,34,6,"gesture"],[61,15,34,13],[61,16,34,14,"simultaneousGestures"],[61,36,34,34],[61,39,34,37,"simultaneousGestures"],[61,59,34,57],[62,8,35,6,"gesture"],[62,15,35,13],[62,16,35,14,"requireGesturesToFail"],[62,37,35,35],[62,40,35,38,"requireGesturesToFail"],[62,61,35,59],[63,8,36,6,"gesture"],[63,15,36,13],[63,16,36,14,"prepare"],[63,23,36,21],[63,24,36,22],[63,25,36,23],[64,6,37,4],[65,4,38,2],[66,4,40,2,"prepare"],[66,11,40,9,"prepare"],[66,12,40,9],[66,14,40,12],[67,6,41,4],[67,11,41,9],[67,17,41,15,"gesture"],[67,24,41,22],[67,28,41,26],[67,32,41,30],[67,33,41,31,"gestures"],[67,41,41,39],[67,43,41,41],[68,8,42,6],[68,12,42,10],[68,13,42,11,"prepareSingleGesture"],[68,33,42,31],[68,34,42,32,"gesture"],[68,41,42,39],[68,43,42,41],[68,47,42,45],[68,48,42,46,"simultaneousGestures"],[68,68,42,66],[68,70,42,68],[68,74,42,72],[68,75,42,73,"requireGesturesToFail"],[68,96,42,94],[68,97,42,95],[69,6,43,4],[70,4,44,2],[71,4,46,2,"initialize"],[71,14,46,12,"initialize"],[71,15,46,12],[71,17,46,15],[72,6,47,4],[72,11,47,9],[72,17,47,15,"gesture"],[72,24,47,22],[72,28,47,26],[72,32,47,30],[72,33,47,31,"gestures"],[72,41,47,39],[72,43,47,41],[73,8,48,6,"gesture"],[73,15,48,13],[73,16,48,14,"initialize"],[73,26,48,24],[73,27,48,25],[73,28,48,26],[74,6,49,4],[75,4,50,2],[76,4,52,2,"toGestureArray"],[76,18,52,16,"toGestureArray"],[76,19,52,16],[76,21,52,19],[77,6,53,4],[77,13,53,11],[77,17,53,15],[77,18,53,16,"gestures"],[77,26,53,24],[77,27,53,25,"flatMap"],[77,34,53,32],[77,35,53,33,"gesture"],[77,42,53,40],[77,46,53,44,"gesture"],[77,53,53,51],[77,54,53,52,"toGestureArray"],[77,68,53,66],[77,69,53,67],[77,70,53,68],[77,71,53,69],[78,4,54,2],[79,2,56,0],[80,2,57,7],[80,8,57,13,"SimultaneousGesture"],[80,27,57,32],[80,36,57,41,"ComposedGesture"],[80,51,57,56],[80,52,57,57],[81,4,58,2,"prepare"],[81,11,58,9,"prepare"],[81,12,58,9],[81,14,58,12],[82,6,59,4],[83,6,60,4],[84,6,61,4],[84,12,61,10,"simultaneousArrays"],[84,30,61,28],[84,33,61,31],[84,37,61,35],[84,38,61,36,"gestures"],[84,46,61,44],[84,47,61,45,"map"],[84,50,61,48],[84,51,61,49,"gesture"],[84,58,61,56],[85,6,61,60],[86,6,62,4],[86,10,62,8],[86,11,62,9,"gestures"],[86,19,62,17],[86,20,62,18],[87,6,62,18],[87,7,63,5,"filter"],[87,13,63,11],[87,14,63,12,"x"],[87,15,63,13],[87,19,63,17,"x"],[87,20,63,18],[87,25,63,23,"gesture"],[87,32,63,30],[87,33,63,31],[87,34,63,32],[88,6,64,4],[89,6,65,4],[90,6,66,4],[91,6,66,4],[91,7,67,5,"flatMap"],[91,14,67,12],[91,15,67,13,"x"],[91,16,67,14],[91,20,67,18,"x"],[91,21,67,19],[91,22,67,20,"toGestureArray"],[91,36,67,34],[91,37,67,35],[91,38,67,36],[91,39,67,37],[91,40,67,38],[92,6,69,4],[92,11,69,9],[92,15,69,13,"i"],[92,16,69,14],[92,19,69,17],[92,20,69,18],[92,22,69,20,"i"],[92,23,69,21],[92,26,69,24],[92,30,69,28],[92,31,69,29,"gestures"],[92,39,69,37],[92,40,69,38,"length"],[92,46,69,44],[92,48,69,46,"i"],[92,49,69,47],[92,51,69,49],[92,53,69,51],[93,8,70,6],[93,12,70,10],[93,13,70,11,"prepareSingleGesture"],[93,33,70,31],[93,34,70,32],[93,38,70,36],[93,39,70,37,"gestures"],[93,47,70,45],[93,48,70,46,"i"],[93,49,70,47],[93,50,70,48],[93,52,70,50,"simultaneousArrays"],[93,70,70,68],[93,71,70,69,"i"],[93,72,70,70],[93,73,70,71],[93,75,70,73],[93,79,70,77],[93,80,70,78,"requireGesturesToFail"],[93,101,70,99],[93,102,70,100],[94,6,71,4],[95,4,72,2],[96,2,74,0],[97,2,75,7],[97,8,75,13,"ExclusiveGesture"],[97,24,75,29],[97,33,75,38,"ComposedGesture"],[97,48,75,53],[97,49,75,54],[98,4,76,2,"prepare"],[98,11,76,9,"prepare"],[98,12,76,9],[98,14,76,12],[99,6,77,4],[100,6,78,4],[101,6,79,4],[101,12,79,10,"gestureArrays"],[101,25,79,23],[101,28,79,26],[101,32,79,30],[101,33,79,31,"gestures"],[101,41,79,39],[101,42,79,40,"map"],[101,45,79,43],[101,46,79,44,"gesture"],[101,53,79,51],[101,57,79,55,"gesture"],[101,64,79,62],[101,65,79,63,"toGestureArray"],[101,79,79,77],[101,80,79,78],[101,81,79,79],[101,82,79,80],[102,6,80,4],[102,10,80,8,"requireToFail"],[102,23,80,21],[102,26,80,24],[102,28,80,26],[103,6,82,4],[103,11,82,9],[103,15,82,13,"i"],[103,16,82,14],[103,19,82,17],[103,20,82,18],[103,22,82,20,"i"],[103,23,82,21],[103,26,82,24],[103,30,82,28],[103,31,82,29,"gestures"],[103,39,82,37],[103,40,82,38,"length"],[103,46,82,44],[103,48,82,46,"i"],[103,49,82,47],[103,51,82,49],[103,53,82,51],[104,8,83,6],[104,12,83,10],[104,13,83,11,"prepareSingleGesture"],[104,33,83,31],[104,34,83,32],[104,38,83,36],[104,39,83,37,"gestures"],[104,47,83,45],[104,48,83,46,"i"],[104,49,83,47],[104,50,83,48],[104,52,83,50],[104,56,83,54],[104,57,83,55,"simultaneousGestures"],[104,77,83,75],[104,79,83,77],[104,83,83,81],[104,84,83,82,"requireGesturesToFail"],[104,105,83,103],[104,106,83,104,"concat"],[104,112,83,110],[104,113,83,111,"requireToFail"],[104,126,83,124],[104,127,83,125],[104,128,83,126],[104,129,83,127],[104,130,83,128],[106,8,85,6,"requireToFail"],[106,21,85,19],[106,24,85,22,"requireToFail"],[106,37,85,35],[106,38,85,36,"concat"],[106,44,85,42],[106,45,85,43,"gestureArrays"],[106,58,85,56],[106,59,85,57,"i"],[106,60,85,58],[106,61,85,59],[106,62,85,60],[107,6,86,4],[108,4,87,2],[109,2,89,0],[110,0,89,1],[110,3]],"functionMap":{"names":["_defineProperty","<global>","extendRelation","ComposedGesture","ComposedGesture#constructor","ComposedGesture#prepareSingleGesture","ComposedGesture#prepare","ComposedGesture#initialize","ComposedGesture#toGestureArray","gestures.flatMap$argument_0","SimultaneousGesture","SimultaneousGesture#prepare","gestures.map$argument_0","gestures.filter$argument_0","gestures.filter.flatMap$argument_0","ExclusiveGesture","ExclusiveGesture#prepare"],"mappings":"AAA,iNC;ACI;CDM;OEE;ECC;GDU;EEE;GFY;EGE;GHI;EIE;GJI;EKE;iCCC,mCD;GLC;CFE;OSC;ECC;iDCG;YCE,kBD;aEI,uBF,CD;GDK;CTE;OcC;ECC;4CJG,mCI;GDQ;CdE"},"hasCjsExports":false},"type":"js/module"}]}