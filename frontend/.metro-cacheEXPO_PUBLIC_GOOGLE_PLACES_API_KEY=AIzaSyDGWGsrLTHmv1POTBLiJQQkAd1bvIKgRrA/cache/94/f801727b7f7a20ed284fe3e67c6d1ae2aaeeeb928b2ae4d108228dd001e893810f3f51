{"dependencies":[{"name":"../Network/XMLHttpRequest","data":{"asyncType":null,"locs":[{"start":{"line":15,"column":23,"index":316},"end":{"line":15,"column":59,"index":352}}],"key":"D0lOLfihcfajViapak9M31abaKs="}},{"name":"./InspectorAgent","data":{"asyncType":null,"locs":[{"start":{"line":16,"column":23,"index":377},"end":{"line":16,"column":50,"index":404}}],"key":"pnvrHlVJjk6GCrrWL5NCe6Ncw0o="}},{"name":"./JSInspector","data":{"asyncType":null,"locs":[{"start":{"line":17,"column":20,"index":426},"end":{"line":17,"column":44,"index":450}}],"key":"ecIS7Agx12w1anrl/pT4M2Z3Rks="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  /**\n   * Copyright (c) Meta Platforms, Inc. and affiliates.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   *\n   * @format\n   * \n   */\n\n  'use strict';\n\n  const XMLHttpRequest = require(_dependencyMap[0], \"../Network/XMLHttpRequest\");\n  const InspectorAgent = require(_dependencyMap[1], \"./InspectorAgent\");\n  const JSInspector = require(_dependencyMap[2], \"./JSInspector\");\n\n  // We don't currently care about this\n\n  class Interceptor {\n    constructor(agent) {\n      this._agent = agent;\n      this._requests = new Map();\n    }\n    getData(requestId) {\n      return this._requests.get(requestId);\n    }\n    requestSent(id, url, method, headers) {\n      const requestId = String(id);\n      this._requests.set(requestId, '');\n      const request = {\n        url,\n        method,\n        headers,\n        initialPriority: 'Medium'\n      };\n      const event = {\n        requestId,\n        documentURL: '',\n        frameId: '1',\n        loaderId: '1',\n        request,\n        timestamp: JSInspector.getTimestamp(),\n        initiator: {\n          // TODO(blom): Get stack trace\n          // If type is 'script' the inspector will try to execute\n          // `stack.callFrames[0]`\n          type: 'other'\n        },\n        type: 'Other'\n      };\n      this._agent.sendEvent('requestWillBeSent', event);\n    }\n    responseReceived(id, url, status, headers) {\n      const requestId = String(id);\n      const response = {\n        url,\n        status,\n        statusText: String(status),\n        headers,\n        // TODO(blom) refined headers, can we get this?\n        requestHeaders: {},\n        mimeType: this._getMimeType(headers),\n        connectionReused: false,\n        connectionId: -1,\n        encodedDataLength: 0,\n        securityState: 'unknown'\n      };\n      const event = {\n        requestId,\n        frameId: '1',\n        loaderId: '1',\n        timestamp: JSInspector.getTimestamp(),\n        type: 'Other',\n        response\n      };\n      this._agent.sendEvent('responseReceived', event);\n    }\n    dataReceived(id, data) {\n      const requestId = String(id);\n      const existingData = this._requests.get(requestId) || '';\n      this._requests.set(requestId, existingData.concat(data));\n      const event = {\n        requestId,\n        timestamp: JSInspector.getTimestamp(),\n        dataLength: data.length,\n        encodedDataLength: data.length\n      };\n      this._agent.sendEvent('dataReceived', event);\n    }\n    loadingFinished(id, encodedDataLength) {\n      const event = {\n        requestId: String(id),\n        timestamp: JSInspector.getTimestamp(),\n        encodedDataLength: encodedDataLength\n      };\n      this._agent.sendEvent('loadingFinished', event);\n    }\n    loadingFailed(id, error) {\n      const event = {\n        requestId: String(id),\n        timestamp: JSInspector.getTimestamp(),\n        type: 'Other',\n        errorText: error\n      };\n      this._agent.sendEvent('loadingFailed', event);\n    }\n    _getMimeType(headers) {\n      const contentType = headers['Content-Type'] || '';\n      return contentType.split(';')[0];\n    }\n  }\n  class NetworkAgent extends InspectorAgent {\n    static DOMAIN = 'Network';\n    enable({\n      maxResourceBufferSize,\n      maxTotalBufferSize\n    }) {\n      this._interceptor = new Interceptor(this);\n      XMLHttpRequest.setInterceptor(this._interceptor);\n    }\n    disable() {\n      XMLHttpRequest.setInterceptor(null);\n      this._interceptor = null;\n    }\n    getResponseBody({\n      requestId\n    }) {\n      return {\n        body: this.interceptor().getData(requestId),\n        base64Encoded: false\n      };\n    }\n    interceptor() {\n      if (this._interceptor) {\n        return this._interceptor;\n      } else {\n        throw Error('_interceptor can not be null');\n      }\n    }\n  }\n  module.exports = NetworkAgent;\n});","lineCount":143,"map":[[2,2,1,0],[3,0,2,0],[4,0,3,0],[5,0,4,0],[6,0,5,0],[7,0,6,0],[8,0,7,0],[9,0,8,0],[10,0,9,0],[12,2,11,0],[12,14,11,12],[14,2,15,0],[14,8,15,6,"XMLHttpRequest"],[14,22,15,20],[14,25,15,23,"require"],[14,32,15,30],[14,33,15,30,"_dependencyMap"],[14,47,15,30],[14,79,15,58],[14,80,15,59],[15,2,16,0],[15,8,16,6,"InspectorAgent"],[15,22,16,20],[15,25,16,23,"require"],[15,32,16,30],[15,33,16,30,"_dependencyMap"],[15,47,16,30],[15,70,16,49],[15,71,16,50],[16,2,17,0],[16,8,17,6,"JSInspector"],[16,19,17,17],[16,22,17,20,"require"],[16,29,17,27],[16,30,17,27,"_dependencyMap"],[16,44,17,27],[16,64,17,43],[16,65,17,44],[18,2,27,0],[20,2,150,0],[20,8,150,6,"Interceptor"],[20,19,150,17],[20,20,150,18],[21,4,154,2,"constructor"],[21,15,154,13,"constructor"],[21,16,154,14,"agent"],[21,21,154,33],[21,23,154,35],[22,6,155,4],[22,10,155,8],[22,11,155,9,"_agent"],[22,17,155,15],[22,20,155,18,"agent"],[22,25,155,23],[23,6,156,4],[23,10,156,8],[23,11,156,9,"_requests"],[23,20,156,18],[23,23,156,21],[23,27,156,25,"Map"],[23,30,156,28],[23,31,156,29],[23,32,156,30],[24,4,157,2],[25,4,159,2,"getData"],[25,11,159,9,"getData"],[25,12,159,10,"requestId"],[25,21,159,27],[25,23,159,38],[26,6,160,4],[26,13,160,11],[26,17,160,15],[26,18,160,16,"_requests"],[26,27,160,25],[26,28,160,26,"get"],[26,31,160,29],[26,32,160,30,"requestId"],[26,41,160,39],[26,42,160,40],[27,4,161,2],[28,4,163,2,"requestSent"],[28,15,163,13,"requestSent"],[28,16,163,14,"id"],[28,18,163,24],[28,20,163,26,"url"],[28,23,163,37],[28,25,163,39,"method"],[28,31,163,53],[28,33,163,55,"headers"],[28,40,163,71],[28,42,163,73],[29,6,164,4],[29,12,164,10,"requestId"],[29,21,164,19],[29,24,164,22,"String"],[29,30,164,28],[29,31,164,29,"id"],[29,33,164,31],[29,34,164,32],[30,6,165,4],[30,10,165,8],[30,11,165,9,"_requests"],[30,20,165,18],[30,21,165,19,"set"],[30,24,165,22],[30,25,165,23,"requestId"],[30,34,165,32],[30,36,165,34],[30,38,165,36],[30,39,165,37],[31,6,167,4],[31,12,167,10,"request"],[31,19,167,26],[31,22,167,29],[32,8,168,6,"url"],[32,11,168,9],[33,8,169,6,"method"],[33,14,169,12],[34,8,170,6,"headers"],[34,15,170,13],[35,8,171,6,"initialPriority"],[35,23,171,21],[35,25,171,23],[36,6,172,4],[36,7,172,5],[37,6,173,4],[37,12,173,10,"event"],[37,17,173,39],[37,20,173,42],[38,8,174,6,"requestId"],[38,17,174,15],[39,8,175,6,"documentURL"],[39,19,175,17],[39,21,175,19],[39,23,175,21],[40,8,176,6,"frameId"],[40,15,176,13],[40,17,176,15],[40,20,176,18],[41,8,177,6,"loaderId"],[41,16,177,14],[41,18,177,16],[41,21,177,19],[42,8,178,6,"request"],[42,15,178,13],[43,8,179,6,"timestamp"],[43,17,179,15],[43,19,179,17,"JSInspector"],[43,30,179,28],[43,31,179,29,"getTimestamp"],[43,43,179,41],[43,44,179,42],[43,45,179,43],[44,8,180,6,"initiator"],[44,17,180,15],[44,19,180,17],[45,10,181,8],[46,10,182,8],[47,10,183,8],[48,10,184,8,"type"],[48,14,184,12],[48,16,184,14],[49,8,185,6],[49,9,185,7],[50,8,186,6,"type"],[50,12,186,10],[50,14,186,12],[51,6,187,4],[51,7,187,5],[52,6,188,4],[52,10,188,8],[52,11,188,9,"_agent"],[52,17,188,15],[52,18,188,16,"sendEvent"],[52,27,188,25],[52,28,188,26],[52,47,188,45],[52,49,188,47,"event"],[52,54,188,52],[52,55,188,53],[53,4,189,2],[54,4,191,2,"responseReceived"],[54,20,191,18,"responseReceived"],[54,21,191,19,"id"],[54,23,191,29],[54,25,191,31,"url"],[54,28,191,42],[54,30,191,44,"status"],[54,36,191,58],[54,38,191,60,"headers"],[54,45,191,76],[54,47,191,78],[55,6,192,4],[55,12,192,10,"requestId"],[55,21,192,19],[55,24,192,22,"String"],[55,30,192,28],[55,31,192,29,"id"],[55,33,192,31],[55,34,192,32],[56,6,193,4],[56,12,193,10,"response"],[56,20,193,28],[56,23,193,31],[57,8,194,6,"url"],[57,11,194,9],[58,8,195,6,"status"],[58,14,195,12],[59,8,196,6,"statusText"],[59,18,196,16],[59,20,196,18,"String"],[59,26,196,24],[59,27,196,25,"status"],[59,33,196,31],[59,34,196,32],[60,8,197,6,"headers"],[60,15,197,13],[61,8,198,6],[62,8,199,6,"requestHeaders"],[62,22,199,20],[62,24,199,22],[62,25,199,23],[62,26,199,24],[63,8,200,6,"mimeType"],[63,16,200,14],[63,18,200,16],[63,22,200,20],[63,23,200,21,"_getMimeType"],[63,35,200,33],[63,36,200,34,"headers"],[63,43,200,41],[63,44,200,42],[64,8,201,6,"connectionReused"],[64,24,201,22],[64,26,201,24],[64,31,201,29],[65,8,202,6,"connectionId"],[65,20,202,18],[65,22,202,20],[65,23,202,21],[65,24,202,22],[66,8,203,6,"encodedDataLength"],[66,25,203,23],[66,27,203,25],[66,28,203,26],[67,8,204,6,"securityState"],[67,21,204,19],[67,23,204,21],[68,6,205,4],[68,7,205,5],[69,6,207,4],[69,12,207,10,"event"],[69,17,207,38],[69,20,207,41],[70,8,208,6,"requestId"],[70,17,208,15],[71,8,209,6,"frameId"],[71,15,209,13],[71,17,209,15],[71,20,209,18],[72,8,210,6,"loaderId"],[72,16,210,14],[72,18,210,16],[72,21,210,19],[73,8,211,6,"timestamp"],[73,17,211,15],[73,19,211,17,"JSInspector"],[73,30,211,28],[73,31,211,29,"getTimestamp"],[73,43,211,41],[73,44,211,42],[73,45,211,43],[74,8,212,6,"type"],[74,12,212,10],[74,14,212,12],[74,21,212,19],[75,8,213,6,"response"],[76,6,214,4],[76,7,214,5],[77,6,215,4],[77,10,215,8],[77,11,215,9,"_agent"],[77,17,215,15],[77,18,215,16,"sendEvent"],[77,27,215,25],[77,28,215,26],[77,46,215,44],[77,48,215,46,"event"],[77,53,215,51],[77,54,215,52],[78,4,216,2],[79,4,218,2,"dataReceived"],[79,16,218,14,"dataReceived"],[79,17,218,15,"id"],[79,19,218,25],[79,21,218,27,"data"],[79,25,218,39],[79,27,218,41],[80,6,219,4],[80,12,219,10,"requestId"],[80,21,219,19],[80,24,219,22,"String"],[80,30,219,28],[80,31,219,29,"id"],[80,33,219,31],[80,34,219,32],[81,6,220,4],[81,12,220,10,"existingData"],[81,24,220,22],[81,27,220,25],[81,31,220,29],[81,32,220,30,"_requests"],[81,41,220,39],[81,42,220,40,"get"],[81,45,220,43],[81,46,220,44,"requestId"],[81,55,220,53],[81,56,220,54],[81,60,220,58],[81,62,220,60],[82,6,221,4],[82,10,221,8],[82,11,221,9,"_requests"],[82,20,221,18],[82,21,221,19,"set"],[82,24,221,22],[82,25,221,23,"requestId"],[82,34,221,32],[82,36,221,34,"existingData"],[82,48,221,46],[82,49,221,47,"concat"],[82,55,221,53],[82,56,221,54,"data"],[82,60,221,58],[82,61,221,59],[82,62,221,60],[83,6,222,4],[83,12,222,10,"event"],[83,17,222,29],[83,20,222,32],[84,8,223,6,"requestId"],[84,17,223,15],[85,8,224,6,"timestamp"],[85,17,224,15],[85,19,224,17,"JSInspector"],[85,30,224,28],[85,31,224,29,"getTimestamp"],[85,43,224,41],[85,44,224,42],[85,45,224,43],[86,8,225,6,"dataLength"],[86,18,225,16],[86,20,225,18,"data"],[86,24,225,22],[86,25,225,23,"length"],[86,31,225,29],[87,8,226,6,"encodedDataLength"],[87,25,226,23],[87,27,226,25,"data"],[87,31,226,29],[87,32,226,30,"length"],[88,6,227,4],[88,7,227,5],[89,6,228,4],[89,10,228,8],[89,11,228,9,"_agent"],[89,17,228,15],[89,18,228,16,"sendEvent"],[89,27,228,25],[89,28,228,26],[89,42,228,40],[89,44,228,42,"event"],[89,49,228,47],[89,50,228,48],[90,4,229,2],[91,4,231,2,"loadingFinished"],[91,19,231,17,"loadingFinished"],[91,20,231,18,"id"],[91,22,231,28],[91,24,231,30,"encodedDataLength"],[91,41,231,55],[91,43,231,57],[92,6,232,4],[92,12,232,10,"event"],[92,17,232,37],[92,20,232,40],[93,8,233,6,"requestId"],[93,17,233,15],[93,19,233,17,"String"],[93,25,233,23],[93,26,233,24,"id"],[93,28,233,26],[93,29,233,27],[94,8,234,6,"timestamp"],[94,17,234,15],[94,19,234,17,"JSInspector"],[94,30,234,28],[94,31,234,29,"getTimestamp"],[94,43,234,41],[94,44,234,42],[94,45,234,43],[95,8,235,6,"encodedDataLength"],[95,25,235,23],[95,27,235,25,"encodedDataLength"],[96,6,236,4],[96,7,236,5],[97,6,237,4],[97,10,237,8],[97,11,237,9,"_agent"],[97,17,237,15],[97,18,237,16,"sendEvent"],[97,27,237,25],[97,28,237,26],[97,45,237,43],[97,47,237,45,"event"],[97,52,237,50],[97,53,237,51],[98,4,238,2],[99,4,240,2,"loadingFailed"],[99,17,240,15,"loadingFailed"],[99,18,240,16,"id"],[99,20,240,26],[99,22,240,28,"error"],[99,27,240,41],[99,29,240,43],[100,6,241,4],[100,12,241,10,"event"],[100,17,241,35],[100,20,241,38],[101,8,242,6,"requestId"],[101,17,242,15],[101,19,242,17,"String"],[101,25,242,23],[101,26,242,24,"id"],[101,28,242,26],[101,29,242,27],[102,8,243,6,"timestamp"],[102,17,243,15],[102,19,243,17,"JSInspector"],[102,30,243,28],[102,31,243,29,"getTimestamp"],[102,43,243,41],[102,44,243,42],[102,45,243,43],[103,8,244,6,"type"],[103,12,244,10],[103,14,244,12],[103,21,244,19],[104,8,245,6,"errorText"],[104,17,245,15],[104,19,245,17,"error"],[105,6,246,4],[105,7,246,5],[106,6,247,4],[106,10,247,8],[106,11,247,9,"_agent"],[106,17,247,15],[106,18,247,16,"sendEvent"],[106,27,247,25],[106,28,247,26],[106,43,247,41],[106,45,247,43,"event"],[106,50,247,48],[106,51,247,49],[107,4,248,2],[108,4,250,2,"_getMimeType"],[108,16,250,14,"_getMimeType"],[108,17,250,15,"headers"],[108,24,250,31],[108,26,250,41],[109,6,251,4],[109,12,251,10,"contentType"],[109,23,251,21],[109,26,251,24,"headers"],[109,33,251,31],[109,34,251,32],[109,48,251,46],[109,49,251,47],[109,53,251,51],[109,55,251,53],[110,6,252,4],[110,13,252,11,"contentType"],[110,24,252,22],[110,25,252,23,"split"],[110,30,252,28],[110,31,252,29],[110,34,252,32],[110,35,252,33],[110,36,252,34],[110,37,252,35],[110,38,252,36],[111,4,253,2],[112,2,254,0],[113,2,262,0],[113,8,262,6,"NetworkAgent"],[113,20,262,18],[113,29,262,27,"InspectorAgent"],[113,43,262,41],[113,44,262,42],[114,4,263,2],[114,11,263,9,"DOMAIN"],[114,17,263,15],[114,20,263,48],[114,29,263,57],[115,4,268,2,"enable"],[115,10,268,8,"enable"],[115,11,268,9],[116,6,268,10,"maxResourceBufferSize"],[116,27,268,31],[117,6,268,33,"maxTotalBufferSize"],[118,4,268,63],[118,5,268,64],[118,7,268,66],[119,6,269,4],[119,10,269,8],[119,11,269,9,"_interceptor"],[119,23,269,21],[119,26,269,24],[119,30,269,28,"Interceptor"],[119,41,269,39],[119,42,269,40],[119,46,269,44],[119,47,269,45],[120,6,270,4,"XMLHttpRequest"],[120,20,270,18],[120,21,270,19,"setInterceptor"],[120,35,270,33],[120,36,270,34],[120,40,270,38],[120,41,270,39,"_interceptor"],[120,53,270,51],[120,54,270,52],[121,4,271,2],[122,4,273,2,"disable"],[122,11,273,9,"disable"],[122,12,273,9],[122,14,273,12],[123,6,274,4,"XMLHttpRequest"],[123,20,274,18],[123,21,274,19,"setInterceptor"],[123,35,274,33],[123,36,274,34],[123,40,274,38],[123,41,274,39],[124,6,275,4],[124,10,275,8],[124,11,275,9,"_interceptor"],[124,23,275,21],[124,26,275,24],[124,30,275,28],[125,4,276,2],[126,4,278,2,"getResponseBody"],[126,19,278,17,"getResponseBody"],[126,20,278,18],[127,6,278,19,"requestId"],[128,4,278,57],[128,5,278,58],[128,7,282,4],[129,6,283,4],[129,13,283,11],[130,8,283,12,"body"],[130,12,283,16],[130,14,283,18],[130,18,283,22],[130,19,283,23,"interceptor"],[130,30,283,34],[130,31,283,35],[130,32,283,36],[130,33,283,37,"getData"],[130,40,283,44],[130,41,283,45,"requestId"],[130,50,283,54],[130,51,283,55],[131,8,283,57,"base64Encoded"],[131,21,283,70],[131,23,283,72],[132,6,283,77],[132,7,283,78],[133,4,284,2],[134,4,286,2,"interceptor"],[134,15,286,13,"interceptor"],[134,16,286,13],[134,18,286,29],[135,6,287,4],[135,10,287,8],[135,14,287,12],[135,15,287,13,"_interceptor"],[135,27,287,25],[135,29,287,27],[136,8,288,6],[136,15,288,13],[136,19,288,17],[136,20,288,18,"_interceptor"],[136,32,288,30],[137,6,289,4],[137,7,289,5],[137,13,289,11],[138,8,290,6],[138,14,290,12,"Error"],[138,19,290,17],[138,20,290,18],[138,50,290,48],[138,51,290,49],[139,6,291,4],[140,4,292,2],[141,2,293,0],[142,2,295,0,"module"],[142,8,295,6],[142,9,295,7,"exports"],[142,16,295,14],[142,19,295,17,"NetworkAgent"],[142,31,295,29],[143,0,295,30]],"functionMap":{"names":["<global>","Interceptor","Interceptor#constructor","Interceptor#getData","Interceptor#requestSent","Interceptor#responseReceived","Interceptor#dataReceived","Interceptor#loadingFinished","Interceptor#loadingFailed","Interceptor#_getMimeType","NetworkAgent","enable","disable","getResponseBody","interceptor"],"mappings":"AAA;ACqJ;ECI;GDG;EEE;GFE;EGE;GH0B;EIE;GJyB;EKE;GLW;EME;GNO;EOE;GPQ;EQE;GRG;CDC;AUQ;ECM;GDG;EEE;GFG;EGE;GHM;EIE;GJM;CVC"}},"type":"js/module"}]}