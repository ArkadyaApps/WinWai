{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":156,"column":0,"index":4163}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"invariant","data":{"asyncType":null,"locs":[{"start":{"line":11,"column":0,"index":222},"end":{"line":11,"column":34,"index":256}}],"key":"Fzi/BpZws2YooIGJ9b6u0HJtuks="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.CellRenderMask = void 0;\n  var _invariant = _interopRequireDefault(require(_dependencyMap[1], \"invariant\"));\n  /**\n   * Copyright (c) Meta Platforms, Inc. and affiliates.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   *\n   * \n   * @format\n   */\n\n  class CellRenderMask {\n    constructor(numCells) {\n      (0, _invariant.default)(numCells >= 0, 'CellRenderMask must contain a non-negative number os cells');\n      this._numCells = numCells;\n      if (numCells === 0) {\n        this._regions = [];\n      } else {\n        this._regions = [{\n          first: 0,\n          last: numCells - 1,\n          isSpacer: true\n        }];\n      }\n    }\n    enumerateRegions() {\n      return this._regions;\n    }\n    addCells(cells) {\n      (0, _invariant.default)(cells.first >= 0 && cells.first < this._numCells && cells.last >= -1 && cells.last < this._numCells && cells.last >= cells.first - 1, 'CellRenderMask.addCells called with invalid cell range');\n\n      // VirtualizedList uses inclusive ranges, where zero-count states are\n      // possible. E.g. [0, -1] for no cells, starting at 0.\n      if (cells.last < cells.first) {\n        return;\n      }\n      const [firstIntersect, firstIntersectIdx] = this._findRegion(cells.first);\n      const [lastIntersect, lastIntersectIdx] = this._findRegion(cells.last);\n\n      // Fast-path if the cells to add are already all present in the mask. We\n      // will otherwise need to do some mutation.\n      if (firstIntersectIdx === lastIntersectIdx && !firstIntersect.isSpacer) {\n        return;\n      }\n\n      // We need to replace the existing covered regions with 1-3 new regions\n      // depending whether we need to split spacers out of overlapping regions.\n      const newLeadRegion = [];\n      const newTailRegion = [];\n      const newMainRegion = {\n        ...cells,\n        isSpacer: false\n      };\n      if (firstIntersect.first < newMainRegion.first) {\n        if (firstIntersect.isSpacer) {\n          newLeadRegion.push({\n            first: firstIntersect.first,\n            last: newMainRegion.first - 1,\n            isSpacer: true\n          });\n        } else {\n          newMainRegion.first = firstIntersect.first;\n        }\n      }\n      if (lastIntersect.last > newMainRegion.last) {\n        if (lastIntersect.isSpacer) {\n          newTailRegion.push({\n            first: newMainRegion.last + 1,\n            last: lastIntersect.last,\n            isSpacer: true\n          });\n        } else {\n          newMainRegion.last = lastIntersect.last;\n        }\n      }\n      const replacementRegions = [...newLeadRegion, newMainRegion, ...newTailRegion];\n      const numRegionsToDelete = lastIntersectIdx - firstIntersectIdx + 1;\n      this._regions.splice(firstIntersectIdx, numRegionsToDelete, ...replacementRegions);\n    }\n    numCells() {\n      return this._numCells;\n    }\n    equals(other) {\n      return this._numCells === other._numCells && this._regions.length === other._regions.length && this._regions.every((region, i) => region.first === other._regions[i].first && region.last === other._regions[i].last && region.isSpacer === other._regions[i].isSpacer);\n    }\n    _findRegion(cellIdx) {\n      let firstIdx = 0;\n      let lastIdx = this._regions.length - 1;\n      while (firstIdx <= lastIdx) {\n        const middleIdx = Math.floor((firstIdx + lastIdx) / 2);\n        const middleRegion = this._regions[middleIdx];\n        if (cellIdx >= middleRegion.first && cellIdx <= middleRegion.last) {\n          return [middleRegion, middleIdx];\n        } else if (cellIdx < middleRegion.first) {\n          lastIdx = middleIdx - 1;\n        } else if (cellIdx > middleRegion.last) {\n          firstIdx = middleIdx + 1;\n        }\n      }\n      (0, _invariant.default)(false, `A region was not found containing cellIdx ${cellIdx}`);\n    }\n  }\n  exports.CellRenderMask = CellRenderMask;\n});","lineCount":110,"map":[[7,2,11,0],[7,6,11,0,"_invariant"],[7,16,11,0],[7,19,11,0,"_interopRequireDefault"],[7,41,11,0],[7,42,11,0,"require"],[7,49,11,0],[7,50,11,0,"_dependencyMap"],[7,64,11,0],[8,2,1,0],[9,0,2,0],[10,0,3,0],[11,0,4,0],[12,0,5,0],[13,0,6,0],[14,0,7,0],[15,0,8,0],[16,0,9,0],[18,2,19,7],[18,8,19,13,"CellRenderMask"],[18,22,19,27],[18,23,19,28],[19,4,23,2,"constructor"],[19,15,23,13,"constructor"],[19,16,23,14,"numCells"],[19,24,23,30],[19,26,23,32],[20,6,24,4],[20,10,24,4,"invariant"],[20,28,24,13],[20,30,25,6,"numCells"],[20,38,25,14],[20,42,25,18],[20,43,25,19],[20,45,26,6],[20,105,27,4],[20,106,27,5],[21,6,29,4],[21,10,29,8],[21,11,29,9,"_numCells"],[21,20,29,18],[21,23,29,21,"numCells"],[21,31,29,29],[22,6,31,4],[22,10,31,8,"numCells"],[22,18,31,16],[22,23,31,21],[22,24,31,22],[22,26,31,24],[23,8,32,6],[23,12,32,10],[23,13,32,11,"_regions"],[23,21,32,19],[23,24,32,22],[23,26,32,24],[24,6,33,4],[24,7,33,5],[24,13,33,11],[25,8,34,6],[25,12,34,10],[25,13,34,11,"_regions"],[25,21,34,19],[25,24,34,22],[25,25,35,8],[26,10,36,10,"first"],[26,15,36,15],[26,17,36,17],[26,18,36,18],[27,10,37,10,"last"],[27,14,37,14],[27,16,37,16,"numCells"],[27,24,37,24],[27,27,37,27],[27,28,37,28],[28,10,38,10,"isSpacer"],[28,18,38,18],[28,20,38,20],[29,8,39,8],[29,9,39,9],[29,10,40,7],[30,6,41,4],[31,4,42,2],[32,4,44,2,"enumerateRegions"],[32,20,44,18,"enumerateRegions"],[32,21,44,18],[32,23,44,49],[33,6,45,4],[33,13,45,11],[33,17,45,15],[33,18,45,16,"_regions"],[33,26,45,24],[34,4,46,2],[35,4,48,2,"addCells"],[35,12,48,10,"addCells"],[35,13,48,11,"cells"],[35,18,48,47],[35,20,48,55],[36,6,49,4],[36,10,49,4,"invariant"],[36,28,49,13],[36,30,50,6,"cells"],[36,35,50,11],[36,36,50,12,"first"],[36,41,50,17],[36,45,50,21],[36,46,50,22],[36,50,51,8,"cells"],[36,55,51,13],[36,56,51,14,"first"],[36,61,51,19],[36,64,51,22],[36,68,51,26],[36,69,51,27,"_numCells"],[36,78,51,36],[36,82,52,8,"cells"],[36,87,52,13],[36,88,52,14,"last"],[36,92,52,18],[36,96,52,22],[36,97,52,23],[36,98,52,24],[36,102,53,8,"cells"],[36,107,53,13],[36,108,53,14,"last"],[36,112,53,18],[36,115,53,21],[36,119,53,25],[36,120,53,26,"_numCells"],[36,129,53,35],[36,133,54,8,"cells"],[36,138,54,13],[36,139,54,14,"last"],[36,143,54,18],[36,147,54,22,"cells"],[36,152,54,27],[36,153,54,28,"first"],[36,158,54,33],[36,161,54,36],[36,162,54,37],[36,164,55,6],[36,220,56,4],[36,221,56,5],[38,6,58,4],[39,6,59,4],[40,6,60,4],[40,10,60,8,"cells"],[40,15,60,13],[40,16,60,14,"last"],[40,20,60,18],[40,23,60,21,"cells"],[40,28,60,26],[40,29,60,27,"first"],[40,34,60,32],[40,36,60,34],[41,8,61,6],[42,6,62,4],[43,6,64,4],[43,12,64,10],[43,13,64,11,"firstIntersect"],[43,27,64,25],[43,29,64,27,"firstIntersectIdx"],[43,46,64,44],[43,47,64,45],[43,50,64,48],[43,54,64,52],[43,55,64,53,"_findRegion"],[43,66,64,64],[43,67,64,65,"cells"],[43,72,64,70],[43,73,64,71,"first"],[43,78,64,76],[43,79,64,77],[44,6,65,4],[44,12,65,10],[44,13,65,11,"lastIntersect"],[44,26,65,24],[44,28,65,26,"lastIntersectIdx"],[44,44,65,42],[44,45,65,43],[44,48,65,46],[44,52,65,50],[44,53,65,51,"_findRegion"],[44,64,65,62],[44,65,65,63,"cells"],[44,70,65,68],[44,71,65,69,"last"],[44,75,65,73],[44,76,65,74],[46,6,67,4],[47,6,68,4],[48,6,69,4],[48,10,69,8,"firstIntersectIdx"],[48,27,69,25],[48,32,69,30,"lastIntersectIdx"],[48,48,69,46],[48,52,69,50],[48,53,69,51,"firstIntersect"],[48,67,69,65],[48,68,69,66,"isSpacer"],[48,76,69,74],[48,78,69,76],[49,8,70,6],[50,6,71,4],[52,6,73,4],[53,6,74,4],[54,6,75,4],[54,12,75,10,"newLeadRegion"],[54,25,75,42],[54,28,75,45],[54,30,75,47],[55,6,76,4],[55,12,76,10,"newTailRegion"],[55,25,76,42],[55,28,76,45],[55,30,76,47],[56,6,77,4],[56,12,77,10,"newMainRegion"],[56,25,77,35],[56,28,77,38],[57,8,78,6],[57,11,78,9,"cells"],[57,16,78,14],[58,8,79,6,"isSpacer"],[58,16,79,14],[58,18,79,16],[59,6,80,4],[59,7,80,5],[60,6,82,4],[60,10,82,8,"firstIntersect"],[60,24,82,22],[60,25,82,23,"first"],[60,30,82,28],[60,33,82,31,"newMainRegion"],[60,46,82,44],[60,47,82,45,"first"],[60,52,82,50],[60,54,82,52],[61,8,83,6],[61,12,83,10,"firstIntersect"],[61,26,83,24],[61,27,83,25,"isSpacer"],[61,35,83,33],[61,37,83,35],[62,10,84,8,"newLeadRegion"],[62,23,84,21],[62,24,84,22,"push"],[62,28,84,26],[62,29,84,27],[63,12,85,10,"first"],[63,17,85,15],[63,19,85,17,"firstIntersect"],[63,33,85,31],[63,34,85,32,"first"],[63,39,85,37],[64,12,86,10,"last"],[64,16,86,14],[64,18,86,16,"newMainRegion"],[64,31,86,29],[64,32,86,30,"first"],[64,37,86,35],[64,40,86,38],[64,41,86,39],[65,12,87,10,"isSpacer"],[65,20,87,18],[65,22,87,20],[66,10,88,8],[66,11,88,9],[66,12,88,10],[67,8,89,6],[67,9,89,7],[67,15,89,13],[68,10,90,8,"newMainRegion"],[68,23,90,21],[68,24,90,22,"first"],[68,29,90,27],[68,32,90,30,"firstIntersect"],[68,46,90,44],[68,47,90,45,"first"],[68,52,90,50],[69,8,91,6],[70,6,92,4],[71,6,94,4],[71,10,94,8,"lastIntersect"],[71,23,94,21],[71,24,94,22,"last"],[71,28,94,26],[71,31,94,29,"newMainRegion"],[71,44,94,42],[71,45,94,43,"last"],[71,49,94,47],[71,51,94,49],[72,8,95,6],[72,12,95,10,"lastIntersect"],[72,25,95,23],[72,26,95,24,"isSpacer"],[72,34,95,32],[72,36,95,34],[73,10,96,8,"newTailRegion"],[73,23,96,21],[73,24,96,22,"push"],[73,28,96,26],[73,29,96,27],[74,12,97,10,"first"],[74,17,97,15],[74,19,97,17,"newMainRegion"],[74,32,97,30],[74,33,97,31,"last"],[74,37,97,35],[74,40,97,38],[74,41,97,39],[75,12,98,10,"last"],[75,16,98,14],[75,18,98,16,"lastIntersect"],[75,31,98,29],[75,32,98,30,"last"],[75,36,98,34],[76,12,99,10,"isSpacer"],[76,20,99,18],[76,22,99,20],[77,10,100,8],[77,11,100,9],[77,12,100,10],[78,8,101,6],[78,9,101,7],[78,15,101,13],[79,10,102,8,"newMainRegion"],[79,23,102,21],[79,24,102,22,"last"],[79,28,102,26],[79,31,102,29,"lastIntersect"],[79,44,102,42],[79,45,102,43,"last"],[79,49,102,47],[80,8,103,6],[81,6,104,4],[82,6,106,4],[82,12,106,10,"replacementRegions"],[82,30,106,47],[82,33,106,50],[82,34,107,6],[82,37,107,9,"newLeadRegion"],[82,50,107,22],[82,52,108,6,"newMainRegion"],[82,65,108,19],[82,67,109,6],[82,70,109,9,"newTailRegion"],[82,83,109,22],[82,84,110,5],[83,6,111,4],[83,12,111,10,"numRegionsToDelete"],[83,30,111,28],[83,33,111,31,"lastIntersectIdx"],[83,49,111,47],[83,52,111,50,"firstIntersectIdx"],[83,69,111,67],[83,72,111,70],[83,73,111,71],[84,6,112,4],[84,10,112,8],[84,11,112,9,"_regions"],[84,19,112,17],[84,20,112,18,"splice"],[84,26,112,24],[84,27,113,6,"firstIntersectIdx"],[84,44,113,23],[84,46,114,6,"numRegionsToDelete"],[84,64,114,24],[84,66,115,6],[84,69,115,9,"replacementRegions"],[84,87,116,4],[84,88,116,5],[85,4,117,2],[86,4,119,2,"numCells"],[86,12,119,10,"numCells"],[86,13,119,10],[86,15,119,21],[87,6,120,4],[87,13,120,11],[87,17,120,15],[87,18,120,16,"_numCells"],[87,27,120,25],[88,4,121,2],[89,4,123,2,"equals"],[89,10,123,8,"equals"],[89,11,123,9,"other"],[89,16,123,30],[89,18,123,41],[90,6,124,4],[90,13,125,6],[90,17,125,10],[90,18,125,11,"_numCells"],[90,27,125,20],[90,32,125,25,"other"],[90,37,125,30],[90,38,125,31,"_numCells"],[90,47,125,40],[90,51,126,6],[90,55,126,10],[90,56,126,11,"_regions"],[90,64,126,19],[90,65,126,20,"length"],[90,71,126,26],[90,76,126,31,"other"],[90,81,126,36],[90,82,126,37,"_regions"],[90,90,126,45],[90,91,126,46,"length"],[90,97,126,52],[90,101,127,6],[90,105,127,10],[90,106,127,11,"_regions"],[90,114,127,19],[90,115,127,20,"every"],[90,120,127,25],[90,121,128,8],[90,122,128,9,"region"],[90,128,128,15],[90,130,128,17,"i"],[90,131,128,18],[90,136,129,10,"region"],[90,142,129,16],[90,143,129,17,"first"],[90,148,129,22],[90,153,129,27,"other"],[90,158,129,32],[90,159,129,33,"_regions"],[90,167,129,41],[90,168,129,42,"i"],[90,169,129,43],[90,170,129,44],[90,171,129,45,"first"],[90,176,129,50],[90,180,130,10,"region"],[90,186,130,16],[90,187,130,17,"last"],[90,191,130,21],[90,196,130,26,"other"],[90,201,130,31],[90,202,130,32,"_regions"],[90,210,130,40],[90,211,130,41,"i"],[90,212,130,42],[90,213,130,43],[90,214,130,44,"last"],[90,218,130,48],[90,222,131,10,"region"],[90,228,131,16],[90,229,131,17,"isSpacer"],[90,237,131,25],[90,242,131,30,"other"],[90,247,131,35],[90,248,131,36,"_regions"],[90,256,131,44],[90,257,131,45,"i"],[90,258,131,46],[90,259,131,47],[90,260,131,48,"isSpacer"],[90,268,132,6],[90,269,132,7],[91,4,134,2],[92,4,136,2,"_findRegion"],[92,15,136,13,"_findRegion"],[92,16,136,14,"cellIdx"],[92,23,136,29],[92,25,136,53],[93,6,137,4],[93,10,137,8,"firstIdx"],[93,18,137,16],[93,21,137,19],[93,22,137,20],[94,6,138,4],[94,10,138,8,"lastIdx"],[94,17,138,15],[94,20,138,18],[94,24,138,22],[94,25,138,23,"_regions"],[94,33,138,31],[94,34,138,32,"length"],[94,40,138,38],[94,43,138,41],[94,44,138,42],[95,6,140,4],[95,13,140,11,"firstIdx"],[95,21,140,19],[95,25,140,23,"lastIdx"],[95,32,140,30],[95,34,140,32],[96,8,141,6],[96,14,141,12,"middleIdx"],[96,23,141,21],[96,26,141,24,"Math"],[96,30,141,28],[96,31,141,29,"floor"],[96,36,141,34],[96,37,141,35],[96,38,141,36,"firstIdx"],[96,46,141,44],[96,49,141,47,"lastIdx"],[96,56,141,54],[96,60,141,58],[96,61,141,59],[96,62,141,60],[97,8,142,6],[97,14,142,12,"middleRegion"],[97,26,142,24],[97,29,142,27],[97,33,142,31],[97,34,142,32,"_regions"],[97,42,142,40],[97,43,142,41,"middleIdx"],[97,52,142,50],[97,53,142,51],[98,8,144,6],[98,12,144,10,"cellIdx"],[98,19,144,17],[98,23,144,21,"middleRegion"],[98,35,144,33],[98,36,144,34,"first"],[98,41,144,39],[98,45,144,43,"cellIdx"],[98,52,144,50],[98,56,144,54,"middleRegion"],[98,68,144,66],[98,69,144,67,"last"],[98,73,144,71],[98,75,144,73],[99,10,145,8],[99,17,145,15],[99,18,145,16,"middleRegion"],[99,30,145,28],[99,32,145,30,"middleIdx"],[99,41,145,39],[99,42,145,40],[100,8,146,6],[100,9,146,7],[100,15,146,13],[100,19,146,17,"cellIdx"],[100,26,146,24],[100,29,146,27,"middleRegion"],[100,41,146,39],[100,42,146,40,"first"],[100,47,146,45],[100,49,146,47],[101,10,147,8,"lastIdx"],[101,17,147,15],[101,20,147,18,"middleIdx"],[101,29,147,27],[101,32,147,30],[101,33,147,31],[102,8,148,6],[102,9,148,7],[102,15,148,13],[102,19,148,17,"cellIdx"],[102,26,148,24],[102,29,148,27,"middleRegion"],[102,41,148,39],[102,42,148,40,"last"],[102,46,148,44],[102,48,148,46],[103,10,149,8,"firstIdx"],[103,18,149,16],[103,21,149,19,"middleIdx"],[103,30,149,28],[103,33,149,31],[103,34,149,32],[104,8,150,6],[105,6,151,4],[106,6,153,4],[106,10,153,4,"invariant"],[106,28,153,13],[106,30,153,14],[106,35,153,19],[106,37,153,21],[106,82,153,66,"cellIdx"],[106,89,153,73],[106,91,153,75],[106,92,153,76],[107,4,154,2],[108,2,155,0],[109,2,155,1,"exports"],[109,9,155,1],[109,10,155,1,"CellRenderMask"],[109,24,155,1],[109,27,155,1,"CellRenderMask"],[109,41,155,1],[110,0,155,1]],"functionMap":{"names":["<global>","CellRenderMask","constructor","enumerateRegions","addCells","numCells","equals","_regions.every$argument_0","_findRegion"],"mappings":"AAA;OCkB;ECI;GDmB;EEE;GFE;EGE;GHqE;EIE;GJE;EKE;QCK;wDDG;GLG;EOE;GPkB;CDC"}},"type":"js/module"}]}