{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":74,"column":4,"index":2746}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"zustand","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"xFAZpEovr+Y5/UCynUzO0ntFekY="}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":69,"index":103}}],"key":"6eZFbfKht0uO2NEVT/d8+i8B0s8="}},{"name":"../utils/locationService","data":{"asyncType":null,"locs":[{"start":{"line":3,"column":0,"index":104},"end":{"line":3,"column":59,"index":163}}],"key":"DYorsyhTevFeZfoL+i1kDUncrWM="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.useLanguageStore = void 0;\n  var _zustand = require(_dependencyMap[1], \"zustand\");\n  var _asyncStorage = _interopRequireDefault(require(_dependencyMap[2], \"@react-native-async-storage/async-storage\"));\n  var _locationService = require(_dependencyMap[3], \"../utils/locationService\");\n  // Map country codes to languages\n  const getLanguageFromCountryCode = countryCode => {\n    const languageMap = {\n      'TH': 'th',\n      // Thailand -> Thai\n      'FR': 'fr',\n      // France -> French\n      'BE': 'fr',\n      // Belgium -> French (can be refined)\n      'CH': 'fr',\n      // Switzerland -> French (can be refined)\n      'CA': 'fr' // Canada -> French (can be refined for Quebec)\n    };\n    return languageMap[countryCode] || 'en'; // Default to English\n  };\n  const useLanguageStore = exports.useLanguageStore = (0, _zustand.create)(set => ({\n    language: 'en',\n    isLanguageDetected: false,\n    setLanguage: async language => {\n      await _asyncStorage.default.setItem('app_language', language);\n      await _asyncStorage.default.setItem('language_manually_set', 'true');\n      set({\n        language\n      });\n    },\n    initializeLanguage: async () => {\n      try {\n        // First check if user has manually set a language preference\n        const manuallySet = await _asyncStorage.default.getItem('language_manually_set');\n        const saved = await _asyncStorage.default.getItem('app_language');\n        if (manuallySet === 'true' && saved) {\n          // User has manually set language, use their preference\n          set({\n            language: saved,\n            isLanguageDetected: true\n          });\n          return;\n        }\n\n        // Try to detect language from geolocation\n        try {\n          const location = await (0, _locationService.getUserLocation)();\n          if (location && location.countryCode) {\n            const detectedLanguage = getLanguageFromCountryCode(location.countryCode);\n            console.log(`Detected country: ${location.country} (${location.countryCode}), setting language to: ${detectedLanguage}`);\n\n            // Save detected language\n            await _asyncStorage.default.setItem('app_language', detectedLanguage);\n            set({\n              language: detectedLanguage,\n              isLanguageDetected: true\n            });\n            return;\n          }\n        } catch (geoError) {\n          console.error('Geolocation-based language detection failed:', geoError);\n        }\n\n        // Fallback: Use saved language or default to English\n        if (saved) {\n          set({\n            language: saved,\n            isLanguageDetected: true\n          });\n        } else {\n          set({\n            language: 'en',\n            isLanguageDetected: true\n          });\n        }\n      } catch (error) {\n        console.error('Failed to initialize language:', error);\n        set({\n          language: 'en',\n          isLanguageDetected: true\n        });\n      }\n    }\n  }));\n});","lineCount":89,"map":[[7,2,1,0],[7,6,1,0,"_zustand"],[7,14,1,0],[7,17,1,0,"require"],[7,24,1,0],[7,25,1,0,"_dependencyMap"],[7,39,1,0],[8,2,2,0],[8,6,2,0,"_asyncStorage"],[8,19,2,0],[8,22,2,0,"_interopRequireDefault"],[8,44,2,0],[8,45,2,0,"require"],[8,52,2,0],[8,53,2,0,"_dependencyMap"],[8,67,2,0],[9,2,3,0],[9,6,3,0,"_locationService"],[9,22,3,0],[9,25,3,0,"require"],[9,32,3,0],[9,33,3,0,"_dependencyMap"],[9,47,3,0],[10,2,14,0],[11,2,15,0],[11,8,15,6,"getLanguageFromCountryCode"],[11,34,15,32],[11,37,15,36,"countryCode"],[11,48,15,55],[11,52,15,70],[12,4,16,2],[12,10,16,8,"languageMap"],[12,21,16,48],[12,24,16,51],[13,6,17,4],[13,10,17,8],[13,12,17,10],[13,16,17,14],[14,6,17,16],[15,6,18,4],[15,10,18,8],[15,12,18,10],[15,16,18,14],[16,6,18,16],[17,6,19,4],[17,10,19,8],[17,12,19,10],[17,16,19,14],[18,6,19,16],[19,6,20,4],[19,10,20,8],[19,12,20,10],[19,16,20,14],[20,6,20,16],[21,6,21,4],[21,10,21,8],[21,12,21,10],[21,16,21,14],[21,17,21,16],[22,4,22,2],[22,5,22,3],[23,4,24,2],[23,11,24,9,"languageMap"],[23,22,24,20],[23,23,24,21,"countryCode"],[23,34,24,32],[23,35,24,33],[23,39,24,37],[23,43,24,41],[23,44,24,42],[23,45,24,43],[24,2,25,0],[24,3,25,1],[25,2,27,7],[25,8,27,13,"useLanguageStore"],[25,24,27,29],[25,27,27,29,"exports"],[25,34,27,29],[25,35,27,29,"useLanguageStore"],[25,51,27,29],[25,54,27,32],[25,58,27,32,"create"],[25,73,27,38],[25,75,27,55,"set"],[25,78,27,58],[25,83,27,64],[26,4,28,2,"language"],[26,12,28,10],[26,14,28,12],[26,18,28,16],[27,4,29,2,"isLanguageDetected"],[27,22,29,20],[27,24,29,22],[27,29,29,27],[28,4,30,2,"setLanguage"],[28,15,30,13],[28,17,30,15],[28,23,30,22,"language"],[28,31,30,30],[28,35,30,35],[29,6,31,4],[29,12,31,10,"AsyncStorage"],[29,33,31,22],[29,34,31,23,"setItem"],[29,41,31,30],[29,42,31,31],[29,56,31,45],[29,58,31,47,"language"],[29,66,31,55],[29,67,31,56],[30,6,32,4],[30,12,32,10,"AsyncStorage"],[30,33,32,22],[30,34,32,23,"setItem"],[30,41,32,30],[30,42,32,31],[30,65,32,54],[30,67,32,56],[30,73,32,62],[30,74,32,63],[31,6,33,4,"set"],[31,9,33,7],[31,10,33,8],[32,8,33,10,"language"],[33,6,33,19],[33,7,33,20],[33,8,33,21],[34,4,34,2],[34,5,34,3],[35,4,35,2,"initializeLanguage"],[35,22,35,20],[35,24,35,22],[35,30,35,22,"initializeLanguage"],[35,31,35,22],[35,36,35,34],[36,6,36,4],[36,10,36,8],[37,8,37,6],[38,8,38,6],[38,14,38,12,"manuallySet"],[38,25,38,23],[38,28,38,26],[38,34,38,32,"AsyncStorage"],[38,55,38,44],[38,56,38,45,"getItem"],[38,63,38,52],[38,64,38,53],[38,87,38,76],[38,88,38,77],[39,8,39,6],[39,14,39,12,"saved"],[39,19,39,17],[39,22,39,20],[39,28,39,26,"AsyncStorage"],[39,49,39,38],[39,50,39,39,"getItem"],[39,57,39,46],[39,58,39,47],[39,72,39,61],[39,73,39,62],[40,8,41,6],[40,12,41,10,"manuallySet"],[40,23,41,21],[40,28,41,26],[40,34,41,32],[40,38,41,36,"saved"],[40,43,41,41],[40,45,41,43],[41,10,42,8],[42,10,43,8,"set"],[42,13,43,11],[42,14,43,12],[43,12,43,14,"language"],[43,20,43,22],[43,22,43,24,"saved"],[43,27,43,41],[44,12,43,43,"isLanguageDetected"],[44,30,43,61],[44,32,43,63],[45,10,43,68],[45,11,43,69],[45,12,43,70],[46,10,44,8],[47,8,45,6],[49,8,47,6],[50,8,48,6],[50,12,48,10],[51,10,49,8],[51,16,49,14,"location"],[51,24,49,22],[51,27,49,25],[51,33,49,31],[51,37,49,31,"getUserLocation"],[51,69,49,46],[51,71,49,47],[51,72,49,48],[52,10,50,8],[52,14,50,12,"location"],[52,22,50,20],[52,26,50,24,"location"],[52,34,50,32],[52,35,50,33,"countryCode"],[52,46,50,44],[52,48,50,46],[53,12,51,10],[53,18,51,16,"detectedLanguage"],[53,34,51,32],[53,37,51,35,"getLanguageFromCountryCode"],[53,63,51,61],[53,64,51,62,"location"],[53,72,51,70],[53,73,51,71,"countryCode"],[53,84,51,82],[53,85,51,83],[54,12,52,10,"console"],[54,19,52,17],[54,20,52,18,"log"],[54,23,52,21],[54,24,52,22],[54,45,52,43,"location"],[54,53,52,51],[54,54,52,52,"country"],[54,61,52,59],[54,66,52,64,"location"],[54,74,52,72],[54,75,52,73,"countryCode"],[54,86,52,84],[54,113,52,111,"detectedLanguage"],[54,129,52,127],[54,131,52,129],[54,132,52,130],[56,12,54,10],[57,12,55,10],[57,18,55,16,"AsyncStorage"],[57,39,55,28],[57,40,55,29,"setItem"],[57,47,55,36],[57,48,55,37],[57,62,55,51],[57,64,55,53,"detectedLanguage"],[57,80,55,69],[57,81,55,70],[58,12,56,10,"set"],[58,15,56,13],[58,16,56,14],[59,14,56,16,"language"],[59,22,56,24],[59,24,56,26,"detectedLanguage"],[59,40,56,42],[60,14,56,44,"isLanguageDetected"],[60,32,56,62],[60,34,56,64],[61,12,56,69],[61,13,56,70],[61,14,56,71],[62,12,57,10],[63,10,58,8],[64,8,59,6],[64,9,59,7],[64,10,59,8],[64,17,59,15,"geoError"],[64,25,59,23],[64,27,59,25],[65,10,60,8,"console"],[65,17,60,15],[65,18,60,16,"error"],[65,23,60,21],[65,24,60,22],[65,70,60,68],[65,72,60,70,"geoError"],[65,80,60,78],[65,81,60,79],[66,8,61,6],[68,8,63,6],[69,8,64,6],[69,12,64,10,"saved"],[69,17,64,15],[69,19,64,17],[70,10,65,8,"set"],[70,13,65,11],[70,14,65,12],[71,12,65,14,"language"],[71,20,65,22],[71,22,65,24,"saved"],[71,27,65,41],[72,12,65,43,"isLanguageDetected"],[72,30,65,61],[72,32,65,63],[73,10,65,68],[73,11,65,69],[73,12,65,70],[74,8,66,6],[74,9,66,7],[74,15,66,13],[75,10,67,8,"set"],[75,13,67,11],[75,14,67,12],[76,12,67,14,"language"],[76,20,67,22],[76,22,67,24],[76,26,67,28],[77,12,67,30,"isLanguageDetected"],[77,30,67,48],[77,32,67,50],[78,10,67,55],[78,11,67,56],[78,12,67,57],[79,8,68,6],[80,6,69,4],[80,7,69,5],[80,8,69,6],[80,15,69,13,"error"],[80,20,69,18],[80,22,69,20],[81,8,70,6,"console"],[81,15,70,13],[81,16,70,14,"error"],[81,21,70,19],[81,22,70,20],[81,54,70,52],[81,56,70,54,"error"],[81,61,70,59],[81,62,70,60],[82,8,71,6,"set"],[82,11,71,9],[82,12,71,10],[83,10,71,12,"language"],[83,18,71,20],[83,20,71,22],[83,24,71,26],[84,10,71,28,"isLanguageDetected"],[84,28,71,46],[84,30,71,48],[85,8,71,53],[85,9,71,54],[85,10,71,55],[86,6,72,4],[87,4,73,2],[88,2,74,0],[88,3,74,1],[88,4,74,2],[88,5,74,3],[89,0,74,4]],"functionMap":{"names":["<global>","getLanguageFromCountryCode","create$argument_0","setLanguage","initializeLanguage"],"mappings":"AAA;mCCc;CDU;sDEE;eCG;GDI;sBEC;GFsC;EFC"}},"type":"js/module"}]}