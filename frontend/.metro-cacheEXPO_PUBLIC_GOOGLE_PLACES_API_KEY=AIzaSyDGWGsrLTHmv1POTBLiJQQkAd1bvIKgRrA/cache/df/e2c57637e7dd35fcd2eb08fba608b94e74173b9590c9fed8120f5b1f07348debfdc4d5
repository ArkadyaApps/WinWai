{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":51,"index":51}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.useReleasingSharedObject = useReleasingSharedObject;\n  var _react = require(_dependencyMap[0], \"react\");\n  /**\n   * Returns a shared object, which is automatically cleaned up when the component is unmounted.\n   */\n  function useReleasingSharedObject(factory, dependencies) {\n    const objectRef = (0, _react.useRef)(null);\n    const isFastRefresh = (0, _react.useRef)(false);\n    const previousDependencies = (0, _react.useRef)(dependencies);\n    if (objectRef.current == null) {\n      objectRef.current = factory();\n    }\n    const object = (0, _react.useMemo)(() => {\n      let newObject = objectRef.current;\n      const dependenciesAreEqual = previousDependencies.current?.length === dependencies.length && dependencies.every((value, index) => value === previousDependencies.current[index]);\n      // If the dependencies have changed, release the previous object and create a new one, otherwise this has been called\n      // because of a fast refresh, and we don't want to release the object.\n      if (!newObject || !dependenciesAreEqual) {\n        objectRef.current?.release();\n        newObject = factory();\n        objectRef.current = newObject;\n        previousDependencies.current = dependencies;\n      } else {\n        isFastRefresh.current = true;\n      }\n      return newObject;\n    }, dependencies);\n    (0, _react.useEffect)(() => {\n      isFastRefresh.current = false;\n      return () => {\n        // This will be called on every fast refresh and on unmount, but we only want to release the object on unmount.\n        if (!isFastRefresh.current && objectRef.current) {\n          objectRef.current.release();\n        }\n      };\n    }, []);\n    return object;\n  }\n});","lineCount":45,"map":[[7,2,5,0,"exports"],[7,9,5,0],[7,10,5,0,"useReleasingSharedObject"],[7,34,5,0],[7,37,5,0,"useReleasingSharedObject"],[7,61,5,0],[8,2,1,0],[8,6,1,0,"_react"],[8,12,1,0],[8,15,1,0,"require"],[8,22,1,0],[8,23,1,0,"_dependencyMap"],[8,37,1,0],[9,2,2,0],[10,0,3,0],[11,0,4,0],[12,2,5,7],[12,11,5,16,"useReleasingSharedObject"],[12,35,5,40,"useReleasingSharedObject"],[12,36,5,41,"factory"],[12,43,5,48],[12,45,5,50,"dependencies"],[12,57,5,62],[12,59,5,64],[13,4,6,4],[13,10,6,10,"objectRef"],[13,19,6,19],[13,22,6,22],[13,26,6,22,"useRef"],[13,32,6,28],[13,33,6,28,"useRef"],[13,39,6,28],[13,41,6,29],[13,45,6,33],[13,46,6,34],[14,4,7,4],[14,10,7,10,"isFastRefresh"],[14,23,7,23],[14,26,7,26],[14,30,7,26,"useRef"],[14,36,7,32],[14,37,7,32,"useRef"],[14,43,7,32],[14,45,7,33],[14,50,7,38],[14,51,7,39],[15,4,8,4],[15,10,8,10,"previousDependencies"],[15,30,8,30],[15,33,8,33],[15,37,8,33,"useRef"],[15,43,8,39],[15,44,8,39,"useRef"],[15,50,8,39],[15,52,8,40,"dependencies"],[15,64,8,52],[15,65,8,53],[16,4,9,4],[16,8,9,8,"objectRef"],[16,17,9,17],[16,18,9,18,"current"],[16,25,9,25],[16,29,9,29],[16,33,9,33],[16,35,9,35],[17,6,10,8,"objectRef"],[17,15,10,17],[17,16,10,18,"current"],[17,23,10,25],[17,26,10,28,"factory"],[17,33,10,35],[17,34,10,36],[17,35,10,37],[18,4,11,4],[19,4,12,4],[19,10,12,10,"object"],[19,16,12,16],[19,19,12,19],[19,23,12,19,"useMemo"],[19,29,12,26],[19,30,12,26,"useMemo"],[19,37,12,26],[19,39,12,27],[19,45,12,33],[20,6,13,8],[20,10,13,12,"newObject"],[20,19,13,21],[20,22,13,24,"objectRef"],[20,31,13,33],[20,32,13,34,"current"],[20,39,13,41],[21,6,14,8],[21,12,14,14,"dependenciesAreEqual"],[21,32,14,34],[21,35,14,37,"previousDependencies"],[21,55,14,57],[21,56,14,58,"current"],[21,63,14,65],[21,65,14,67,"length"],[21,71,14,73],[21,76,14,78,"dependencies"],[21,88,14,90],[21,89,14,91,"length"],[21,95,14,97],[21,99,15,12,"dependencies"],[21,111,15,24],[21,112,15,25,"every"],[21,117,15,30],[21,118,15,31],[21,119,15,32,"value"],[21,124,15,37],[21,126,15,39,"index"],[21,131,15,44],[21,136,15,49,"value"],[21,141,15,54],[21,146,15,59,"previousDependencies"],[21,166,15,79],[21,167,15,80,"current"],[21,174,15,87],[21,175,15,88,"index"],[21,180,15,93],[21,181,15,94],[21,182,15,95],[22,6,16,8],[23,6,17,8],[24,6,18,8],[24,10,18,12],[24,11,18,13,"newObject"],[24,20,18,22],[24,24,18,26],[24,25,18,27,"dependenciesAreEqual"],[24,45,18,47],[24,47,18,49],[25,8,19,12,"objectRef"],[25,17,19,21],[25,18,19,22,"current"],[25,25,19,29],[25,27,19,31,"release"],[25,34,19,38],[25,35,19,39],[25,36,19,40],[26,8,20,12,"newObject"],[26,17,20,21],[26,20,20,24,"factory"],[26,27,20,31],[26,28,20,32],[26,29,20,33],[27,8,21,12,"objectRef"],[27,17,21,21],[27,18,21,22,"current"],[27,25,21,29],[27,28,21,32,"newObject"],[27,37,21,41],[28,8,22,12,"previousDependencies"],[28,28,22,32],[28,29,22,33,"current"],[28,36,22,40],[28,39,22,43,"dependencies"],[28,51,22,55],[29,6,23,8],[29,7,23,9],[29,13,24,13],[30,8,25,12,"isFastRefresh"],[30,21,25,25],[30,22,25,26,"current"],[30,29,25,33],[30,32,25,36],[30,36,25,40],[31,6,26,8],[32,6,27,8],[32,13,27,15,"newObject"],[32,22,27,24],[33,4,28,4],[33,5,28,5],[33,7,28,7,"dependencies"],[33,19,28,19],[33,20,28,20],[34,4,29,4],[34,8,29,4,"useEffect"],[34,14,29,13],[34,15,29,13,"useEffect"],[34,24,29,13],[34,26,29,14],[34,32,29,20],[35,6,30,8,"isFastRefresh"],[35,19,30,21],[35,20,30,22,"current"],[35,27,30,29],[35,30,30,32],[35,35,30,37],[36,6,31,8],[36,13,31,15],[36,19,31,21],[37,8,32,12],[38,8,33,12],[38,12,33,16],[38,13,33,17,"isFastRefresh"],[38,26,33,30],[38,27,33,31,"current"],[38,34,33,38],[38,38,33,42,"objectRef"],[38,47,33,51],[38,48,33,52,"current"],[38,55,33,59],[38,57,33,61],[39,10,34,16,"objectRef"],[39,19,34,25],[39,20,34,26,"current"],[39,27,34,33],[39,28,34,34,"release"],[39,35,34,41],[39,36,34,42],[39,37,34,43],[40,8,35,12],[41,6,36,8],[41,7,36,9],[42,4,37,4],[42,5,37,5],[42,7,37,7],[42,9,37,9],[42,10,37,10],[43,4,38,4],[43,11,38,11,"object"],[43,17,38,17],[44,2,39,0],[45,0,39,1],[45,3]],"functionMap":{"names":["<global>","useReleasingSharedObject","useMemo$argument_0","dependencies.every$argument_0","useEffect$argument_0","<anonymous>"],"mappings":"AAA;OCI;2BCO;+BCG,+DD;KDa;cGC;eCE;SDK;KHC;CDE"},"hasCjsExports":false},"type":"js/module"}]}