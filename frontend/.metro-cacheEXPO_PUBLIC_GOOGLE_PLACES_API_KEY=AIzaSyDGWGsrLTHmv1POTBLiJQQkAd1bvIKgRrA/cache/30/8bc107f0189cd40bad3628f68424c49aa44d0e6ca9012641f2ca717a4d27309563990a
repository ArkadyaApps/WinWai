{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":44,"column":37,"index":1653}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"invariant","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":34,"index":34}}],"key":"Fzi/BpZws2YooIGJ9b6u0HJtuks="}},{"name":"./Fetch","data":{"asyncType":null,"locs":[{"start":{"line":2,"column":0,"index":35},"end":{"line":2,"column":39,"index":74}}],"key":"Kw7I7/yXAEYxIMlpqbNuG+FKMRA="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.fetchDiscoveryAsync = fetchDiscoveryAsync;\n  exports.issuerWithWellKnownUrl = issuerWithWellKnownUrl;\n  exports.resolveDiscoveryAsync = resolveDiscoveryAsync;\n  var _invariant = _interopRequireDefault(require(_dependencyMap[1], \"invariant\"));\n  var _Fetch = require(_dependencyMap[2], \"./Fetch\");\n  /**\n   * Append the well known resources path and OpenID connect discovery document path to a URL\n   * https://tools.ietf.org/html/rfc5785\n   */\n  function issuerWithWellKnownUrl(issuer) {\n    return `${issuer}/.well-known/openid-configuration`;\n  }\n  // @needsAudit\n  /**\n   * Fetch a `DiscoveryDocument` from a well-known resource provider that supports auto discovery.\n   * @param issuer An `Issuer` URL to fetch from.\n   * @return Returns a discovery document that can be used for authentication.\n   */\n  async function fetchDiscoveryAsync(issuer) {\n    const json = await (0, _Fetch.requestAsync)(issuerWithWellKnownUrl(issuer), {\n      dataType: 'json',\n      method: 'GET'\n    });\n    return {\n      discoveryDocument: json,\n      authorizationEndpoint: json.authorization_endpoint,\n      tokenEndpoint: json.token_endpoint,\n      revocationEndpoint: json.revocation_endpoint,\n      userInfoEndpoint: json.userinfo_endpoint,\n      endSessionEndpoint: json.end_session_endpoint,\n      registrationEndpoint: json.registration_endpoint\n    };\n  }\n  // @needsAudit\n  /**\n   * Utility method for resolving the discovery document from an issuer or object.\n   *\n   * @param issuerOrDiscovery\n   */\n  async function resolveDiscoveryAsync(issuerOrDiscovery) {\n    (0, _invariant.default)(issuerOrDiscovery && !['number', 'boolean'].includes(typeof issuerOrDiscovery), 'Expected a valid discovery object or issuer URL');\n    if (typeof issuerOrDiscovery === 'string') {\n      return await fetchDiscoveryAsync(issuerOrDiscovery);\n    }\n    return issuerOrDiscovery;\n  }\n});","lineCount":52,"map":[[9,2,1,0],[9,6,1,0,"_invariant"],[9,16,1,0],[9,19,1,0,"_interopRequireDefault"],[9,41,1,0],[9,42,1,0,"require"],[9,49,1,0],[9,50,1,0,"_dependencyMap"],[9,64,1,0],[10,2,2,0],[10,6,2,0,"_Fetch"],[10,12,2,0],[10,15,2,0,"require"],[10,22,2,0],[10,23,2,0,"_dependencyMap"],[10,37,2,0],[11,2,3,0],[12,0,4,0],[13,0,5,0],[14,0,6,0],[15,2,7,7],[15,11,7,16,"issuerWithWellKnownUrl"],[15,33,7,38,"issuerWithWellKnownUrl"],[15,34,7,39,"issuer"],[15,40,7,45],[15,42,7,47],[16,4,8,4],[16,11,8,11],[16,14,8,14,"issuer"],[16,20,8,20],[16,55,8,55],[17,2,9,0],[18,2,10,0],[19,2,11,0],[20,0,12,0],[21,0,13,0],[22,0,14,0],[23,0,15,0],[24,2,16,7],[24,17,16,22,"fetchDiscoveryAsync"],[24,36,16,41,"fetchDiscoveryAsync"],[24,37,16,42,"issuer"],[24,43,16,48],[24,45,16,50],[25,4,17,4],[25,10,17,10,"json"],[25,14,17,14],[25,17,17,17],[25,23,17,23],[25,27,17,23,"requestAsync"],[25,46,17,35],[25,48,17,36,"issuerWithWellKnownUrl"],[25,70,17,58],[25,71,17,59,"issuer"],[25,77,17,65],[25,78,17,66],[25,80,17,68],[26,6,18,8,"dataType"],[26,14,18,16],[26,16,18,18],[26,22,18,24],[27,6,19,8,"method"],[27,12,19,14],[27,14,19,16],[28,4,20,4],[28,5,20,5],[28,6,20,6],[29,4,21,4],[29,11,21,11],[30,6,22,8,"discoveryDocument"],[30,23,22,25],[30,25,22,27,"json"],[30,29,22,31],[31,6,23,8,"authorizationEndpoint"],[31,27,23,29],[31,29,23,31,"json"],[31,33,23,35],[31,34,23,36,"authorization_endpoint"],[31,56,23,58],[32,6,24,8,"tokenEndpoint"],[32,19,24,21],[32,21,24,23,"json"],[32,25,24,27],[32,26,24,28,"token_endpoint"],[32,40,24,42],[33,6,25,8,"revocationEndpoint"],[33,24,25,26],[33,26,25,28,"json"],[33,30,25,32],[33,31,25,33,"revocation_endpoint"],[33,50,25,52],[34,6,26,8,"userInfoEndpoint"],[34,22,26,24],[34,24,26,26,"json"],[34,28,26,30],[34,29,26,31,"userinfo_endpoint"],[34,46,26,48],[35,6,27,8,"endSessionEndpoint"],[35,24,27,26],[35,26,27,28,"json"],[35,30,27,32],[35,31,27,33,"end_session_endpoint"],[35,51,27,53],[36,6,28,8,"registrationEndpoint"],[36,26,28,28],[36,28,28,30,"json"],[36,32,28,34],[36,33,28,35,"registration_endpoint"],[37,4,29,4],[37,5,29,5],[38,2,30,0],[39,2,31,0],[40,2,32,0],[41,0,33,0],[42,0,34,0],[43,0,35,0],[44,0,36,0],[45,2,37,7],[45,17,37,22,"resolveDiscoveryAsync"],[45,38,37,43,"resolveDiscoveryAsync"],[45,39,37,44,"issuerOrDiscovery"],[45,56,37,61],[45,58,37,63],[46,4,38,4],[46,8,38,4,"invariant"],[46,26,38,13],[46,28,38,14,"issuerOrDiscovery"],[46,45,38,31],[46,49,38,35],[46,50,38,36],[46,51,38,37],[46,59,38,45],[46,61,38,47],[46,70,38,56],[46,71,38,57],[46,72,38,58,"includes"],[46,80,38,66],[46,81,38,67],[46,88,38,74,"issuerOrDiscovery"],[46,105,38,91],[46,106,38,92],[46,108,38,94],[46,157,38,143],[46,158,38,144],[47,4,39,4],[47,8,39,8],[47,15,39,15,"issuerOrDiscovery"],[47,32,39,32],[47,37,39,37],[47,45,39,45],[47,47,39,47],[48,6,40,8],[48,13,40,15],[48,19,40,21,"fetchDiscoveryAsync"],[48,38,40,40],[48,39,40,41,"issuerOrDiscovery"],[48,56,40,58],[48,57,40,59],[49,4,41,4],[50,4,42,4],[50,11,42,11,"issuerOrDiscovery"],[50,28,42,28],[51,2,43,0],[52,0,43,1]],"functionMap":{"names":["<global>","issuerWithWellKnownUrl","fetchDiscoveryAsync","resolveDiscoveryAsync"],"mappings":"AAA;OCM;CDE;OEO;CFc;OGO;CHM"}},"type":"js/module"}]}