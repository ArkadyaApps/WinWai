{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":50},"end":{"line":3,"column":65,"index":115}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  // Copyright Â© 2024 650 Industries.\n  'use client';\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.createPermissionHook = createPermissionHook;\n  var _react = require(_dependencyMap[0], \"react\");\n  /**\n   * Get or request permission for protected functionality within the app.\n   * It uses separate permission requesters to interact with a single permission.\n   * By default, the hook will only retrieve the permission status.\n   */\n  function usePermission(methods, options) {\n    const isMounted = (0, _react.useRef)(true);\n    const [status, setStatus] = (0, _react.useState)(null);\n    const {\n      get = true,\n      request = false,\n      ...permissionOptions\n    } = options || {};\n    const getPermission = (0, _react.useCallback)(async () => {\n      const response = await methods.getMethod(Object.keys(permissionOptions).length > 0 ? permissionOptions : undefined);\n      if (isMounted.current) setStatus(response);\n      return response;\n    }, [methods.getMethod]);\n    const requestPermission = (0, _react.useCallback)(async () => {\n      const response = await methods.requestMethod(Object.keys(permissionOptions).length > 0 ? permissionOptions : undefined);\n      if (isMounted.current) setStatus(response);\n      return response;\n    }, [methods.requestMethod]);\n    (0, _react.useEffect)(function runMethods() {\n      if (request) requestPermission();\n      if (!request && get) getPermission();\n    }, [get, request, requestPermission, getPermission]);\n    // Workaround for unmounting components receiving state updates\n    (0, _react.useEffect)(function didMount() {\n      isMounted.current = true;\n      return () => {\n        isMounted.current = false;\n      };\n    }, []);\n    return [status, requestPermission, getPermission];\n  }\n  /**\n   * Create a new permission hook with the permission methods built-in.\n   * This can be used to quickly create specific permission hooks in every module.\n   */\n  function createPermissionHook(methods) {\n    return options => usePermission(methods, options);\n  }\n});","lineCount":54,"map":[[2,2,1,0],[3,2,2,0],[3,14,2,12],[4,2,2,13],[6,2,2,13,"Object"],[6,8,2,13],[6,9,2,13,"defineProperty"],[6,23,2,13],[6,24,2,13,"exports"],[6,31,2,13],[7,4,2,13,"value"],[7,9,2,13],[8,2,2,13],[9,2,44,0,"exports"],[9,9,44,0],[9,10,44,0,"createPermissionHook"],[9,30,44,0],[9,33,44,0,"createPermissionHook"],[9,53,44,0],[10,2,3,0],[10,6,3,0,"_react"],[10,12,3,0],[10,15,3,0,"require"],[10,22,3,0],[10,23,3,0,"_dependencyMap"],[10,37,3,0],[11,2,4,0],[12,0,5,0],[13,0,6,0],[14,0,7,0],[15,0,8,0],[16,2,9,0],[16,11,9,9,"usePermission"],[16,24,9,22,"usePermission"],[16,25,9,23,"methods"],[16,32,9,30],[16,34,9,32,"options"],[16,41,9,39],[16,43,9,41],[17,4,10,4],[17,10,10,10,"isMounted"],[17,19,10,19],[17,22,10,22],[17,26,10,22,"useRef"],[17,32,10,28],[17,33,10,28,"useRef"],[17,39,10,28],[17,41,10,29],[17,45,10,33],[17,46,10,34],[18,4,11,4],[18,10,11,10],[18,11,11,11,"status"],[18,17,11,17],[18,19,11,19,"setStatus"],[18,28,11,28],[18,29,11,29],[18,32,11,32],[18,36,11,32,"useState"],[18,42,11,40],[18,43,11,40,"useState"],[18,51,11,40],[18,53,11,41],[18,57,11,45],[18,58,11,46],[19,4,12,4],[19,10,12,10],[20,6,12,12,"get"],[20,9,12,15],[20,12,12,18],[20,16,12,22],[21,6,12,24,"request"],[21,13,12,31],[21,16,12,34],[21,21,12,39],[22,6,12,41],[22,9,12,44,"permissionOptions"],[23,4,12,62],[23,5,12,63],[23,8,12,66,"options"],[23,15,12,73],[23,19,12,77],[23,20,12,78],[23,21,12,79],[24,4,13,4],[24,10,13,10,"getPermission"],[24,23,13,23],[24,26,13,26],[24,30,13,26,"useCallback"],[24,36,13,37],[24,37,13,37,"useCallback"],[24,48,13,37],[24,50,13,38],[24,62,13,50],[25,6,14,8],[25,12,14,14,"response"],[25,20,14,22],[25,23,14,25],[25,29,14,31,"methods"],[25,36,14,38],[25,37,14,39,"getMethod"],[25,46,14,48],[25,47,14,49,"Object"],[25,53,14,55],[25,54,14,56,"keys"],[25,58,14,60],[25,59,14,61,"permissionOptions"],[25,76,14,78],[25,77,14,79],[25,78,14,80,"length"],[25,84,14,86],[25,87,14,89],[25,88,14,90],[25,91,14,93,"permissionOptions"],[25,108,14,110],[25,111,14,113,"undefined"],[25,120,14,122],[25,121,14,123],[26,6,15,8],[26,10,15,12,"isMounted"],[26,19,15,21],[26,20,15,22,"current"],[26,27,15,29],[26,29,16,12,"setStatus"],[26,38,16,21],[26,39,16,22,"response"],[26,47,16,30],[26,48,16,31],[27,6,17,8],[27,13,17,15,"response"],[27,21,17,23],[28,4,18,4],[28,5,18,5],[28,7,18,7],[28,8,18,8,"methods"],[28,15,18,15],[28,16,18,16,"getMethod"],[28,25,18,25],[28,26,18,26],[28,27,18,27],[29,4,19,4],[29,10,19,10,"requestPermission"],[29,27,19,27],[29,30,19,30],[29,34,19,30,"useCallback"],[29,40,19,41],[29,41,19,41,"useCallback"],[29,52,19,41],[29,54,19,42],[29,66,19,54],[30,6,20,8],[30,12,20,14,"response"],[30,20,20,22],[30,23,20,25],[30,29,20,31,"methods"],[30,36,20,38],[30,37,20,39,"requestMethod"],[30,50,20,52],[30,51,20,53,"Object"],[30,57,20,59],[30,58,20,60,"keys"],[30,62,20,64],[30,63,20,65,"permissionOptions"],[30,80,20,82],[30,81,20,83],[30,82,20,84,"length"],[30,88,20,90],[30,91,20,93],[30,92,20,94],[30,95,20,97,"permissionOptions"],[30,112,20,114],[30,115,20,117,"undefined"],[30,124,20,126],[30,125,20,127],[31,6,21,8],[31,10,21,12,"isMounted"],[31,19,21,21],[31,20,21,22,"current"],[31,27,21,29],[31,29,22,12,"setStatus"],[31,38,22,21],[31,39,22,22,"response"],[31,47,22,30],[31,48,22,31],[32,6,23,8],[32,13,23,15,"response"],[32,21,23,23],[33,4,24,4],[33,5,24,5],[33,7,24,7],[33,8,24,8,"methods"],[33,15,24,15],[33,16,24,16,"requestMethod"],[33,29,24,29],[33,30,24,30],[33,31,24,31],[34,4,25,4],[34,8,25,4,"useEffect"],[34,14,25,13],[34,15,25,13,"useEffect"],[34,24,25,13],[34,26,25,14],[34,35,25,23,"runMethods"],[34,45,25,33,"runMethods"],[34,46,25,33],[34,48,25,36],[35,6,26,8],[35,10,26,12,"request"],[35,17,26,19],[35,19,27,12,"requestPermission"],[35,36,27,29],[35,37,27,30],[35,38,27,31],[36,6,28,8],[36,10,28,12],[36,11,28,13,"request"],[36,18,28,20],[36,22,28,24,"get"],[36,25,28,27],[36,27,29,12,"getPermission"],[36,40,29,25],[36,41,29,26],[36,42,29,27],[37,4,30,4],[37,5,30,5],[37,7,30,7],[37,8,30,8,"get"],[37,11,30,11],[37,13,30,13,"request"],[37,20,30,20],[37,22,30,22,"requestPermission"],[37,39,30,39],[37,41,30,41,"getPermission"],[37,54,30,54],[37,55,30,55],[37,56,30,56],[38,4,31,4],[39,4,32,4],[39,8,32,4,"useEffect"],[39,14,32,13],[39,15,32,13,"useEffect"],[39,24,32,13],[39,26,32,14],[39,35,32,23,"didMount"],[39,43,32,31,"didMount"],[39,44,32,31],[39,46,32,34],[40,6,33,8,"isMounted"],[40,15,33,17],[40,16,33,18,"current"],[40,23,33,25],[40,26,33,28],[40,30,33,32],[41,6,34,8],[41,13,34,15],[41,19,34,21],[42,8,35,12,"isMounted"],[42,17,35,21],[42,18,35,22,"current"],[42,25,35,29],[42,28,35,32],[42,33,35,37],[43,6,36,8],[43,7,36,9],[44,4,37,4],[44,5,37,5],[44,7,37,7],[44,9,37,9],[44,10,37,10],[45,4,38,4],[45,11,38,11],[45,12,38,12,"status"],[45,18,38,18],[45,20,38,20,"requestPermission"],[45,37,38,37],[45,39,38,39,"getPermission"],[45,52,38,52],[45,53,38,53],[46,2,39,0],[47,2,40,0],[48,0,41,0],[49,0,42,0],[50,0,43,0],[51,2,44,7],[51,11,44,16,"createPermissionHook"],[51,31,44,36,"createPermissionHook"],[51,32,44,37,"methods"],[51,39,44,44],[51,41,44,46],[52,4,45,4],[52,11,45,12,"options"],[52,18,45,19],[52,22,45,24,"usePermission"],[52,35,45,37],[52,36,45,38,"methods"],[52,43,45,45],[52,45,45,47,"options"],[52,52,45,54],[52,53,45,55],[53,2,46,0],[54,0,46,1],[54,3]],"functionMap":{"names":["<global>","usePermission","getPermission","requestPermission","runMethods","didMount","<anonymous>","createPermissionHook"],"mappings":"AAA;ACQ;sCCI;KDK;0CEC;KFK;cGC;KHK;cIE;eCE;SDE;KJC;CDE;OOK;WDC,4CC;CPC"},"hasCjsExports":false},"type":"js/module"}]}