{"dependencies":[{"name":"./gesture","data":{"asyncType":null,"locs":[{"start":{"line":3,"column":0,"index":211},"end":{"line":3,"column":49,"index":260}}],"key":"rijS9WvIw33qqKul2343YfpqKYE="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.SimultaneousGesture = exports.ExclusiveGesture = exports.ComposedGesture = void 0;\n  var _gesture = require(_dependencyMap[0], \"./gesture\");\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n    return obj;\n  }\n  function extendRelation(currentRelation, extendWith) {\n    if (currentRelation === undefined) {\n      return [...extendWith];\n    } else {\n      return [...currentRelation, ...extendWith];\n    }\n  }\n  class ComposedGesture extends _gesture.Gesture {\n    constructor() {\n      super();\n      _defineProperty(this, \"gestures\", []);\n      _defineProperty(this, \"simultaneousGestures\", []);\n      _defineProperty(this, \"requireGesturesToFail\", []);\n      for (var _len = arguments.length, gestures = new Array(_len), _key = 0; _key < _len; _key++) {\n        gestures[_key] = arguments[_key];\n      }\n      this.gestures = gestures;\n    }\n    prepareSingleGesture(gesture, simultaneousGestures, requireGesturesToFail) {\n      if (gesture instanceof _gesture.BaseGesture) {\n        const newConfig = {\n          ...gesture.config\n        };\n        newConfig.simultaneousWith = extendRelation(newConfig.simultaneousWith, simultaneousGestures);\n        newConfig.requireToFail = extendRelation(newConfig.requireToFail, requireGesturesToFail);\n        gesture.config = newConfig;\n      } else if (gesture instanceof ComposedGesture) {\n        gesture.simultaneousGestures = simultaneousGestures;\n        gesture.requireGesturesToFail = requireGesturesToFail;\n        gesture.prepare();\n      }\n    }\n    prepare() {\n      for (const gesture of this.gestures) {\n        this.prepareSingleGesture(gesture, this.simultaneousGestures, this.requireGesturesToFail);\n      }\n    }\n    initialize() {\n      for (const gesture of this.gestures) {\n        gesture.initialize();\n      }\n    }\n    toGestureArray() {\n      return this.gestures.flatMap(gesture => gesture.toGestureArray());\n    }\n  }\n  exports.ComposedGesture = ComposedGesture;\n  class SimultaneousGesture extends ComposedGesture {\n    prepare() {\n      // this piece of magic works something like this:\n      // for every gesture in the array\n      const simultaneousArrays = this.gestures.map(gesture =>\n      // we take the array it's in\n      this.gestures // and make a copy without it\n      .filter(x => x !== gesture) // then we flatmap the result to get list of raw (not composed) gestures\n      // this way we don't make the gestures simultaneous with themselves, which is\n      // important when the gesture is `ExclusiveGesture` - we don't want to make\n      // exclusive gestures simultaneous\n      .flatMap(x => x.toGestureArray()));\n      for (let i = 0; i < this.gestures.length; i++) {\n        this.prepareSingleGesture(this.gestures[i], simultaneousArrays[i], this.requireGesturesToFail);\n      }\n    }\n  }\n  exports.SimultaneousGesture = SimultaneousGesture;\n  class ExclusiveGesture extends ComposedGesture {\n    prepare() {\n      // transforms the array of gestures into array of grouped raw (not composed) gestures\n      // i.e. [gesture1, gesture2, ComposedGesture(gesture3, gesture4)] -> [[gesture1], [gesture2], [gesture3, gesture4]]\n      const gestureArrays = this.gestures.map(gesture => gesture.toGestureArray());\n      let requireToFail = [];\n      for (let i = 0; i < this.gestures.length; i++) {\n        this.prepareSingleGesture(this.gestures[i], this.simultaneousGestures, this.requireGesturesToFail.concat(requireToFail)); // every group gets to wait for all groups before it\n\n        requireToFail = requireToFail.concat(gestureArrays[i]);\n      }\n    }\n  }\n  exports.ExclusiveGesture = ExclusiveGesture;\n});","lineCount":99,"map":[[6,2,3,0],[6,6,3,0,"_gesture"],[6,14,3,0],[6,17,3,0,"require"],[6,24,3,0],[6,25,3,0,"_dependencyMap"],[6,39,3,0],[7,2,1,0],[7,11,1,9,"_defineProperty"],[7,26,1,24,"_defineProperty"],[7,27,1,25,"obj"],[7,30,1,28],[7,32,1,30,"key"],[7,35,1,33],[7,37,1,35,"value"],[7,42,1,40],[7,44,1,42],[8,4,1,44],[8,8,1,48,"key"],[8,11,1,51],[8,15,1,55,"obj"],[8,18,1,58],[8,20,1,60],[9,6,1,62,"Object"],[9,12,1,68],[9,13,1,69,"defineProperty"],[9,27,1,83],[9,28,1,84,"obj"],[9,31,1,87],[9,33,1,89,"key"],[9,36,1,92],[9,38,1,94],[10,8,1,96,"value"],[10,13,1,101],[10,15,1,103,"value"],[10,20,1,108],[11,8,1,110,"enumerable"],[11,18,1,120],[11,20,1,122],[11,24,1,126],[12,8,1,128,"configurable"],[12,20,1,140],[12,22,1,142],[12,26,1,146],[13,8,1,148,"writable"],[13,16,1,156],[13,18,1,158],[14,6,1,163],[14,7,1,164],[14,8,1,165],[15,4,1,167],[15,5,1,168],[15,11,1,174],[16,6,1,176,"obj"],[16,9,1,179],[16,10,1,180,"key"],[16,13,1,183],[16,14,1,184],[16,17,1,187,"value"],[16,22,1,192],[17,4,1,194],[18,4,1,196],[18,11,1,203,"obj"],[18,14,1,206],[19,2,1,208],[20,2,5,0],[20,11,5,9,"extendRelation"],[20,25,5,23,"extendRelation"],[20,26,5,24,"currentRelation"],[20,41,5,39],[20,43,5,41,"extendWith"],[20,53,5,51],[20,55,5,53],[21,4,6,2],[21,8,6,6,"currentRelation"],[21,23,6,21],[21,28,6,26,"undefined"],[21,37,6,35],[21,39,6,37],[22,6,7,4],[22,13,7,11],[22,14,7,12],[22,17,7,15,"extendWith"],[22,27,7,25],[22,28,7,26],[23,4,8,2],[23,5,8,3],[23,11,8,9],[24,6,9,4],[24,13,9,11],[24,14,9,12],[24,17,9,15,"currentRelation"],[24,32,9,30],[24,34,9,32],[24,37,9,35,"extendWith"],[24,47,9,45],[24,48,9,46],[25,4,10,2],[26,2,11,0],[27,2,13,7],[27,8,13,13,"ComposedGesture"],[27,23,13,28],[27,32,13,37,"Gesture"],[27,48,13,44],[27,49,13,45],[28,4,14,2,"constructor"],[28,15,14,13,"constructor"],[28,16,14,13],[28,18,14,27],[29,6,15,4],[29,11,15,9],[29,12,15,10],[29,13,15,11],[30,6,17,4,"_defineProperty"],[30,21,17,19],[30,22,17,20],[30,26,17,24],[30,28,17,26],[30,38,17,36],[30,40,17,38],[30,42,17,40],[30,43,17,41],[31,6,19,4,"_defineProperty"],[31,21,19,19],[31,22,19,20],[31,26,19,24],[31,28,19,26],[31,50,19,48],[31,52,19,50],[31,54,19,52],[31,55,19,53],[32,6,21,4,"_defineProperty"],[32,21,21,19],[32,22,21,20],[32,26,21,24],[32,28,21,26],[32,51,21,49],[32,53,21,51],[32,55,21,53],[32,56,21,54],[33,6,21,55],[33,15,21,55,"_len"],[33,19,21,55],[33,22,21,55,"arguments"],[33,31,21,55],[33,32,21,55,"length"],[33,38,21,55],[33,40,14,17,"gestures"],[33,48,14,25],[33,55,14,25,"Array"],[33,60,14,25],[33,61,14,25,"_len"],[33,65,14,25],[33,68,14,25,"_key"],[33,72,14,25],[33,78,14,25,"_key"],[33,82,14,25],[33,85,14,25,"_len"],[33,89,14,25],[33,91,14,25,"_key"],[33,95,14,25],[34,8,14,17,"gestures"],[34,16,14,25],[34,17,14,25,"_key"],[34,21,14,25],[34,25,14,25,"arguments"],[34,34,14,25],[34,35,14,25,"_key"],[34,39,14,25],[35,6,14,25],[36,6,23,4],[36,10,23,8],[36,11,23,9,"gestures"],[36,19,23,17],[36,22,23,20,"gestures"],[36,30,23,28],[37,4,24,2],[38,4,26,2,"prepareSingleGesture"],[38,24,26,22,"prepareSingleGesture"],[38,25,26,23,"gesture"],[38,32,26,30],[38,34,26,32,"simultaneousGestures"],[38,54,26,52],[38,56,26,54,"requireGesturesToFail"],[38,77,26,75],[38,79,26,77],[39,6,27,4],[39,10,27,8,"gesture"],[39,17,27,15],[39,29,27,27,"BaseGesture"],[39,49,27,38],[39,51,27,40],[40,8,28,6],[40,14,28,12,"newConfig"],[40,23,28,21],[40,26,28,24],[41,10,28,26],[41,13,28,29,"gesture"],[41,20,28,36],[41,21,28,37,"config"],[42,8,29,6],[42,9,29,7],[43,8,30,6,"newConfig"],[43,17,30,15],[43,18,30,16,"simultaneousWith"],[43,34,30,32],[43,37,30,35,"extendRelation"],[43,51,30,49],[43,52,30,50,"newConfig"],[43,61,30,59],[43,62,30,60,"simultaneousWith"],[43,78,30,76],[43,80,30,78,"simultaneousGestures"],[43,100,30,98],[43,101,30,99],[44,8,31,6,"newConfig"],[44,17,31,15],[44,18,31,16,"requireToFail"],[44,31,31,29],[44,34,31,32,"extendRelation"],[44,48,31,46],[44,49,31,47,"newConfig"],[44,58,31,56],[44,59,31,57,"requireToFail"],[44,72,31,70],[44,74,31,72,"requireGesturesToFail"],[44,95,31,93],[44,96,31,94],[45,8,32,6,"gesture"],[45,15,32,13],[45,16,32,14,"config"],[45,22,32,20],[45,25,32,23,"newConfig"],[45,34,32,32],[46,6,33,4],[46,7,33,5],[46,13,33,11],[46,17,33,15,"gesture"],[46,24,33,22],[46,36,33,34,"ComposedGesture"],[46,51,33,49],[46,53,33,51],[47,8,34,6,"gesture"],[47,15,34,13],[47,16,34,14,"simultaneousGestures"],[47,36,34,34],[47,39,34,37,"simultaneousGestures"],[47,59,34,57],[48,8,35,6,"gesture"],[48,15,35,13],[48,16,35,14,"requireGesturesToFail"],[48,37,35,35],[48,40,35,38,"requireGesturesToFail"],[48,61,35,59],[49,8,36,6,"gesture"],[49,15,36,13],[49,16,36,14,"prepare"],[49,23,36,21],[49,24,36,22],[49,25,36,23],[50,6,37,4],[51,4,38,2],[52,4,40,2,"prepare"],[52,11,40,9,"prepare"],[52,12,40,9],[52,14,40,12],[53,6,41,4],[53,11,41,9],[53,17,41,15,"gesture"],[53,24,41,22],[53,28,41,26],[53,32,41,30],[53,33,41,31,"gestures"],[53,41,41,39],[53,43,41,41],[54,8,42,6],[54,12,42,10],[54,13,42,11,"prepareSingleGesture"],[54,33,42,31],[54,34,42,32,"gesture"],[54,41,42,39],[54,43,42,41],[54,47,42,45],[54,48,42,46,"simultaneousGestures"],[54,68,42,66],[54,70,42,68],[54,74,42,72],[54,75,42,73,"requireGesturesToFail"],[54,96,42,94],[54,97,42,95],[55,6,43,4],[56,4,44,2],[57,4,46,2,"initialize"],[57,14,46,12,"initialize"],[57,15,46,12],[57,17,46,15],[58,6,47,4],[58,11,47,9],[58,17,47,15,"gesture"],[58,24,47,22],[58,28,47,26],[58,32,47,30],[58,33,47,31,"gestures"],[58,41,47,39],[58,43,47,41],[59,8,48,6,"gesture"],[59,15,48,13],[59,16,48,14,"initialize"],[59,26,48,24],[59,27,48,25],[59,28,48,26],[60,6,49,4],[61,4,50,2],[62,4,52,2,"toGestureArray"],[62,18,52,16,"toGestureArray"],[62,19,52,16],[62,21,52,19],[63,6,53,4],[63,13,53,11],[63,17,53,15],[63,18,53,16,"gestures"],[63,26,53,24],[63,27,53,25,"flatMap"],[63,34,53,32],[63,35,53,33,"gesture"],[63,42,53,40],[63,46,53,44,"gesture"],[63,53,53,51],[63,54,53,52,"toGestureArray"],[63,68,53,66],[63,69,53,67],[63,70,53,68],[63,71,53,69],[64,4,54,2],[65,2,56,0],[66,2,56,1,"exports"],[66,9,56,1],[66,10,56,1,"ComposedGesture"],[66,25,56,1],[66,28,56,1,"ComposedGesture"],[66,43,56,1],[67,2,57,7],[67,8,57,13,"SimultaneousGesture"],[67,27,57,32],[67,36,57,41,"ComposedGesture"],[67,51,57,56],[67,52,57,57],[68,4,58,2,"prepare"],[68,11,58,9,"prepare"],[68,12,58,9],[68,14,58,12],[69,6,59,4],[70,6,60,4],[71,6,61,4],[71,12,61,10,"simultaneousArrays"],[71,30,61,28],[71,33,61,31],[71,37,61,35],[71,38,61,36,"gestures"],[71,46,61,44],[71,47,61,45,"map"],[71,50,61,48],[71,51,61,49,"gesture"],[71,58,61,56],[72,6,61,60],[73,6,62,4],[73,10,62,8],[73,11,62,9,"gestures"],[73,19,62,17],[73,20,62,18],[74,6,62,18],[74,7,63,5,"filter"],[74,13,63,11],[74,14,63,12,"x"],[74,15,63,13],[74,19,63,17,"x"],[74,20,63,18],[74,25,63,23,"gesture"],[74,32,63,30],[74,33,63,31],[74,34,63,32],[75,6,64,4],[76,6,65,4],[77,6,66,4],[78,6,66,4],[78,7,67,5,"flatMap"],[78,14,67,12],[78,15,67,13,"x"],[78,16,67,14],[78,20,67,18,"x"],[78,21,67,19],[78,22,67,20,"toGestureArray"],[78,36,67,34],[78,37,67,35],[78,38,67,36],[78,39,67,37],[78,40,67,38],[79,6,69,4],[79,11,69,9],[79,15,69,13,"i"],[79,16,69,14],[79,19,69,17],[79,20,69,18],[79,22,69,20,"i"],[79,23,69,21],[79,26,69,24],[79,30,69,28],[79,31,69,29,"gestures"],[79,39,69,37],[79,40,69,38,"length"],[79,46,69,44],[79,48,69,46,"i"],[79,49,69,47],[79,51,69,49],[79,53,69,51],[80,8,70,6],[80,12,70,10],[80,13,70,11,"prepareSingleGesture"],[80,33,70,31],[80,34,70,32],[80,38,70,36],[80,39,70,37,"gestures"],[80,47,70,45],[80,48,70,46,"i"],[80,49,70,47],[80,50,70,48],[80,52,70,50,"simultaneousArrays"],[80,70,70,68],[80,71,70,69,"i"],[80,72,70,70],[80,73,70,71],[80,75,70,73],[80,79,70,77],[80,80,70,78,"requireGesturesToFail"],[80,101,70,99],[80,102,70,100],[81,6,71,4],[82,4,72,2],[83,2,74,0],[84,2,74,1,"exports"],[84,9,74,1],[84,10,74,1,"SimultaneousGesture"],[84,29,74,1],[84,32,74,1,"SimultaneousGesture"],[84,51,74,1],[85,2,75,7],[85,8,75,13,"ExclusiveGesture"],[85,24,75,29],[85,33,75,38,"ComposedGesture"],[85,48,75,53],[85,49,75,54],[86,4,76,2,"prepare"],[86,11,76,9,"prepare"],[86,12,76,9],[86,14,76,12],[87,6,77,4],[88,6,78,4],[89,6,79,4],[89,12,79,10,"gestureArrays"],[89,25,79,23],[89,28,79,26],[89,32,79,30],[89,33,79,31,"gestures"],[89,41,79,39],[89,42,79,40,"map"],[89,45,79,43],[89,46,79,44,"gesture"],[89,53,79,51],[89,57,79,55,"gesture"],[89,64,79,62],[89,65,79,63,"toGestureArray"],[89,79,79,77],[89,80,79,78],[89,81,79,79],[89,82,79,80],[90,6,80,4],[90,10,80,8,"requireToFail"],[90,23,80,21],[90,26,80,24],[90,28,80,26],[91,6,82,4],[91,11,82,9],[91,15,82,13,"i"],[91,16,82,14],[91,19,82,17],[91,20,82,18],[91,22,82,20,"i"],[91,23,82,21],[91,26,82,24],[91,30,82,28],[91,31,82,29,"gestures"],[91,39,82,37],[91,40,82,38,"length"],[91,46,82,44],[91,48,82,46,"i"],[91,49,82,47],[91,51,82,49],[91,53,82,51],[92,8,83,6],[92,12,83,10],[92,13,83,11,"prepareSingleGesture"],[92,33,83,31],[92,34,83,32],[92,38,83,36],[92,39,83,37,"gestures"],[92,47,83,45],[92,48,83,46,"i"],[92,49,83,47],[92,50,83,48],[92,52,83,50],[92,56,83,54],[92,57,83,55,"simultaneousGestures"],[92,77,83,75],[92,79,83,77],[92,83,83,81],[92,84,83,82,"requireGesturesToFail"],[92,105,83,103],[92,106,83,104,"concat"],[92,112,83,110],[92,113,83,111,"requireToFail"],[92,126,83,124],[92,127,83,125],[92,128,83,126],[92,129,83,127],[92,130,83,128],[94,8,85,6,"requireToFail"],[94,21,85,19],[94,24,85,22,"requireToFail"],[94,37,85,35],[94,38,85,36,"concat"],[94,44,85,42],[94,45,85,43,"gestureArrays"],[94,58,85,56],[94,59,85,57,"i"],[94,60,85,58],[94,61,85,59],[94,62,85,60],[95,6,86,4],[96,4,87,2],[97,2,89,0],[98,2,89,1,"exports"],[98,9,89,1],[98,10,89,1,"ExclusiveGesture"],[98,26,89,1],[98,29,89,1,"ExclusiveGesture"],[98,45,89,1],[99,0,89,1]],"functionMap":{"names":["_defineProperty","<global>","extendRelation","ComposedGesture","ComposedGesture#constructor","ComposedGesture#prepareSingleGesture","ComposedGesture#prepare","ComposedGesture#initialize","ComposedGesture#toGestureArray","gestures.flatMap$argument_0","SimultaneousGesture","SimultaneousGesture#prepare","gestures.map$argument_0","gestures.filter$argument_0","gestures.filter.flatMap$argument_0","ExclusiveGesture","ExclusiveGesture#prepare"],"mappings":"AAA,iNC;ACI;CDM;OEE;ECC;GDU;EEE;GFY;EGE;GHI;EIE;GJI;EKE;iCCC,mCD;GLC;CFE;OSC;ECC;iDCG;YCE,kBD;aEI,uBF,CD;GDK;CTE;OcC;ECC;4CJG,mCI;GDQ;CdE"}},"type":"js/module"}]}