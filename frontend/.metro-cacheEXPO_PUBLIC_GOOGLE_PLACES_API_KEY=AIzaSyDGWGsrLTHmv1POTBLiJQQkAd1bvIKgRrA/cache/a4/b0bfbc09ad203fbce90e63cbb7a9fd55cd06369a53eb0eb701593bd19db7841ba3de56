{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":151,"column":57,"index":4671}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":151,"column":57,"index":4671}}],"key":"jM/HC84YZkM9kLoiCo0Bpf0Xr+w="}},{"name":"react-native-web/dist/exports/Alert","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":151,"column":57,"index":4671}}],"key":"twihKT6CAjsMXtvQfyNbKnYIhXk="}},{"name":"../utils/api","data":{"asyncType":null,"locs":[{"start":{"line":2,"column":0,"index":48},"end":{"line":2,"column":31,"index":79}}],"key":"Gcp0eSEA7Ihgcn4SJk7/sSqGWSo="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.rewardedAdManager = void 0;\n  var _Platform = _interopRequireDefault(require(_dependencyMap[1], \"react-native-web/dist/exports/Platform\"));\n  var _Alert = _interopRequireDefault(require(_dependencyMap[2], \"react-native-web/dist/exports/Alert\"));\n  var _api = _interopRequireDefault(require(_dependencyMap[3], \"../utils/api\"));\n  class RewardedAdManager {\n    isLoading = false;\n    currentUserId = '';\n    adReady = false;\n    rewardedInterstitial = null;\n    async loadRewardedAd(userId) {\n      this.currentUserId = userId;\n      this.adReady = false;\n\n      // AdMob disabled - requires proper setup with google-services.json\n      console.log('AdMob: Currently disabled. Requires proper configuration.');\n      return;\n\n      /* Commented out until AdMob is properly configured\n      // Only load ads on native platforms\n      if (Platform.OS === 'web') {\n        console.log('AdMob: Web platform not supported');\n        return;\n      }\n       try {\n        // Try to dynamically import AdMob module\n        const admobModule = await import('react-native-google-mobile-ads');\n        const { RewardedInterstitialAd, RewardedAdEventType, TestIds } = admobModule;\n        \n        const adUnitId = __DEV__ \n          ? TestIds.REWARDED_INTERSTITIAL \n          : Platform.select({\n              ios: 'ca-app-pub-3940256099942544/5224354917',\n              android: 'ca-app-pub-3940256099942544/5224354917',\n            }) || TestIds.REWARDED_INTERSTITIAL;\n         this.rewardedInterstitial = RewardedInterstitialAd.createForAdRequest(adUnitId, {\n          requestNonPersonalizedAdsOnly: false,\n          keywords: ['game', 'raffle', 'prize', 'reward'],\n        });\n         // Set up event listeners\n        const unsubscribeLoaded = this.rewardedInterstitial.addAdEventListener(\n          RewardedAdEventType.LOADED,\n          () => {\n            console.log('Rewarded ad loaded successfully');\n            this.adReady = true;\n          }\n        );\n         const unsubscribeEarned = this.rewardedInterstitial.addAdEventListener(\n          RewardedAdEventType.EARNED_REWARD,\n          async (reward: any) => {\n            console.log('User earned reward:', reward);\n            await this.handleRewardEarned(reward);\n          }\n        );\n         // Load the ad\n        await this.rewardedInterstitial.load();\n        \n      } catch (error: any) {\n        console.log('AdMob not available:', error?.message || 'Module not installed');\n        this.isLoading = false;\n        this.adReady = false;\n        // Silently fail - AdMob is optional\n      }\n      */\n    }\n    async showRewardedAd() {\n      if (_Platform.default.OS === 'web') {\n        _Alert.default.alert('Ads Not Available', 'Rewarded ads are only available on mobile devices. Install the app via Expo Go or production build to earn tickets!');\n        return;\n      }\n      if (!this.rewardedInterstitial || !this.adReady) {\n        _Alert.default.alert('Ad Not Ready', 'Please wait for the ad to load...');\n        return;\n      }\n      try {\n        await this.rewardedInterstitial.show();\n        this.adReady = false;\n        // Reload next ad\n        setTimeout(() => {\n          this.loadRewardedAd(this.currentUserId);\n        }, 1000);\n      } catch (error) {\n        console.error('Failed to show rewarded ad:', error);\n        _Alert.default.alert('Ad Error', 'Failed to show ad. Please try again.');\n      }\n    }\n    async handleRewardEarned(reward) {\n      try {\n        const transactionId = this.generateTransactionId();\n        const rewardEvent = {\n          userId: this.currentUserId,\n          rewardType: reward.type || 'tickets',\n          rewardAmount: reward.amount || 10,\n          transactionId,\n          timestamp: Date.now()\n        };\n\n        // Send reward to backend\n        const response = await _api.default.post('/api/rewards/verify-ad', rewardEvent);\n        if (response.data.success) {\n          _Alert.default.alert('ðŸŽ‰ Tickets Earned!', `You earned ${response.data.ticketsAwarded} tickets!\\nNew balance: ${response.data.newBalance} tickets`);\n\n          // Call reward callback\n          if (this.onRewardCallback) {\n            this.onRewardCallback(rewardEvent);\n          }\n        }\n      } catch (error) {\n        console.error('Failed to process reward:', error);\n        _Alert.default.alert('Error', 'Failed to credit tickets. Please contact support.');\n      }\n    }\n    isRewardedAdReady() {\n      return this.adReady && _Platform.default.OS !== 'web';\n    }\n    setRewardCallback(callback) {\n      this.onRewardCallback = callback;\n    }\n    generateTransactionId() {\n      return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n    }\n  }\n  const rewardedAdManager = exports.rewardedAdManager = new RewardedAdManager();\n});","lineCount":128,"map":[[9,2,2,0],[9,6,2,0,"_api"],[9,10,2,0],[9,13,2,0,"_interopRequireDefault"],[9,35,2,0],[9,36,2,0,"require"],[9,43,2,0],[9,44,2,0,"_dependencyMap"],[9,58,2,0],[10,2,12,0],[10,8,12,6,"RewardedAdManager"],[10,25,12,23],[10,26,12,24],[11,4,13,10,"isLoading"],[11,13,13,19],[11,16,13,22],[11,21,13,27],[12,4,14,10,"currentUserId"],[12,17,14,23],[12,20,14,34],[12,22,14,36],[13,4,16,10,"adReady"],[13,11,16,17],[13,14,16,20],[13,19,16,25],[14,4,17,10,"rewardedInterstitial"],[14,24,17,30],[14,27,17,38],[14,31,17,42],[15,4,19,2],[15,10,19,8,"loadRewardedAd"],[15,24,19,22,"loadRewardedAd"],[15,25,19,23,"userId"],[15,31,19,37],[15,33,19,54],[16,6,20,4],[16,10,20,8],[16,11,20,9,"currentUserId"],[16,24,20,22],[16,27,20,25,"userId"],[16,33,20,31],[17,6,21,4],[17,10,21,8],[17,11,21,9,"adReady"],[17,18,21,16],[17,21,21,19],[17,26,21,24],[19,6,23,4],[20,6,24,4,"console"],[20,13,24,11],[20,14,24,12,"log"],[20,17,24,15],[20,18,24,16],[20,77,24,75],[20,78,24,76],[21,6,25,4],[23,6,27,4],[24,0,28,0],[25,0,29,0],[26,0,30,0],[27,0,31,0],[28,0,32,0],[29,0,33,0],[30,0,34,0],[31,0,35,0],[32,0,36,0],[33,0,37,0],[34,0,38,0],[35,0,39,0],[36,0,40,0],[37,0,41,0],[38,0,42,0],[39,0,43,0],[40,0,44,0],[41,0,45,0],[42,0,46,0],[43,0,47,0],[44,0,48,0],[45,0,49,0],[46,0,50,0],[47,0,51,0],[48,0,52,0],[49,0,53,0],[50,0,54,0],[51,0,55,0],[52,0,56,0],[53,0,57,0],[54,0,58,0],[55,0,59,0],[56,0,60,0],[57,0,61,0],[58,0,62,0],[59,0,63,0],[60,0,64,0],[61,0,65,0],[62,0,66,0],[63,0,67,0],[64,0,68,0],[65,0,69,0],[66,0,70,0],[67,0,71,0],[68,0,72,0],[69,4,78,2],[70,4,80,2],[70,10,80,8,"showRewardedAd"],[70,24,80,22,"showRewardedAd"],[70,25,80,22],[70,27,80,40],[71,6,81,4],[71,10,81,8,"Platform"],[71,27,81,16],[71,28,81,17,"OS"],[71,30,81,19],[71,35,81,24],[71,40,81,29],[71,42,81,31],[72,8,82,6,"Alert"],[72,22,82,11],[72,23,82,12,"alert"],[72,28,82,17],[72,29,83,8],[72,48,83,27],[72,50,84,8],[72,167,85,6],[72,168,85,7],[73,8,86,6],[74,6,87,4],[75,6,89,4],[75,10,89,8],[75,11,89,9],[75,15,89,13],[75,16,89,14,"rewardedInterstitial"],[75,36,89,34],[75,40,89,38],[75,41,89,39],[75,45,89,43],[75,46,89,44,"adReady"],[75,53,89,51],[75,55,89,53],[76,8,90,6,"Alert"],[76,22,90,11],[76,23,90,12,"alert"],[76,28,90,17],[76,29,90,18],[76,43,90,32],[76,45,90,34],[76,80,90,69],[76,81,90,70],[77,8,91,6],[78,6,92,4],[79,6,94,4],[79,10,94,8],[80,8,95,6],[80,14,95,12],[80,18,95,16],[80,19,95,17,"rewardedInterstitial"],[80,39,95,37],[80,40,95,38,"show"],[80,44,95,42],[80,45,95,43],[80,46,95,44],[81,8,96,6],[81,12,96,10],[81,13,96,11,"adReady"],[81,20,96,18],[81,23,96,21],[81,28,96,26],[82,8,97,6],[83,8,98,6,"setTimeout"],[83,18,98,16],[83,19,98,17],[83,25,98,23],[84,10,99,8],[84,14,99,12],[84,15,99,13,"loadRewardedAd"],[84,29,99,27],[84,30,99,28],[84,34,99,32],[84,35,99,33,"currentUserId"],[84,48,99,46],[84,49,99,47],[85,8,100,6],[85,9,100,7],[85,11,100,9],[85,15,100,13],[85,16,100,14],[86,6,101,4],[86,7,101,5],[86,8,101,6],[86,15,101,13,"error"],[86,20,101,18],[86,22,101,20],[87,8,102,6,"console"],[87,15,102,13],[87,16,102,14,"error"],[87,21,102,19],[87,22,102,20],[87,51,102,49],[87,53,102,51,"error"],[87,58,102,56],[87,59,102,57],[88,8,103,6,"Alert"],[88,22,103,11],[88,23,103,12,"alert"],[88,28,103,17],[88,29,103,18],[88,39,103,28],[88,41,103,30],[88,79,103,68],[88,80,103,69],[89,6,104,4],[90,4,105,2],[91,4,107,2],[91,10,107,16,"handleRewardEarned"],[91,28,107,34,"handleRewardEarned"],[91,29,107,35,"reward"],[91,35,107,46],[91,37,107,63],[92,6,108,4],[92,10,108,8],[93,8,109,6],[93,14,109,12,"transactionId"],[93,27,109,25],[93,30,109,28],[93,34,109,32],[93,35,109,33,"generateTransactionId"],[93,56,109,54],[93,57,109,55],[93,58,109,56],[94,8,110,6],[94,14,110,12,"rewardEvent"],[94,25,110,36],[94,28,110,39],[95,10,111,8,"userId"],[95,16,111,14],[95,18,111,16],[95,22,111,20],[95,23,111,21,"currentUserId"],[95,36,111,34],[96,10,112,8,"rewardType"],[96,20,112,18],[96,22,112,20,"reward"],[96,28,112,26],[96,29,112,27,"type"],[96,33,112,31],[96,37,112,35],[96,46,112,44],[97,10,113,8,"rewardAmount"],[97,22,113,20],[97,24,113,22,"reward"],[97,30,113,28],[97,31,113,29,"amount"],[97,37,113,35],[97,41,113,39],[97,43,113,41],[98,10,114,8,"transactionId"],[98,23,114,21],[99,10,115,8,"timestamp"],[99,19,115,17],[99,21,115,19,"Date"],[99,25,115,23],[99,26,115,24,"now"],[99,29,115,27],[99,30,115,28],[100,8,116,6],[100,9,116,7],[102,8,118,6],[103,8,119,6],[103,14,119,12,"response"],[103,22,119,20],[103,25,119,23],[103,31,119,29,"api"],[103,43,119,32],[103,44,119,33,"post"],[103,48,119,37],[103,49,119,38],[103,73,119,62],[103,75,119,64,"rewardEvent"],[103,86,119,75],[103,87,119,76],[104,8,121,6],[104,12,121,10,"response"],[104,20,121,18],[104,21,121,19,"data"],[104,25,121,23],[104,26,121,24,"success"],[104,33,121,31],[104,35,121,33],[105,10,122,8,"Alert"],[105,24,122,13],[105,25,122,14,"alert"],[105,30,122,19],[105,31,123,10],[105,51,123,30],[105,53,124,10],[105,67,124,24,"response"],[105,75,124,32],[105,76,124,33,"data"],[105,80,124,37],[105,81,124,38,"ticketsAwarded"],[105,95,124,52],[105,122,124,79,"response"],[105,130,124,87],[105,131,124,88,"data"],[105,135,124,92],[105,136,124,93,"newBalance"],[105,146,124,103],[105,156,125,8],[105,157,125,9],[107,10,127,8],[108,10,128,8],[108,14,128,12],[108,18,128,16],[108,19,128,17,"onRewardCallback"],[108,35,128,33],[108,37,128,35],[109,12,129,10],[109,16,129,14],[109,17,129,15,"onRewardCallback"],[109,33,129,31],[109,34,129,32,"rewardEvent"],[109,45,129,43],[109,46,129,44],[110,10,130,8],[111,8,131,6],[112,6,132,4],[112,7,132,5],[112,8,132,6],[112,15,132,13,"error"],[112,20,132,23],[112,22,132,25],[113,8,133,6,"console"],[113,15,133,13],[113,16,133,14,"error"],[113,21,133,19],[113,22,133,20],[113,49,133,47],[113,51,133,49,"error"],[113,56,133,54],[113,57,133,55],[114,8,134,6,"Alert"],[114,22,134,11],[114,23,134,12,"alert"],[114,28,134,17],[114,29,134,18],[114,36,134,25],[114,38,134,27],[114,89,134,78],[114,90,134,79],[115,6,135,4],[116,4,136,2],[117,4,138,2,"isRewardedAdReady"],[117,21,138,19,"isRewardedAdReady"],[117,22,138,19],[117,24,138,31],[118,6,139,4],[118,13,139,11],[118,17,139,15],[118,18,139,16,"adReady"],[118,25,139,23],[118,29,139,27,"Platform"],[118,46,139,35],[118,47,139,36,"OS"],[118,49,139,38],[118,54,139,43],[118,59,139,48],[119,4,140,2],[120,4,142,2,"setRewardCallback"],[120,21,142,19,"setRewardCallback"],[120,22,142,20,"callback"],[120,30,142,59],[120,32,142,67],[121,6,143,4],[121,10,143,8],[121,11,143,9,"onRewardCallback"],[121,27,143,25],[121,30,143,28,"callback"],[121,38,143,36],[122,4,144,2],[123,4,146,10,"generateTransactionId"],[123,25,146,31,"generateTransactionId"],[123,26,146,31],[123,28,146,42],[124,6,147,4],[124,13,147,11],[124,16,147,14,"Date"],[124,20,147,18],[124,21,147,19,"now"],[124,24,147,22],[124,25,147,23],[124,26,147,24],[124,30,147,28,"Math"],[124,34,147,32],[124,35,147,33,"random"],[124,41,147,39],[124,42,147,40],[124,43,147,41],[124,44,147,42,"toString"],[124,52,147,50],[124,53,147,51],[124,55,147,53],[124,56,147,54],[124,57,147,55,"substr"],[124,63,147,61],[124,64,147,62],[124,65,147,63],[124,67,147,65],[124,68,147,66],[124,69,147,67],[124,71,147,69],[125,4,148,2],[126,2,149,0],[127,2,151,7],[127,8,151,13,"rewardedAdManager"],[127,25,151,30],[127,28,151,30,"exports"],[127,35,151,30],[127,36,151,30,"rewardedAdManager"],[127,53,151,30],[127,56,151,33],[127,60,151,37,"RewardedAdManager"],[127,77,151,54],[127,78,151,55],[127,79,151,56],[128,0,151,57]],"functionMap":{"names":["<global>","RewardedAdManager","loadRewardedAd","showRewardedAd","setTimeout$argument_0","handleRewardEarned","isRewardedAdReady","setRewardCallback","generateTransactionId"],"mappings":"AAA;ACW;ECO;GD2D;EEE;iBCkB;ODE;GFK;EIE;GJ6B;EKE;GLE;EME;GNE;EOE;GPE;CDC"}},"type":"js/module"}]}