{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":147,"column":57,"index":4551}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":147,"column":57,"index":4551}}],"key":"jM/HC84YZkM9kLoiCo0Bpf0Xr+w="}},{"name":"react-native-web/dist/exports/Alert","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":147,"column":57,"index":4551}}],"key":"twihKT6CAjsMXtvQfyNbKnYIhXk="}},{"name":"../utils/api","data":{"asyncType":null,"locs":[{"start":{"line":2,"column":0,"index":48},"end":{"line":2,"column":31,"index":79}}],"key":"Gcp0eSEA7Ihgcn4SJk7/sSqGWSo="}},{"name":"react-native-google-mobile-ads","data":{"asyncType":"async","locs":[{"start":{"line":31,"column":77,"index":837},"end":{"line":31,"column":117,"index":877}}],"key":"E1dyjL1KfbXdNtVcCWvGe0mCHUM=","isOptional":true}},{"name":"/app/frontend/node_modules/metro-runtime/src/modules/asyncRequire.js","data":{"asyncType":null,"locs":[{"start":{"line":31,"column":71,"index":831},"end":{"line":31,"column":117,"index":877}}],"key":"XnbNgra/dSfd0DFh0VfAF+SHEi8="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.rewardedAdManager = void 0;\n  var _Platform = _interopRequireDefault(require(_dependencyMap[1], \"react-native-web/dist/exports/Platform\"));\n  var _Alert = _interopRequireDefault(require(_dependencyMap[2], \"react-native-web/dist/exports/Alert\"));\n  var _api = _interopRequireDefault(require(_dependencyMap[3], \"../utils/api\"));\n  class RewardedAdManager {\n    isLoading = false;\n    currentUserId = '';\n    adReady = false;\n    rewardedInterstitial = null;\n    async loadRewardedAd(userId) {\n      this.currentUserId = userId;\n      this.adReady = false;\n\n      // Only load ads on native platforms\n      if (_Platform.default.OS === 'web') {\n        console.log('AdMob: Web platform not supported');\n        return;\n      }\n      try {\n        // Import AdMob module\n        const {\n          RewardedInterstitialAd,\n          RewardedAdEventType,\n          TestIds\n        } = await require(_dependencyMap[5], \"/app/frontend/node_modules/metro-runtime/src/modules/asyncRequire.js\")(_dependencyMap[4], _dependencyMap.paths, \"react-native-google-mobile-ads\");\n\n        // Use test ads in development, real ads in production\n        const adUnitId = __DEV__ ? TestIds.REWARDED_INTERSTITIAL : _Platform.default.select({\n          ios: 'ca-app-pub-3486145054830108/9341557600',\n          android: 'ca-app-pub-3486145054830108/3753903590'\n        }) || TestIds.REWARDED_INTERSTITIAL;\n        console.log('AdMob: Creating rewarded ad with unit ID:', adUnitId);\n        this.rewardedInterstitial = RewardedInterstitialAd.createForAdRequest(adUnitId, {\n          requestNonPersonalizedAdsOnly: false,\n          keywords: ['game', 'raffle', 'prize', 'reward']\n        });\n\n        // Set up event listeners\n        const unsubscribeLoaded = this.rewardedInterstitial.addAdEventListener(RewardedAdEventType.LOADED, () => {\n          console.log('AdMob: Rewarded ad loaded successfully');\n          this.adReady = true;\n        });\n        const unsubscribeEarned = this.rewardedInterstitial.addAdEventListener(RewardedAdEventType.EARNED_REWARD, async reward => {\n          console.log('AdMob: User earned reward:', reward);\n          await this.handleRewardEarned(reward);\n        });\n\n        // Load the ad\n        console.log('AdMob: Loading rewarded ad...');\n        await this.rewardedInterstitial.load();\n      } catch (error) {\n        console.error('AdMob initialization error:', error?.message || 'Module not installed');\n        this.isLoading = false;\n        this.adReady = false;\n      }\n    }\n    async showRewardedAd() {\n      if (_Platform.default.OS === 'web') {\n        _Alert.default.alert('Ads Not Available', 'Rewarded ads are only available on mobile devices. Install the app via Expo Go or production build to earn tickets!');\n        return;\n      }\n      if (!this.rewardedInterstitial || !this.adReady) {\n        _Alert.default.alert('Ad Not Ready', 'Please wait for the ad to load...');\n        return;\n      }\n      try {\n        await this.rewardedInterstitial.show();\n        this.adReady = false;\n        // Reload next ad\n        setTimeout(() => {\n          this.loadRewardedAd(this.currentUserId);\n        }, 1000);\n      } catch (error) {\n        console.error('Failed to show rewarded ad:', error);\n        _Alert.default.alert('Ad Error', 'Failed to show ad. Please try again.');\n      }\n    }\n    async handleRewardEarned(reward) {\n      try {\n        const transactionId = this.generateTransactionId();\n        const rewardEvent = {\n          userId: this.currentUserId,\n          rewardType: reward.type || 'tickets',\n          rewardAmount: reward.amount || 10,\n          transactionId,\n          timestamp: Date.now()\n        };\n\n        // Send reward to backend\n        const response = await _api.default.post('/api/rewards/verify-ad', rewardEvent);\n        if (response.data.success) {\n          _Alert.default.alert('ðŸŽ‰ Tickets Earned!', `You earned ${response.data.ticketsAwarded} tickets!\\nNew balance: ${response.data.newBalance} tickets`);\n\n          // Call reward callback\n          if (this.onRewardCallback) {\n            this.onRewardCallback(rewardEvent);\n          }\n        }\n      } catch (error) {\n        console.error('Failed to process reward:', error);\n        _Alert.default.alert('Error', 'Failed to credit tickets. Please contact support.');\n      }\n    }\n    isRewardedAdReady() {\n      return this.adReady && _Platform.default.OS !== 'web';\n    }\n    setRewardCallback(callback) {\n      this.onRewardCallback = callback;\n    }\n    generateTransactionId() {\n      return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n    }\n  }\n  const rewardedAdManager = exports.rewardedAdManager = new RewardedAdManager();\n});","lineCount":120,"map":[[9,2,2,0],[9,6,2,0,"_api"],[9,10,2,0],[9,13,2,0,"_interopRequireDefault"],[9,35,2,0],[9,36,2,0,"require"],[9,43,2,0],[9,44,2,0,"_dependencyMap"],[9,58,2,0],[10,2,12,0],[10,8,12,6,"RewardedAdManager"],[10,25,12,23],[10,26,12,24],[11,4,13,10,"isLoading"],[11,13,13,19],[11,16,13,22],[11,21,13,27],[12,4,14,10,"currentUserId"],[12,17,14,23],[12,20,14,34],[12,22,14,36],[13,4,16,10,"adReady"],[13,11,16,17],[13,14,16,20],[13,19,16,25],[14,4,17,10,"rewardedInterstitial"],[14,24,17,30],[14,27,17,38],[14,31,17,42],[15,4,19,2],[15,10,19,8,"loadRewardedAd"],[15,24,19,22,"loadRewardedAd"],[15,25,19,23,"userId"],[15,31,19,37],[15,33,19,54],[16,6,20,4],[16,10,20,8],[16,11,20,9,"currentUserId"],[16,24,20,22],[16,27,20,25,"userId"],[16,33,20,31],[17,6,21,4],[17,10,21,8],[17,11,21,9,"adReady"],[17,18,21,16],[17,21,21,19],[17,26,21,24],[19,6,23,4],[20,6,24,4],[20,10,24,8,"Platform"],[20,27,24,16],[20,28,24,17,"OS"],[20,30,24,19],[20,35,24,24],[20,40,24,29],[20,42,24,31],[21,8,25,6,"console"],[21,15,25,13],[21,16,25,14,"log"],[21,19,25,17],[21,20,25,18],[21,55,25,53],[21,56,25,54],[22,8,26,6],[23,6,27,4],[24,6,29,4],[24,10,29,8],[25,8,30,6],[26,8,31,6],[26,14,31,12],[27,10,31,14,"RewardedInterstitialAd"],[27,32,31,36],[28,10,31,38,"RewardedAdEventType"],[28,29,31,57],[29,10,31,59,"TestIds"],[30,8,31,67],[30,9,31,68],[30,12,31,71],[30,18,31,71,"require"],[30,25,31,71],[30,26,31,71,"_dependencyMap"],[30,40,31,71],[30,117,31,71,"_dependencyMap"],[30,131,31,71],[30,136,31,71,"_dependencyMap"],[30,150,31,71],[30,151,31,71,"paths"],[30,156,31,71],[30,191,31,117],[32,8,33,6],[33,8,34,6],[33,14,34,12,"adUnitId"],[33,22,34,20],[33,25,34,23,"__DEV__"],[33,32,34,30],[33,35,35,10,"TestIds"],[33,42,35,17],[33,43,35,18,"REWARDED_INTERSTITIAL"],[33,64,35,39],[33,67,36,10,"Platform"],[33,84,36,18],[33,85,36,19,"select"],[33,91,36,25],[33,92,36,26],[34,10,37,12,"ios"],[34,13,37,15],[34,15,37,17],[34,55,37,57],[35,10,38,12,"android"],[35,17,38,19],[35,19,38,21],[36,8,39,10],[36,9,39,11],[36,10,39,12],[36,14,39,16,"TestIds"],[36,21,39,23],[36,22,39,24,"REWARDED_INTERSTITIAL"],[36,43,39,45],[37,8,41,6,"console"],[37,15,41,13],[37,16,41,14,"log"],[37,19,41,17],[37,20,41,18],[37,63,41,61],[37,65,41,63,"adUnitId"],[37,73,41,71],[37,74,41,72],[38,8,43,6],[38,12,43,10],[38,13,43,11,"rewardedInterstitial"],[38,33,43,31],[38,36,43,34,"RewardedInterstitialAd"],[38,58,43,56],[38,59,43,57,"createForAdRequest"],[38,77,43,75],[38,78,43,76,"adUnitId"],[38,86,43,84],[38,88,43,86],[39,10,44,8,"requestNonPersonalizedAdsOnly"],[39,39,44,37],[39,41,44,39],[39,46,44,44],[40,10,45,8,"keywords"],[40,18,45,16],[40,20,45,18],[40,21,45,19],[40,27,45,25],[40,29,45,27],[40,37,45,35],[40,39,45,37],[40,46,45,44],[40,48,45,46],[40,56,45,54],[41,8,46,6],[41,9,46,7],[41,10,46,8],[43,8,48,6],[44,8,49,6],[44,14,49,12,"unsubscribeLoaded"],[44,31,49,29],[44,34,49,32],[44,38,49,36],[44,39,49,37,"rewardedInterstitial"],[44,59,49,57],[44,60,49,58,"addAdEventListener"],[44,78,49,76],[44,79,50,8,"RewardedAdEventType"],[44,98,50,27],[44,99,50,28,"LOADED"],[44,105,50,34],[44,107,51,8],[44,113,51,14],[45,10,52,10,"console"],[45,17,52,17],[45,18,52,18,"log"],[45,21,52,21],[45,22,52,22],[45,62,52,62],[45,63,52,63],[46,10,53,10],[46,14,53,14],[46,15,53,15,"adReady"],[46,22,53,22],[46,25,53,25],[46,29,53,29],[47,8,54,8],[47,9,55,6],[47,10,55,7],[48,8,57,6],[48,14,57,12,"unsubscribeEarned"],[48,31,57,29],[48,34,57,32],[48,38,57,36],[48,39,57,37,"rewardedInterstitial"],[48,59,57,57],[48,60,57,58,"addAdEventListener"],[48,78,57,76],[48,79,58,8,"RewardedAdEventType"],[48,98,58,27],[48,99,58,28,"EARNED_REWARD"],[48,112,58,41],[48,114,59,8],[48,120,59,15,"reward"],[48,126,59,26],[48,130,59,31],[49,10,60,10,"console"],[49,17,60,17],[49,18,60,18,"log"],[49,21,60,21],[49,22,60,22],[49,50,60,50],[49,52,60,52,"reward"],[49,58,60,58],[49,59,60,59],[50,10,61,10],[50,16,61,16],[50,20,61,20],[50,21,61,21,"handleRewardEarned"],[50,39,61,39],[50,40,61,40,"reward"],[50,46,61,46],[50,47,61,47],[51,8,62,8],[51,9,63,6],[51,10,63,7],[53,8,65,6],[54,8,66,6,"console"],[54,15,66,13],[54,16,66,14,"log"],[54,19,66,17],[54,20,66,18],[54,51,66,49],[54,52,66,50],[55,8,67,6],[55,14,67,12],[55,18,67,16],[55,19,67,17,"rewardedInterstitial"],[55,39,67,37],[55,40,67,38,"load"],[55,44,67,42],[55,45,67,43],[55,46,67,44],[56,6,69,4],[56,7,69,5],[56,8,69,6],[56,15,69,13,"error"],[56,20,69,23],[56,22,69,25],[57,8,70,6,"console"],[57,15,70,13],[57,16,70,14,"error"],[57,21,70,19],[57,22,70,20],[57,51,70,49],[57,53,70,51,"error"],[57,58,70,56],[57,60,70,58,"message"],[57,67,70,65],[57,71,70,69],[57,93,70,91],[57,94,70,92],[58,8,71,6],[58,12,71,10],[58,13,71,11,"isLoading"],[58,22,71,20],[58,25,71,23],[58,30,71,28],[59,8,72,6],[59,12,72,10],[59,13,72,11,"adReady"],[59,20,72,18],[59,23,72,21],[59,28,72,26],[60,6,73,4],[61,4,74,2],[62,4,76,2],[62,10,76,8,"showRewardedAd"],[62,24,76,22,"showRewardedAd"],[62,25,76,22],[62,27,76,40],[63,6,77,4],[63,10,77,8,"Platform"],[63,27,77,16],[63,28,77,17,"OS"],[63,30,77,19],[63,35,77,24],[63,40,77,29],[63,42,77,31],[64,8,78,6,"Alert"],[64,22,78,11],[64,23,78,12,"alert"],[64,28,78,17],[64,29,79,8],[64,48,79,27],[64,50,80,8],[64,167,81,6],[64,168,81,7],[65,8,82,6],[66,6,83,4],[67,6,85,4],[67,10,85,8],[67,11,85,9],[67,15,85,13],[67,16,85,14,"rewardedInterstitial"],[67,36,85,34],[67,40,85,38],[67,41,85,39],[67,45,85,43],[67,46,85,44,"adReady"],[67,53,85,51],[67,55,85,53],[68,8,86,6,"Alert"],[68,22,86,11],[68,23,86,12,"alert"],[68,28,86,17],[68,29,86,18],[68,43,86,32],[68,45,86,34],[68,80,86,69],[68,81,86,70],[69,8,87,6],[70,6,88,4],[71,6,90,4],[71,10,90,8],[72,8,91,6],[72,14,91,12],[72,18,91,16],[72,19,91,17,"rewardedInterstitial"],[72,39,91,37],[72,40,91,38,"show"],[72,44,91,42],[72,45,91,43],[72,46,91,44],[73,8,92,6],[73,12,92,10],[73,13,92,11,"adReady"],[73,20,92,18],[73,23,92,21],[73,28,92,26],[74,8,93,6],[75,8,94,6,"setTimeout"],[75,18,94,16],[75,19,94,17],[75,25,94,23],[76,10,95,8],[76,14,95,12],[76,15,95,13,"loadRewardedAd"],[76,29,95,27],[76,30,95,28],[76,34,95,32],[76,35,95,33,"currentUserId"],[76,48,95,46],[76,49,95,47],[77,8,96,6],[77,9,96,7],[77,11,96,9],[77,15,96,13],[77,16,96,14],[78,6,97,4],[78,7,97,5],[78,8,97,6],[78,15,97,13,"error"],[78,20,97,18],[78,22,97,20],[79,8,98,6,"console"],[79,15,98,13],[79,16,98,14,"error"],[79,21,98,19],[79,22,98,20],[79,51,98,49],[79,53,98,51,"error"],[79,58,98,56],[79,59,98,57],[80,8,99,6,"Alert"],[80,22,99,11],[80,23,99,12,"alert"],[80,28,99,17],[80,29,99,18],[80,39,99,28],[80,41,99,30],[80,79,99,68],[80,80,99,69],[81,6,100,4],[82,4,101,2],[83,4,103,2],[83,10,103,16,"handleRewardEarned"],[83,28,103,34,"handleRewardEarned"],[83,29,103,35,"reward"],[83,35,103,46],[83,37,103,63],[84,6,104,4],[84,10,104,8],[85,8,105,6],[85,14,105,12,"transactionId"],[85,27,105,25],[85,30,105,28],[85,34,105,32],[85,35,105,33,"generateTransactionId"],[85,56,105,54],[85,57,105,55],[85,58,105,56],[86,8,106,6],[86,14,106,12,"rewardEvent"],[86,25,106,36],[86,28,106,39],[87,10,107,8,"userId"],[87,16,107,14],[87,18,107,16],[87,22,107,20],[87,23,107,21,"currentUserId"],[87,36,107,34],[88,10,108,8,"rewardType"],[88,20,108,18],[88,22,108,20,"reward"],[88,28,108,26],[88,29,108,27,"type"],[88,33,108,31],[88,37,108,35],[88,46,108,44],[89,10,109,8,"rewardAmount"],[89,22,109,20],[89,24,109,22,"reward"],[89,30,109,28],[89,31,109,29,"amount"],[89,37,109,35],[89,41,109,39],[89,43,109,41],[90,10,110,8,"transactionId"],[90,23,110,21],[91,10,111,8,"timestamp"],[91,19,111,17],[91,21,111,19,"Date"],[91,25,111,23],[91,26,111,24,"now"],[91,29,111,27],[91,30,111,28],[92,8,112,6],[92,9,112,7],[94,8,114,6],[95,8,115,6],[95,14,115,12,"response"],[95,22,115,20],[95,25,115,23],[95,31,115,29,"api"],[95,43,115,32],[95,44,115,33,"post"],[95,48,115,37],[95,49,115,38],[95,73,115,62],[95,75,115,64,"rewardEvent"],[95,86,115,75],[95,87,115,76],[96,8,117,6],[96,12,117,10,"response"],[96,20,117,18],[96,21,117,19,"data"],[96,25,117,23],[96,26,117,24,"success"],[96,33,117,31],[96,35,117,33],[97,10,118,8,"Alert"],[97,24,118,13],[97,25,118,14,"alert"],[97,30,118,19],[97,31,119,10],[97,51,119,30],[97,53,120,10],[97,67,120,24,"response"],[97,75,120,32],[97,76,120,33,"data"],[97,80,120,37],[97,81,120,38,"ticketsAwarded"],[97,95,120,52],[97,122,120,79,"response"],[97,130,120,87],[97,131,120,88,"data"],[97,135,120,92],[97,136,120,93,"newBalance"],[97,146,120,103],[97,156,121,8],[97,157,121,9],[99,10,123,8],[100,10,124,8],[100,14,124,12],[100,18,124,16],[100,19,124,17,"onRewardCallback"],[100,35,124,33],[100,37,124,35],[101,12,125,10],[101,16,125,14],[101,17,125,15,"onRewardCallback"],[101,33,125,31],[101,34,125,32,"rewardEvent"],[101,45,125,43],[101,46,125,44],[102,10,126,8],[103,8,127,6],[104,6,128,4],[104,7,128,5],[104,8,128,6],[104,15,128,13,"error"],[104,20,128,23],[104,22,128,25],[105,8,129,6,"console"],[105,15,129,13],[105,16,129,14,"error"],[105,21,129,19],[105,22,129,20],[105,49,129,47],[105,51,129,49,"error"],[105,56,129,54],[105,57,129,55],[106,8,130,6,"Alert"],[106,22,130,11],[106,23,130,12,"alert"],[106,28,130,17],[106,29,130,18],[106,36,130,25],[106,38,130,27],[106,89,130,78],[106,90,130,79],[107,6,131,4],[108,4,132,2],[109,4,134,2,"isRewardedAdReady"],[109,21,134,19,"isRewardedAdReady"],[109,22,134,19],[109,24,134,31],[110,6,135,4],[110,13,135,11],[110,17,135,15],[110,18,135,16,"adReady"],[110,25,135,23],[110,29,135,27,"Platform"],[110,46,135,35],[110,47,135,36,"OS"],[110,49,135,38],[110,54,135,43],[110,59,135,48],[111,4,136,2],[112,4,138,2,"setRewardCallback"],[112,21,138,19,"setRewardCallback"],[112,22,138,20,"callback"],[112,30,138,59],[112,32,138,67],[113,6,139,4],[113,10,139,8],[113,11,139,9,"onRewardCallback"],[113,27,139,25],[113,30,139,28,"callback"],[113,38,139,36],[114,4,140,2],[115,4,142,10,"generateTransactionId"],[115,25,142,31,"generateTransactionId"],[115,26,142,31],[115,28,142,42],[116,6,143,4],[116,13,143,11],[116,16,143,14,"Date"],[116,20,143,18],[116,21,143,19,"now"],[116,24,143,22],[116,25,143,23],[116,26,143,24],[116,30,143,28,"Math"],[116,34,143,32],[116,35,143,33,"random"],[116,41,143,39],[116,42,143,40],[116,43,143,41],[116,44,143,42,"toString"],[116,52,143,50],[116,53,143,51],[116,55,143,53],[116,56,143,54],[116,57,143,55,"substr"],[116,63,143,61],[116,64,143,62],[116,65,143,63],[116,67,143,65],[116,68,143,66],[116,69,143,67],[116,71,143,69],[117,4,144,2],[118,2,145,0],[119,2,147,7],[119,8,147,13,"rewardedAdManager"],[119,25,147,30],[119,28,147,30,"exports"],[119,35,147,30],[119,36,147,30,"rewardedAdManager"],[119,53,147,30],[119,56,147,33],[119,60,147,37,"RewardedAdManager"],[119,77,147,54],[119,78,147,55],[119,79,147,56],[120,0,147,57]],"functionMap":{"names":["<global>","RewardedAdManager","loadRewardedAd","rewardedInterstitial.addAdEventListener$argument_1","showRewardedAd","setTimeout$argument_0","handleRewardEarned","isRewardedAdReady","setRewardCallback","generateTransactionId"],"mappings":"AAA;ACW;ECO;QCgC;SDG;QCK;SDG;GDY;EGE;iBCkB;ODE;GHK;EKE;GL6B;EME;GNE;EOE;GPE;EQE;GRE;CDC"}},"type":"js/module"}]}