{"dependencies":[{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Alert","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"PEUC6jrQVoAGZ2qYkvimljMOyJI=","exportNames":["*"],"imports":1}},{"name":"../utils/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":48},"end":{"line":2,"column":31,"index":79}}],"key":"XoJ+jbKCrEi38eKczMqtlbk+TCk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"rewardedAdManager\", {\n    enumerable: true,\n    get: function () {\n      return rewardedAdManager;\n    }\n  });\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[0], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _reactNativeWebDistExportsAlert = require(_dependencyMap[1], \"react-native-web/dist/exports/Alert\");\n  var Alert = _interopDefault(_reactNativeWebDistExportsAlert);\n  var _utilsApi = require(_dependencyMap[2], \"../utils/api\");\n  var api = _interopDefault(_utilsApi);\n  class RewardedAdManager {\n    isLoading = false;\n    currentUserId = '';\n    adReady = false;\n    rewardedInterstitial = null;\n    async loadRewardedAd(userId) {\n      this.currentUserId = userId;\n      this.adReady = false;\n\n      // AdMob disabled - requires proper setup with google-services.json\n      console.log('AdMob: Currently disabled. Requires proper configuration.');\n      return;\n\n      /* Commented out until AdMob is properly configured\n      // Only load ads on native platforms\n      if (Platform.OS === 'web') {\n        console.log('AdMob: Web platform not supported');\n        return;\n      }\n       try {\n        // Try to dynamically import AdMob module\n        const admobModule = await import('react-native-google-mobile-ads');\n        const { RewardedInterstitialAd, RewardedAdEventType, TestIds } = admobModule;\n        \n        const adUnitId = __DEV__ \n          ? TestIds.REWARDED_INTERSTITIAL \n          : Platform.select({\n              ios: 'ca-app-pub-3940256099942544/5224354917',\n              android: 'ca-app-pub-3940256099942544/5224354917',\n            }) || TestIds.REWARDED_INTERSTITIAL;\n         this.rewardedInterstitial = RewardedInterstitialAd.createForAdRequest(adUnitId, {\n          requestNonPersonalizedAdsOnly: false,\n          keywords: ['game', 'raffle', 'prize', 'reward'],\n        });\n         // Set up event listeners\n        const unsubscribeLoaded = this.rewardedInterstitial.addAdEventListener(\n          RewardedAdEventType.LOADED,\n          () => {\n            console.log('Rewarded ad loaded successfully');\n            this.adReady = true;\n          }\n        );\n         const unsubscribeEarned = this.rewardedInterstitial.addAdEventListener(\n          RewardedAdEventType.EARNED_REWARD,\n          async (reward: any) => {\n            console.log('User earned reward:', reward);\n            await this.handleRewardEarned(reward);\n          }\n        );\n         // Load the ad\n        await this.rewardedInterstitial.load();\n        \n      } catch (error: any) {\n        console.log('AdMob not available:', error?.message || 'Module not installed');\n        this.isLoading = false;\n        this.adReady = false;\n        // Silently fail - AdMob is optional\n      }\n      */\n    }\n    async showRewardedAd() {\n      if (Platform.default.OS === 'web') {\n        Alert.default.alert('Ads Not Available', 'Rewarded ads are only available on mobile devices. Install the app via Expo Go or production build to earn tickets!');\n        return;\n      }\n      if (!this.rewardedInterstitial || !this.adReady) {\n        Alert.default.alert('Ad Not Ready', 'Please wait for the ad to load...');\n        return;\n      }\n      try {\n        await this.rewardedInterstitial.show();\n        this.adReady = false;\n        // Reload next ad\n        setTimeout(() => {\n          this.loadRewardedAd(this.currentUserId);\n        }, 1000);\n      } catch (error) {\n        console.error('Failed to show rewarded ad:', error);\n        Alert.default.alert('Ad Error', 'Failed to show ad. Please try again.');\n      }\n    }\n    async handleRewardEarned(reward) {\n      try {\n        const transactionId = this.generateTransactionId();\n        const rewardEvent = {\n          userId: this.currentUserId,\n          rewardType: reward.type || 'tickets',\n          rewardAmount: reward.amount || 10,\n          transactionId,\n          timestamp: Date.now()\n        };\n\n        // Send reward to backend\n        const response = await api.default.post('/api/rewards/verify-ad', rewardEvent);\n        if (response.data.success) {\n          Alert.default.alert('ðŸŽ‰ Tickets Earned!', `You earned ${response.data.ticketsAwarded} tickets!\\nNew balance: ${response.data.newBalance} tickets`);\n\n          // Call reward callback\n          if (this.onRewardCallback) {\n            this.onRewardCallback(rewardEvent);\n          }\n        }\n      } catch (error) {\n        console.error('Failed to process reward:', error);\n        Alert.default.alert('Error', 'Failed to credit tickets. Please contact support.');\n      }\n    }\n    isRewardedAdReady() {\n      return this.adReady && Platform.default.OS !== 'web';\n    }\n    setRewardCallback(callback) {\n      this.onRewardCallback = callback;\n    }\n    generateTransactionId() {\n      return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n    }\n  }\n  const rewardedAdManager = new RewardedAdManager();\n});","lineCount":142,"map":[[12,2,151,0,"Object"],[12,8,151,0],[12,9,151,0,"defineProperty"],[12,23,151,0],[12,24,151,0,"exports"],[12,31,151,0],[13,4,151,0,"enumerable"],[13,14,151,0],[14,4,151,0,"get"],[14,7,151,0],[14,18,151,0,"get"],[14,19,151,0],[15,6,151,0],[15,13,151,0,"rewardedAdManager"],[15,30,151,0],[16,4,151,0],[17,2,151,0],[18,2,151,57],[18,6,151,57,"_reactNativeWebDistExportsPlatform"],[18,40,151,57],[18,43,151,57,"require"],[18,50,151,57],[18,51,151,57,"_dependencyMap"],[18,65,151,57],[19,2,151,57],[19,6,151,57,"Platform"],[19,14,151,57],[19,17,151,57,"_interopDefault"],[19,32,151,57],[19,33,151,57,"_reactNativeWebDistExportsPlatform"],[19,67,151,57],[20,2,151,57],[20,6,151,57,"_reactNativeWebDistExportsAlert"],[20,37,151,57],[20,40,151,57,"require"],[20,47,151,57],[20,48,151,57,"_dependencyMap"],[20,62,151,57],[21,2,151,57],[21,6,151,57,"Alert"],[21,11,151,57],[21,14,151,57,"_interopDefault"],[21,29,151,57],[21,30,151,57,"_reactNativeWebDistExportsAlert"],[21,61,151,57],[22,2,2,0],[22,6,2,0,"_utilsApi"],[22,15,2,0],[22,18,2,0,"require"],[22,25,2,0],[22,26,2,0,"_dependencyMap"],[22,40,2,0],[23,2,2,0],[23,6,2,0,"api"],[23,9,2,0],[23,12,2,0,"_interopDefault"],[23,27,2,0],[23,28,2,0,"_utilsApi"],[23,37,2,0],[24,2,12,0],[24,8,12,6,"RewardedAdManager"],[24,25,12,23],[24,26,12,24],[25,4,13,10,"isLoading"],[25,13,13,19],[25,16,13,22],[25,21,13,27],[26,4,14,10,"currentUserId"],[26,17,14,23],[26,20,14,34],[26,22,14,36],[27,4,16,10,"adReady"],[27,11,16,17],[27,14,16,20],[27,19,16,25],[28,4,17,10,"rewardedInterstitial"],[28,24,17,30],[28,27,17,38],[28,31,17,42],[29,4,19,2],[29,10,19,8,"loadRewardedAd"],[29,24,19,22,"loadRewardedAd"],[29,25,19,23,"userId"],[29,31,19,37],[29,33,19,54],[30,6,20,4],[30,10,20,8],[30,11,20,9,"currentUserId"],[30,24,20,22],[30,27,20,25,"userId"],[30,33,20,31],[31,6,21,4],[31,10,21,8],[31,11,21,9,"adReady"],[31,18,21,16],[31,21,21,19],[31,26,21,24],[33,6,23,4],[34,6,24,4,"console"],[34,13,24,11],[34,14,24,12,"log"],[34,17,24,15],[34,18,24,16],[34,77,24,75],[34,78,24,76],[35,6,25,4],[37,6,27,4],[38,0,28,0],[39,0,29,0],[40,0,30,0],[41,0,31,0],[42,0,32,0],[43,0,33,0],[44,0,34,0],[45,0,35,0],[46,0,36,0],[47,0,37,0],[48,0,38,0],[49,0,39,0],[50,0,40,0],[51,0,41,0],[52,0,42,0],[53,0,43,0],[54,0,44,0],[55,0,45,0],[56,0,46,0],[57,0,47,0],[58,0,48,0],[59,0,49,0],[60,0,50,0],[61,0,51,0],[62,0,52,0],[63,0,53,0],[64,0,54,0],[65,0,55,0],[66,0,56,0],[67,0,57,0],[68,0,58,0],[69,0,59,0],[70,0,60,0],[71,0,61,0],[72,0,62,0],[73,0,63,0],[74,0,64,0],[75,0,65,0],[76,0,66,0],[77,0,67,0],[78,0,68,0],[79,0,69,0],[80,0,70,0],[81,0,71,0],[82,0,72,0],[83,4,78,2],[84,4,80,2],[84,10,80,8,"showRewardedAd"],[84,24,80,22,"showRewardedAd"],[84,25,80,22],[84,27,80,40],[85,6,81,4],[85,10,81,8,"Platform"],[85,18,81,16],[85,19,81,16,"default"],[85,26,81,16],[85,27,81,17,"OS"],[85,29,81,19],[85,34,81,24],[85,39,81,29],[85,41,81,31],[86,8,82,6,"Alert"],[86,13,82,11],[86,14,82,11,"default"],[86,21,82,11],[86,22,82,12,"alert"],[86,27,82,17],[86,28,83,8],[86,47,83,27],[86,49,84,8],[86,166,85,6],[86,167,85,7],[87,8,86,6],[88,6,87,4],[89,6,89,4],[89,10,89,8],[89,11,89,9],[89,15,89,13],[89,16,89,14,"rewardedInterstitial"],[89,36,89,34],[89,40,89,38],[89,41,89,39],[89,45,89,43],[89,46,89,44,"adReady"],[89,53,89,51],[89,55,89,53],[90,8,90,6,"Alert"],[90,13,90,11],[90,14,90,11,"default"],[90,21,90,11],[90,22,90,12,"alert"],[90,27,90,17],[90,28,90,18],[90,42,90,32],[90,44,90,34],[90,79,90,69],[90,80,90,70],[91,8,91,6],[92,6,92,4],[93,6,94,4],[93,10,94,8],[94,8,95,6],[94,14,95,12],[94,18,95,16],[94,19,95,17,"rewardedInterstitial"],[94,39,95,37],[94,40,95,38,"show"],[94,44,95,42],[94,45,95,43],[94,46,95,44],[95,8,96,6],[95,12,96,10],[95,13,96,11,"adReady"],[95,20,96,18],[95,23,96,21],[95,28,96,26],[96,8,97,6],[97,8,98,6,"setTimeout"],[97,18,98,16],[97,19,98,17],[97,25,98,23],[98,10,99,8],[98,14,99,12],[98,15,99,13,"loadRewardedAd"],[98,29,99,27],[98,30,99,28],[98,34,99,32],[98,35,99,33,"currentUserId"],[98,48,99,46],[98,49,99,47],[99,8,100,6],[99,9,100,7],[99,11,100,9],[99,15,100,13],[99,16,100,14],[100,6,101,4],[100,7,101,5],[100,8,101,6],[100,15,101,13,"error"],[100,20,101,18],[100,22,101,20],[101,8,102,6,"console"],[101,15,102,13],[101,16,102,14,"error"],[101,21,102,19],[101,22,102,20],[101,51,102,49],[101,53,102,51,"error"],[101,58,102,56],[101,59,102,57],[102,8,103,6,"Alert"],[102,13,103,11],[102,14,103,11,"default"],[102,21,103,11],[102,22,103,12,"alert"],[102,27,103,17],[102,28,103,18],[102,38,103,28],[102,40,103,30],[102,78,103,68],[102,79,103,69],[103,6,104,4],[104,4,105,2],[105,4,107,2],[105,10,107,16,"handleRewardEarned"],[105,28,107,34,"handleRewardEarned"],[105,29,107,35,"reward"],[105,35,107,46],[105,37,107,63],[106,6,108,4],[106,10,108,8],[107,8,109,6],[107,14,109,12,"transactionId"],[107,27,109,25],[107,30,109,28],[107,34,109,32],[107,35,109,33,"generateTransactionId"],[107,56,109,54],[107,57,109,55],[107,58,109,56],[108,8,110,6],[108,14,110,12,"rewardEvent"],[108,25,110,36],[108,28,110,39],[109,10,111,8,"userId"],[109,16,111,14],[109,18,111,16],[109,22,111,20],[109,23,111,21,"currentUserId"],[109,36,111,34],[110,10,112,8,"rewardType"],[110,20,112,18],[110,22,112,20,"reward"],[110,28,112,26],[110,29,112,27,"type"],[110,33,112,31],[110,37,112,35],[110,46,112,44],[111,10,113,8,"rewardAmount"],[111,22,113,20],[111,24,113,22,"reward"],[111,30,113,28],[111,31,113,29,"amount"],[111,37,113,35],[111,41,113,39],[111,43,113,41],[112,10,114,8,"transactionId"],[112,23,114,21],[113,10,115,8,"timestamp"],[113,19,115,17],[113,21,115,19,"Date"],[113,25,115,23],[113,26,115,24,"now"],[113,29,115,27],[113,30,115,28],[114,8,116,6],[114,9,116,7],[116,8,118,6],[117,8,119,6],[117,14,119,12,"response"],[117,22,119,20],[117,25,119,23],[117,31,119,29,"api"],[117,34,119,32],[117,35,119,32,"default"],[117,42,119,32],[117,43,119,33,"post"],[117,47,119,37],[117,48,119,38],[117,72,119,62],[117,74,119,64,"rewardEvent"],[117,85,119,75],[117,86,119,76],[118,8,121,6],[118,12,121,10,"response"],[118,20,121,18],[118,21,121,19,"data"],[118,25,121,23],[118,26,121,24,"success"],[118,33,121,31],[118,35,121,33],[119,10,122,8,"Alert"],[119,15,122,13],[119,16,122,13,"default"],[119,23,122,13],[119,24,122,14,"alert"],[119,29,122,19],[119,30,123,10],[119,50,123,30],[119,52,124,10],[119,66,124,24,"response"],[119,74,124,32],[119,75,124,33,"data"],[119,79,124,37],[119,80,124,38,"ticketsAwarded"],[119,94,124,52],[119,121,124,79,"response"],[119,129,124,87],[119,130,124,88,"data"],[119,134,124,92],[119,135,124,93,"newBalance"],[119,145,124,103],[119,155,125,8],[119,156,125,9],[121,10,127,8],[122,10,128,8],[122,14,128,12],[122,18,128,16],[122,19,128,17,"onRewardCallback"],[122,35,128,33],[122,37,128,35],[123,12,129,10],[123,16,129,14],[123,17,129,15,"onRewardCallback"],[123,33,129,31],[123,34,129,32,"rewardEvent"],[123,45,129,43],[123,46,129,44],[124,10,130,8],[125,8,131,6],[126,6,132,4],[126,7,132,5],[126,8,132,6],[126,15,132,13,"error"],[126,20,132,23],[126,22,132,25],[127,8,133,6,"console"],[127,15,133,13],[127,16,133,14,"error"],[127,21,133,19],[127,22,133,20],[127,49,133,47],[127,51,133,49,"error"],[127,56,133,54],[127,57,133,55],[128,8,134,6,"Alert"],[128,13,134,11],[128,14,134,11,"default"],[128,21,134,11],[128,22,134,12,"alert"],[128,27,134,17],[128,28,134,18],[128,35,134,25],[128,37,134,27],[128,88,134,78],[128,89,134,79],[129,6,135,4],[130,4,136,2],[131,4,138,2,"isRewardedAdReady"],[131,21,138,19,"isRewardedAdReady"],[131,22,138,19],[131,24,138,31],[132,6,139,4],[132,13,139,11],[132,17,139,15],[132,18,139,16,"adReady"],[132,25,139,23],[132,29,139,27,"Platform"],[132,37,139,35],[132,38,139,35,"default"],[132,45,139,35],[132,46,139,36,"OS"],[132,48,139,38],[132,53,139,43],[132,58,139,48],[133,4,140,2],[134,4,142,2,"setRewardCallback"],[134,21,142,19,"setRewardCallback"],[134,22,142,20,"callback"],[134,30,142,59],[134,32,142,67],[135,6,143,4],[135,10,143,8],[135,11,143,9,"onRewardCallback"],[135,27,143,25],[135,30,143,28,"callback"],[135,38,143,36],[136,4,144,2],[137,4,146,10,"generateTransactionId"],[137,25,146,31,"generateTransactionId"],[137,26,146,31],[137,28,146,42],[138,6,147,4],[138,13,147,11],[138,16,147,14,"Date"],[138,20,147,18],[138,21,147,19,"now"],[138,24,147,22],[138,25,147,23],[138,26,147,24],[138,30,147,28,"Math"],[138,34,147,32],[138,35,147,33,"random"],[138,41,147,39],[138,42,147,40],[138,43,147,41],[138,44,147,42,"toString"],[138,52,147,50],[138,53,147,51],[138,55,147,53],[138,56,147,54],[138,57,147,55,"substr"],[138,63,147,61],[138,64,147,62],[138,65,147,63],[138,67,147,65],[138,68,147,66],[138,69,147,67],[138,71,147,69],[139,4,148,2],[140,2,149,0],[141,2,151,7],[141,8,151,13,"rewardedAdManager"],[141,25,151,30],[141,28,151,33],[141,32,151,37,"RewardedAdManager"],[141,49,151,54],[141,50,151,55],[141,51,151,56],[142,0,151,57],[142,3]],"functionMap":{"names":["<global>","RewardedAdManager","loadRewardedAd","showRewardedAd","setTimeout$argument_0","handleRewardEarned","isRewardedAdReady","setRewardCallback","generateTransactionId"],"mappings":"AAA;ACW;ECO;GD2D;EEE;iBCkB;ODE;GFK;EIE;GJ6B;EKE;GLE;EME;GNE;EOE;GPE;CDC"},"hasCjsExports":false},"type":"js/module"}]}