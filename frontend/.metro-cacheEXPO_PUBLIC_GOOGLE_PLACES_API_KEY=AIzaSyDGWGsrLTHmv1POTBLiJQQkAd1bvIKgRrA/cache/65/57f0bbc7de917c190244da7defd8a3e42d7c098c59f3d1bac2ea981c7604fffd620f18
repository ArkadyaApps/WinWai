{"dependencies":[{"name":"./config","data":{"asyncType":null,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":70,"index":85}}],"key":"hH+a7C+T3pAA1fpObqrOIoOuY3c="}},{"name":"./animationParser","data":{"asyncType":null,"locs":[{"start":{"line":4,"column":0,"index":86},"end":{"line":4,"column":70,"index":156}}],"key":"LN7SS6SrDtYjiTmkZvEp/l2+ybI="}},{"name":"./transition/Linear.web","data":{"asyncType":null,"locs":[{"start":{"line":5,"column":0,"index":157},"end":{"line":5,"column":59,"index":216}}],"key":"ZuDzjwLn4HFzliTghnQvHH08XVk="}},{"name":"./transition/Sequenced.web","data":{"asyncType":null,"locs":[{"start":{"line":6,"column":0,"index":217},"end":{"line":6,"column":65,"index":282}}],"key":"nTbcNY6FqhfUSRhGCAPqMuuHtQQ="}},{"name":"./transition/Fading.web","data":{"asyncType":null,"locs":[{"start":{"line":7,"column":0,"index":283},"end":{"line":7,"column":59,"index":342}}],"key":"cle1FkpB85dSQ6LquQA32jyPaD4="}},{"name":"./domUtils","data":{"asyncType":null,"locs":[{"start":{"line":8,"column":0,"index":343},"end":{"line":8,"column":48,"index":391}}],"key":"biB4rs/bRwMuDBoQ7MKnGgu6vz0="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.TransitionGenerator = TransitionGenerator;\n  exports.createAnimationWithExistingTransform = createAnimationWithExistingTransform;\n  var _config = require(_dependencyMap[0], \"./config\");\n  var _animationParser = require(_dependencyMap[1], \"./animationParser\");\n  var _Linear = require(_dependencyMap[2], \"./transition/Linear.web\");\n  var _Sequenced = require(_dependencyMap[3], \"./transition/Sequenced.web\");\n  var _Fading = require(_dependencyMap[4], \"./transition/Fading.web\");\n  var _domUtils = require(_dependencyMap[5], \"./domUtils\");\n  // Translate values are passed as numbers. However, if `translate` property receives number, it will not automatically\n  // convert it to `px`. Therefore if we want to keep existing transform we have to add 'px' suffix to each of translate values\n  // that are present inside transform.\n  function addPxToTranslate(existingTransform) {\n    // @ts-ignore `existingTransform` cannot be string because in that case\n    // we throw error in `extractTransformFromStyle`\n    const newTransform = existingTransform.map(transformProp => {\n      const newTransformProp = {};\n      for (const [key, value] of Object.entries(transformProp)) {\n        if (key.includes('translate')) {\n          // @ts-ignore After many trials we decided to ignore this error - it says that we cannot use 'key' to index this object.\n          // Sadly it doesn't go away after using cast `key as keyof TransformProperties`.\n          newTransformProp[key] = `${value}px`;\n        } else {\n          // @ts-ignore same as above.\n          newTransformProp[key] = value;\n        }\n      }\n      return newTransformProp;\n    });\n    return newTransform;\n  }\n\n  // In order to keep existing transform throughout animation, we have to add it to each of keyframe step.\n  function addExistingTransform(newAnimationData, newTransform) {\n    for (const keyframeStepProperties of Object.values(newAnimationData.style)) {\n      if (!keyframeStepProperties.transform) {\n        // If transform doesn't exist, we add only transform that already exists\n        keyframeStepProperties.transform = newTransform;\n      } else {\n        // We insert existing transformations before ours.\n        Array.prototype.unshift.apply(keyframeStepProperties.transform, newTransform);\n      }\n    }\n  }\n\n  /**\n   *  Modifies default animation by preserving transformations that given element already contains.\n   *\n   * @param animationName - Name of the animation to be modified (e.g. `FadeIn`).\n   * @param existingTransform - Transform values that element already contains.\n   * @returns Animation parsed to keyframe string.\n   */\n  function createAnimationWithExistingTransform(animationName, existingTransform, layoutTransition) {\n    let newAnimationData;\n    if (layoutTransition) {\n      newAnimationData = layoutTransition;\n    } else {\n      if (!(animationName in _config.Animations)) {\n        return '';\n      }\n      newAnimationData = structuredClone(_config.AnimationsData[animationName]);\n    }\n    const keyframeName = generateNextCustomKeyframeName();\n    newAnimationData.name = keyframeName;\n    const newTransform = addPxToTranslate(existingTransform);\n    addExistingTransform(newAnimationData, newTransform);\n    const keyframe = (0, _animationParser.convertAnimationObjectToKeyframes)(newAnimationData);\n    (0, _domUtils.insertWebAnimation)(keyframeName, keyframe);\n    return keyframeName;\n  }\n  let customKeyframeCounter = 0;\n  function generateNextCustomKeyframeName() {\n    return `REA${customKeyframeCounter++}`;\n  }\n\n  /**\n   * Creates transition of given type, appends it to stylesheet and returns keyframe name.\n   *\n   * @param transitionType - Type of transition (e.g. LINEAR).\n   * @param transitionData - Object containing data for transforms (translateX, scaleX,...).\n   * @returns Keyframe name that represents transition.\n   */\n  function TransitionGenerator(transitionType, transitionData, existingTransform) {\n    const transitionKeyframeName = generateNextCustomKeyframeName();\n    let transitionObject;\n    switch (transitionType) {\n      case _config.TransitionType.LINEAR:\n        transitionObject = (0, _Linear.LinearTransition)(transitionKeyframeName, transitionData);\n        break;\n      case _config.TransitionType.SEQUENCED:\n        transitionObject = (0, _Sequenced.SequencedTransition)(transitionKeyframeName, transitionData);\n        break;\n      case _config.TransitionType.FADING:\n        transitionObject = (0, _Fading.FadingTransition)(transitionKeyframeName, transitionData);\n        break;\n    }\n    if (existingTransform) {\n      return createAnimationWithExistingTransform('', existingTransform, transitionObject);\n    }\n    const transitionKeyframe = (0, _animationParser.convertAnimationObjectToKeyframes)(transitionObject);\n    (0, _domUtils.insertWebAnimation)(transitionKeyframeName, transitionKeyframe);\n    return transitionKeyframeName;\n  }\n});","lineCount":109,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13,"Object"],[4,8,1,13],[4,9,1,13,"defineProperty"],[4,23,1,13],[4,24,1,13,"exports"],[4,31,1,13],[5,4,1,13,"value"],[5,9,1,13],[6,2,1,13],[7,2,1,13,"exports"],[7,9,1,13],[7,10,1,13,"TransitionGenerator"],[7,29,1,13],[7,32,1,13,"TransitionGenerator"],[7,51,1,13],[8,2,1,13,"exports"],[8,9,1,13],[8,10,1,13,"createAnimationWithExistingTransform"],[8,46,1,13],[8,49,1,13,"createAnimationWithExistingTransform"],[8,85,1,13],[9,2,3,0],[9,6,3,0,"_config"],[9,13,3,0],[9,16,3,0,"require"],[9,23,3,0],[9,24,3,0,"_dependencyMap"],[9,38,3,0],[10,2,4,0],[10,6,4,0,"_animationParser"],[10,22,4,0],[10,25,4,0,"require"],[10,32,4,0],[10,33,4,0,"_dependencyMap"],[10,47,4,0],[11,2,5,0],[11,6,5,0,"_Linear"],[11,13,5,0],[11,16,5,0,"require"],[11,23,5,0],[11,24,5,0,"_dependencyMap"],[11,38,5,0],[12,2,6,0],[12,6,6,0,"_Sequenced"],[12,16,6,0],[12,19,6,0,"require"],[12,26,6,0],[12,27,6,0,"_dependencyMap"],[12,41,6,0],[13,2,7,0],[13,6,7,0,"_Fading"],[13,13,7,0],[13,16,7,0,"require"],[13,23,7,0],[13,24,7,0,"_dependencyMap"],[13,38,7,0],[14,2,8,0],[14,6,8,0,"_domUtils"],[14,15,8,0],[14,18,8,0,"require"],[14,25,8,0],[14,26,8,0,"_dependencyMap"],[14,40,8,0],[15,2,10,0],[16,2,11,0],[17,2,12,0],[18,2,13,0],[18,11,13,9,"addPxToTranslate"],[18,27,13,25,"addPxToTranslate"],[18,28,13,26,"existingTransform"],[18,45,13,43],[18,47,13,45],[19,4,14,2],[20,4,15,2],[21,4,16,2],[21,10,16,8,"newTransform"],[21,22,16,20],[21,25,16,23,"existingTransform"],[21,42,16,40],[21,43,16,41,"map"],[21,46,16,44],[21,47,16,45,"transformProp"],[21,60,16,58],[21,64,16,62],[22,6,17,4],[22,12,17,10,"newTransformProp"],[22,28,17,26],[22,31,17,29],[22,32,17,30],[22,33,17,31],[23,6,18,4],[23,11,18,9],[23,17,18,15],[23,18,18,16,"key"],[23,21,18,19],[23,23,18,21,"value"],[23,28,18,26],[23,29,18,27],[23,33,18,31,"Object"],[23,39,18,37],[23,40,18,38,"entries"],[23,47,18,45],[23,48,18,46,"transformProp"],[23,61,18,59],[23,62,18,60],[23,64,18,62],[24,8,19,6],[24,12,19,10,"key"],[24,15,19,13],[24,16,19,14,"includes"],[24,24,19,22],[24,25,19,23],[24,36,19,34],[24,37,19,35],[24,39,19,37],[25,10,20,8],[26,10,21,8],[27,10,22,8,"newTransformProp"],[27,26,22,24],[27,27,22,25,"key"],[27,30,22,28],[27,31,22,29],[27,34,22,32],[27,37,22,35,"value"],[27,42,22,40],[27,46,22,44],[28,8,23,6],[28,9,23,7],[28,15,23,13],[29,10,24,8],[30,10,25,8,"newTransformProp"],[30,26,25,24],[30,27,25,25,"key"],[30,30,25,28],[30,31,25,29],[30,34,25,32,"value"],[30,39,25,37],[31,8,26,6],[32,6,27,4],[33,6,28,4],[33,13,28,11,"newTransformProp"],[33,29,28,27],[34,4,29,2],[34,5,29,3],[34,6,29,4],[35,4,30,2],[35,11,30,9,"newTransform"],[35,23,30,21],[36,2,31,0],[38,2,33,0],[39,2,34,0],[39,11,34,9,"addExistingTransform"],[39,31,34,29,"addExistingTransform"],[39,32,34,30,"newAnimationData"],[39,48,34,46],[39,50,34,48,"newTransform"],[39,62,34,60],[39,64,34,62],[40,4,35,2],[40,9,35,7],[40,15,35,13,"keyframeStepProperties"],[40,37,35,35],[40,41,35,39,"Object"],[40,47,35,45],[40,48,35,46,"values"],[40,54,35,52],[40,55,35,53,"newAnimationData"],[40,71,35,69],[40,72,35,70,"style"],[40,77,35,75],[40,78,35,76],[40,80,35,78],[41,6,36,4],[41,10,36,8],[41,11,36,9,"keyframeStepProperties"],[41,33,36,31],[41,34,36,32,"transform"],[41,43,36,41],[41,45,36,43],[42,8,37,6],[43,8,38,6,"keyframeStepProperties"],[43,30,38,28],[43,31,38,29,"transform"],[43,40,38,38],[43,43,38,41,"newTransform"],[43,55,38,53],[44,6,39,4],[44,7,39,5],[44,13,39,11],[45,8,40,6],[46,8,41,6,"Array"],[46,13,41,11],[46,14,41,12,"prototype"],[46,23,41,21],[46,24,41,22,"unshift"],[46,31,41,29],[46,32,41,30,"apply"],[46,37,41,35],[46,38,41,36,"keyframeStepProperties"],[46,60,41,58],[46,61,41,59,"transform"],[46,70,41,68],[46,72,41,70,"newTransform"],[46,84,41,82],[46,85,41,83],[47,6,42,4],[48,4,43,2],[49,2,44,0],[51,2,46,0],[52,0,47,0],[53,0,48,0],[54,0,49,0],[55,0,50,0],[56,0,51,0],[57,0,52,0],[58,2,53,7],[58,11,53,16,"createAnimationWithExistingTransform"],[58,47,53,52,"createAnimationWithExistingTransform"],[58,48,53,53,"animationName"],[58,61,53,66],[58,63,53,68,"existingTransform"],[58,80,53,85],[58,82,53,87,"layoutTransition"],[58,98,53,103],[58,100,53,105],[59,4,54,2],[59,8,54,6,"newAnimationData"],[59,24,54,22],[60,4,55,2],[60,8,55,6,"layoutTransition"],[60,24,55,22],[60,26,55,24],[61,6,56,4,"newAnimationData"],[61,22,56,20],[61,25,56,23,"layoutTransition"],[61,41,56,39],[62,4,57,2],[62,5,57,3],[62,11,57,9],[63,6,58,4],[63,10,58,8],[63,12,58,10,"animationName"],[63,25,58,23],[63,29,58,27,"Animations"],[63,47,58,37],[63,48,58,38],[63,50,58,40],[64,8,59,6],[64,15,59,13],[64,17,59,15],[65,6,60,4],[66,6,61,4,"newAnimationData"],[66,22,61,20],[66,25,61,23,"structuredClone"],[66,40,61,38],[66,41,61,39,"AnimationsData"],[66,63,61,53],[66,64,61,54,"animationName"],[66,77,61,67],[66,78,61,68],[66,79,61,69],[67,4,62,2],[68,4,63,2],[68,10,63,8,"keyframeName"],[68,22,63,20],[68,25,63,23,"generateNextCustomKeyframeName"],[68,55,63,53],[68,56,63,54],[68,57,63,55],[69,4,64,2,"newAnimationData"],[69,20,64,18],[69,21,64,19,"name"],[69,25,64,23],[69,28,64,26,"keyframeName"],[69,40,64,38],[70,4,65,2],[70,10,65,8,"newTransform"],[70,22,65,20],[70,25,65,23,"addPxToTranslate"],[70,41,65,39],[70,42,65,40,"existingTransform"],[70,59,65,57],[70,60,65,58],[71,4,66,2,"addExistingTransform"],[71,24,66,22],[71,25,66,23,"newAnimationData"],[71,41,66,39],[71,43,66,41,"newTransform"],[71,55,66,53],[71,56,66,54],[72,4,67,2],[72,10,67,8,"keyframe"],[72,18,67,16],[72,21,67,19],[72,25,67,19,"convertAnimationObjectToKeyframes"],[72,75,67,52],[72,77,67,53,"newAnimationData"],[72,93,67,69],[72,94,67,70],[73,4,68,2],[73,8,68,2,"insertWebAnimation"],[73,36,68,20],[73,38,68,21,"keyframeName"],[73,50,68,33],[73,52,68,35,"keyframe"],[73,60,68,43],[73,61,68,44],[74,4,69,2],[74,11,69,9,"keyframeName"],[74,23,69,21],[75,2,70,0],[76,2,71,0],[76,6,71,4,"customKeyframeCounter"],[76,27,71,25],[76,30,71,28],[76,31,71,29],[77,2,72,0],[77,11,72,9,"generateNextCustomKeyframeName"],[77,41,72,39,"generateNextCustomKeyframeName"],[77,42,72,39],[77,44,72,42],[78,4,73,2],[78,11,73,9],[78,17,73,15,"customKeyframeCounter"],[78,38,73,36],[78,40,73,38],[78,42,73,40],[79,2,74,0],[81,2,76,0],[82,0,77,0],[83,0,78,0],[84,0,79,0],[85,0,80,0],[86,0,81,0],[87,0,82,0],[88,2,83,7],[88,11,83,16,"TransitionGenerator"],[88,30,83,35,"TransitionGenerator"],[88,31,83,36,"transitionType"],[88,45,83,50],[88,47,83,52,"transitionData"],[88,61,83,66],[88,63,83,68,"existingTransform"],[88,80,83,85],[88,82,83,87],[89,4,84,2],[89,10,84,8,"transitionKeyframeName"],[89,32,84,30],[89,35,84,33,"generateNextCustomKeyframeName"],[89,65,84,63],[89,66,84,64],[89,67,84,65],[90,4,85,2],[90,8,85,6,"transitionObject"],[90,24,85,22],[91,4,86,2],[91,12,86,10,"transitionType"],[91,26,86,24],[92,6,87,4],[92,11,87,9,"TransitionType"],[92,33,87,23],[92,34,87,24,"LINEAR"],[92,40,87,30],[93,8,88,6,"transitionObject"],[93,24,88,22],[93,27,88,25],[93,31,88,25,"LinearTransition"],[93,55,88,41],[93,57,88,42,"transitionKeyframeName"],[93,79,88,64],[93,81,88,66,"transitionData"],[93,95,88,80],[93,96,88,81],[94,8,89,6],[95,6,90,4],[95,11,90,9,"TransitionType"],[95,33,90,23],[95,34,90,24,"SEQUENCED"],[95,43,90,33],[96,8,91,6,"transitionObject"],[96,24,91,22],[96,27,91,25],[96,31,91,25,"SequencedTransition"],[96,61,91,44],[96,63,91,45,"transitionKeyframeName"],[96,85,91,67],[96,87,91,69,"transitionData"],[96,101,91,83],[96,102,91,84],[97,8,92,6],[98,6,93,4],[98,11,93,9,"TransitionType"],[98,33,93,23],[98,34,93,24,"FADING"],[98,40,93,30],[99,8,94,6,"transitionObject"],[99,24,94,22],[99,27,94,25],[99,31,94,25,"FadingTransition"],[99,55,94,41],[99,57,94,42,"transitionKeyframeName"],[99,79,94,64],[99,81,94,66,"transitionData"],[99,95,94,80],[99,96,94,81],[100,8,95,6],[101,4,96,2],[102,4,97,2],[102,8,97,6,"existingTransform"],[102,25,97,23],[102,27,97,25],[103,6,98,4],[103,13,98,11,"createAnimationWithExistingTransform"],[103,49,98,47],[103,50,98,48],[103,52,98,50],[103,54,98,52,"existingTransform"],[103,71,98,69],[103,73,98,71,"transitionObject"],[103,89,98,87],[103,90,98,88],[104,4,99,2],[105,4,100,2],[105,10,100,8,"transitionKeyframe"],[105,28,100,26],[105,31,100,29],[105,35,100,29,"convertAnimationObjectToKeyframes"],[105,85,100,62],[105,87,100,63,"transitionObject"],[105,103,100,79],[105,104,100,80],[106,4,101,2],[106,8,101,2,"insertWebAnimation"],[106,36,101,20],[106,38,101,21,"transitionKeyframeName"],[106,60,101,43],[106,62,101,45,"transitionKeyframe"],[106,80,101,63],[106,81,101,64],[107,4,102,2],[107,11,102,9,"transitionKeyframeName"],[107,33,102,31],[108,2,103,0],[109,0,103,1]],"functionMap":{"names":["<global>","addPxToTranslate","existingTransform.map$argument_0","addExistingTransform","createAnimationWithExistingTransform","generateNextCustomKeyframeName","TransitionGenerator"],"mappings":"AAA;ACY;6CCG;GDa;CDE;AGG;CHU;OIS;CJiB;AKE;CLE;OMS;CNoB"}},"type":"js/module"}]}