{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":79,"column":4,"index":2937}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"zustand","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"xFAZpEovr+Y5/UCynUzO0ntFekY="}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":69,"index":103}}],"key":"6eZFbfKht0uO2NEVT/d8+i8B0s8="}},{"name":"../utils/locationService","data":{"asyncType":null,"locs":[{"start":{"line":3,"column":0,"index":104},"end":{"line":3,"column":59,"index":163}}],"key":"DYorsyhTevFeZfoL+i1kDUncrWM="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.useLanguageStore = void 0;\n  var _zustand = require(_dependencyMap[1], \"zustand\");\n  var _asyncStorage = _interopRequireDefault(require(_dependencyMap[2], \"@react-native-async-storage/async-storage\"));\n  var _locationService = require(_dependencyMap[3], \"../utils/locationService\");\n  // Map country codes to languages\n  const getLanguageFromCountryCode = countryCode => {\n    const languageMap = {\n      'TH': 'th',\n      // Thailand -> Thai\n      'FR': 'fr',\n      // France -> French\n      'BE': 'fr',\n      // Belgium -> French (can be refined)\n      'CH': 'fr',\n      // Switzerland -> French (can be refined)\n      'CA': 'fr',\n      // Canada -> French (can be refined for Quebec)\n      'MA': 'ar',\n      // Morocco -> Arabic\n      'DZ': 'ar',\n      // Algeria -> Arabic\n      'EG': 'ar',\n      // Egypt -> Arabic\n      'SA': 'ar',\n      // Saudi Arabia -> Arabic\n      'AE': 'ar' // UAE -> Arabic\n    };\n    return languageMap[countryCode] || 'en'; // Default to English\n  };\n  const useLanguageStore = exports.useLanguageStore = (0, _zustand.create)(set => ({\n    language: 'en',\n    isLanguageDetected: false,\n    setLanguage: async language => {\n      await _asyncStorage.default.setItem('app_language', language);\n      await _asyncStorage.default.setItem('language_manually_set', 'true');\n      set({\n        language\n      });\n    },\n    initializeLanguage: async () => {\n      try {\n        // First check if user has manually set a language preference\n        const manuallySet = await _asyncStorage.default.getItem('language_manually_set');\n        const saved = await _asyncStorage.default.getItem('app_language');\n        if (manuallySet === 'true' && saved) {\n          // User has manually set language, use their preference\n          set({\n            language: saved,\n            isLanguageDetected: true\n          });\n          return;\n        }\n\n        // Try to detect language from geolocation\n        try {\n          const location = await (0, _locationService.getUserLocation)();\n          if (location && location.countryCode) {\n            const detectedLanguage = getLanguageFromCountryCode(location.countryCode);\n            console.log(`Detected country: ${location.country} (${location.countryCode}), setting language to: ${detectedLanguage}`);\n\n            // Save detected language\n            await _asyncStorage.default.setItem('app_language', detectedLanguage);\n            set({\n              language: detectedLanguage,\n              isLanguageDetected: true\n            });\n            return;\n          }\n        } catch (geoError) {\n          console.error('Geolocation-based language detection failed:', geoError);\n        }\n\n        // Fallback: Use saved language or default to English\n        if (saved) {\n          set({\n            language: saved,\n            isLanguageDetected: true\n          });\n        } else {\n          set({\n            language: 'en',\n            isLanguageDetected: true\n          });\n        }\n      } catch (error) {\n        console.error('Failed to initialize language:', error);\n        set({\n          language: 'en',\n          isLanguageDetected: true\n        });\n      }\n    }\n  }));\n});","lineCount":99,"map":[[7,2,1,0],[7,6,1,0,"_zustand"],[7,14,1,0],[7,17,1,0,"require"],[7,24,1,0],[7,25,1,0,"_dependencyMap"],[7,39,1,0],[8,2,2,0],[8,6,2,0,"_asyncStorage"],[8,19,2,0],[8,22,2,0,"_interopRequireDefault"],[8,44,2,0],[8,45,2,0,"require"],[8,52,2,0],[8,53,2,0,"_dependencyMap"],[8,67,2,0],[9,2,3,0],[9,6,3,0,"_locationService"],[9,22,3,0],[9,25,3,0,"require"],[9,32,3,0],[9,33,3,0,"_dependencyMap"],[9,47,3,0],[10,2,14,0],[11,2,15,0],[11,8,15,6,"getLanguageFromCountryCode"],[11,34,15,32],[11,37,15,36,"countryCode"],[11,48,15,55],[11,52,15,70],[12,4,16,2],[12,10,16,8,"languageMap"],[12,21,16,48],[12,24,16,51],[13,6,17,4],[13,10,17,8],[13,12,17,10],[13,16,17,14],[14,6,17,16],[15,6,18,4],[15,10,18,8],[15,12,18,10],[15,16,18,14],[16,6,18,16],[17,6,19,4],[17,10,19,8],[17,12,19,10],[17,16,19,14],[18,6,19,16],[19,6,20,4],[19,10,20,8],[19,12,20,10],[19,16,20,14],[20,6,20,16],[21,6,21,4],[21,10,21,8],[21,12,21,10],[21,16,21,14],[22,6,21,16],[23,6,22,4],[23,10,22,8],[23,12,22,10],[23,16,22,14],[24,6,22,16],[25,6,23,4],[25,10,23,8],[25,12,23,10],[25,16,23,14],[26,6,23,16],[27,6,24,4],[27,10,24,8],[27,12,24,10],[27,16,24,14],[28,6,24,16],[29,6,25,4],[29,10,25,8],[29,12,25,10],[29,16,25,14],[30,6,25,16],[31,6,26,4],[31,10,26,8],[31,12,26,10],[31,16,26,14],[31,17,26,16],[32,4,27,2],[32,5,27,3],[33,4,29,2],[33,11,29,9,"languageMap"],[33,22,29,20],[33,23,29,21,"countryCode"],[33,34,29,32],[33,35,29,33],[33,39,29,37],[33,43,29,41],[33,44,29,42],[33,45,29,43],[34,2,30,0],[34,3,30,1],[35,2,32,7],[35,8,32,13,"useLanguageStore"],[35,24,32,29],[35,27,32,29,"exports"],[35,34,32,29],[35,35,32,29,"useLanguageStore"],[35,51,32,29],[35,54,32,32],[35,58,32,32,"create"],[35,73,32,38],[35,75,32,55,"set"],[35,78,32,58],[35,83,32,64],[36,4,33,2,"language"],[36,12,33,10],[36,14,33,12],[36,18,33,16],[37,4,34,2,"isLanguageDetected"],[37,22,34,20],[37,24,34,22],[37,29,34,27],[38,4,35,2,"setLanguage"],[38,15,35,13],[38,17,35,15],[38,23,35,22,"language"],[38,31,35,30],[38,35,35,35],[39,6,36,4],[39,12,36,10,"AsyncStorage"],[39,33,36,22],[39,34,36,23,"setItem"],[39,41,36,30],[39,42,36,31],[39,56,36,45],[39,58,36,47,"language"],[39,66,36,55],[39,67,36,56],[40,6,37,4],[40,12,37,10,"AsyncStorage"],[40,33,37,22],[40,34,37,23,"setItem"],[40,41,37,30],[40,42,37,31],[40,65,37,54],[40,67,37,56],[40,73,37,62],[40,74,37,63],[41,6,38,4,"set"],[41,9,38,7],[41,10,38,8],[42,8,38,10,"language"],[43,6,38,19],[43,7,38,20],[43,8,38,21],[44,4,39,2],[44,5,39,3],[45,4,40,2,"initializeLanguage"],[45,22,40,20],[45,24,40,22],[45,30,40,22,"initializeLanguage"],[45,31,40,22],[45,36,40,34],[46,6,41,4],[46,10,41,8],[47,8,42,6],[48,8,43,6],[48,14,43,12,"manuallySet"],[48,25,43,23],[48,28,43,26],[48,34,43,32,"AsyncStorage"],[48,55,43,44],[48,56,43,45,"getItem"],[48,63,43,52],[48,64,43,53],[48,87,43,76],[48,88,43,77],[49,8,44,6],[49,14,44,12,"saved"],[49,19,44,17],[49,22,44,20],[49,28,44,26,"AsyncStorage"],[49,49,44,38],[49,50,44,39,"getItem"],[49,57,44,46],[49,58,44,47],[49,72,44,61],[49,73,44,62],[50,8,46,6],[50,12,46,10,"manuallySet"],[50,23,46,21],[50,28,46,26],[50,34,46,32],[50,38,46,36,"saved"],[50,43,46,41],[50,45,46,43],[51,10,47,8],[52,10,48,8,"set"],[52,13,48,11],[52,14,48,12],[53,12,48,14,"language"],[53,20,48,22],[53,22,48,24,"saved"],[53,27,48,41],[54,12,48,43,"isLanguageDetected"],[54,30,48,61],[54,32,48,63],[55,10,48,68],[55,11,48,69],[55,12,48,70],[56,10,49,8],[57,8,50,6],[59,8,52,6],[60,8,53,6],[60,12,53,10],[61,10,54,8],[61,16,54,14,"location"],[61,24,54,22],[61,27,54,25],[61,33,54,31],[61,37,54,31,"getUserLocation"],[61,69,54,46],[61,71,54,47],[61,72,54,48],[62,10,55,8],[62,14,55,12,"location"],[62,22,55,20],[62,26,55,24,"location"],[62,34,55,32],[62,35,55,33,"countryCode"],[62,46,55,44],[62,48,55,46],[63,12,56,10],[63,18,56,16,"detectedLanguage"],[63,34,56,32],[63,37,56,35,"getLanguageFromCountryCode"],[63,63,56,61],[63,64,56,62,"location"],[63,72,56,70],[63,73,56,71,"countryCode"],[63,84,56,82],[63,85,56,83],[64,12,57,10,"console"],[64,19,57,17],[64,20,57,18,"log"],[64,23,57,21],[64,24,57,22],[64,45,57,43,"location"],[64,53,57,51],[64,54,57,52,"country"],[64,61,57,59],[64,66,57,64,"location"],[64,74,57,72],[64,75,57,73,"countryCode"],[64,86,57,84],[64,113,57,111,"detectedLanguage"],[64,129,57,127],[64,131,57,129],[64,132,57,130],[66,12,59,10],[67,12,60,10],[67,18,60,16,"AsyncStorage"],[67,39,60,28],[67,40,60,29,"setItem"],[67,47,60,36],[67,48,60,37],[67,62,60,51],[67,64,60,53,"detectedLanguage"],[67,80,60,69],[67,81,60,70],[68,12,61,10,"set"],[68,15,61,13],[68,16,61,14],[69,14,61,16,"language"],[69,22,61,24],[69,24,61,26,"detectedLanguage"],[69,40,61,42],[70,14,61,44,"isLanguageDetected"],[70,32,61,62],[70,34,61,64],[71,12,61,69],[71,13,61,70],[71,14,61,71],[72,12,62,10],[73,10,63,8],[74,8,64,6],[74,9,64,7],[74,10,64,8],[74,17,64,15,"geoError"],[74,25,64,23],[74,27,64,25],[75,10,65,8,"console"],[75,17,65,15],[75,18,65,16,"error"],[75,23,65,21],[75,24,65,22],[75,70,65,68],[75,72,65,70,"geoError"],[75,80,65,78],[75,81,65,79],[76,8,66,6],[78,8,68,6],[79,8,69,6],[79,12,69,10,"saved"],[79,17,69,15],[79,19,69,17],[80,10,70,8,"set"],[80,13,70,11],[80,14,70,12],[81,12,70,14,"language"],[81,20,70,22],[81,22,70,24,"saved"],[81,27,70,41],[82,12,70,43,"isLanguageDetected"],[82,30,70,61],[82,32,70,63],[83,10,70,68],[83,11,70,69],[83,12,70,70],[84,8,71,6],[84,9,71,7],[84,15,71,13],[85,10,72,8,"set"],[85,13,72,11],[85,14,72,12],[86,12,72,14,"language"],[86,20,72,22],[86,22,72,24],[86,26,72,28],[87,12,72,30,"isLanguageDetected"],[87,30,72,48],[87,32,72,50],[88,10,72,55],[88,11,72,56],[88,12,72,57],[89,8,73,6],[90,6,74,4],[90,7,74,5],[90,8,74,6],[90,15,74,13,"error"],[90,20,74,18],[90,22,74,20],[91,8,75,6,"console"],[91,15,75,13],[91,16,75,14,"error"],[91,21,75,19],[91,22,75,20],[91,54,75,52],[91,56,75,54,"error"],[91,61,75,59],[91,62,75,60],[92,8,76,6,"set"],[92,11,76,9],[92,12,76,10],[93,10,76,12,"language"],[93,18,76,20],[93,20,76,22],[93,24,76,26],[94,10,76,28,"isLanguageDetected"],[94,28,76,46],[94,30,76,48],[95,8,76,53],[95,9,76,54],[95,10,76,55],[96,6,77,4],[97,4,78,2],[98,2,79,0],[98,3,79,1],[98,4,79,2],[98,5,79,3],[99,0,79,4]],"functionMap":{"names":["<global>","getLanguageFromCountryCode","create$argument_0","setLanguage","initializeLanguage"],"mappings":"AAA;mCCc;CDe;sDEE;eCG;GDI;sBEC;GFsC;EFC"}},"type":"js/module"}]}