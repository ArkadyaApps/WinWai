{"dependencies":[{"name":"expo-modules-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":45,"index":45}}],"key":"fU8WLIPqoAGygnPbZ/QJiQQfXEY=","exportNames":["*"],"imports":1}},{"name":"./ExpoLocation","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":46},"end":{"line":2,"column":42,"index":88}}],"key":"n9eQB3huKj/lRnIsgaXRKPJKjaY=","exportNames":["*"],"imports":1}},{"name":"./Location.types","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":89},"end":{"line":3,"column":52,"index":141}}],"key":"QoIrjHWCWA2K0AZhEI/d0eITBhA=","exportNames":["*"],"imports":1}},{"name":"./LocationSubscribers","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":142},"end":{"line":4,"column":59,"index":201}}],"key":"ECD2ecHoQ4d6PxMbJzhCjCmKfZg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.installWebGeolocationPolyfill = installWebGeolocationPolyfill;\n  var _expoModulesCore = require(_dependencyMap[0], \"expo-modules-core\");\n  var _ExpoLocation = require(_dependencyMap[1], \"./ExpoLocation\");\n  var ExpoLocation = _interopDefault(_ExpoLocation);\n  var _LocationTypes = require(_dependencyMap[2], \"./Location.types\");\n  var _LocationSubscribers = require(_dependencyMap[3], \"./LocationSubscribers\");\n  // @needsAudit\n  /**\n   * Polyfills `navigator.geolocation` for interop with the core React Native and Web API approach to geolocation.\n   */\n  function installWebGeolocationPolyfill() {\n    if (_expoModulesCore.Platform.OS !== 'web') {\n      // Make sure `window.navigator` is defined in the global scope.\n      if (!('window' in global)) {\n        global.window = global;\n      }\n      if (!('navigator' in global.window)) {\n        global.window.navigator = {};\n      }\n      // @ts-ignore\n      window.navigator.geolocation = {\n        getCurrentPosition,\n        watchPosition,\n        clearWatch,\n        // We don't polyfill stopObserving, this is an internal method that probably should not even exist\n        // in react-native docs\n        stopObserving: () => {}\n      };\n    }\n  }\n  function convertGeolocationOptions(options) {\n    return {\n      accuracy: options.enableHighAccuracy ? _LocationTypes.LocationAccuracy.High : _LocationTypes.LocationAccuracy.Balanced\n    };\n  }\n  function getCurrentPosition(success, error = () => {}, options = {}) {\n    _getCurrentPositionAsyncWrapper(success, error, options);\n  }\n  // This function exists to let us continue to return undefined from getCurrentPosition, while still\n  // using async/await for the internal implementation of it\n  async function _getCurrentPositionAsyncWrapper(success, error, options) {\n    try {\n      await ExpoLocation.default.requestPermissionsAsync();\n      const result = await ExpoLocation.default.getCurrentPositionAsync(convertGeolocationOptions(options));\n      success(result);\n    } catch (e) {\n      error(e);\n    }\n  }\n  // Polyfill: navigator.geolocation.watchPosition\n  function watchPosition(success, error, options) {\n    const watchId = _LocationSubscribers.LocationSubscriber.registerCallback(success);\n    ExpoLocation.default.watchPositionImplAsync(watchId, options).catch(err => {\n      _LocationSubscribers.LocationSubscriber.unregisterCallback(watchId);\n      error({\n        watchId,\n        message: err.message,\n        code: err.code\n      });\n    });\n    return watchId;\n  }\n  // Polyfill: navigator.geolocation.clearWatch\n  function clearWatch(watchId) {\n    _LocationSubscribers.LocationSubscriber.unregisterCallback(watchId);\n  }\n});","lineCount":78,"map":[[12,2,9,0,"exports"],[12,9,9,0],[12,10,9,0,"installWebGeolocationPolyfill"],[12,39,9,0],[12,42,9,0,"installWebGeolocationPolyfill"],[12,71,9,0],[13,2,1,0],[13,6,1,0,"_expoModulesCore"],[13,22,1,0],[13,25,1,0,"require"],[13,32,1,0],[13,33,1,0,"_dependencyMap"],[13,47,1,0],[14,2,2,0],[14,6,2,0,"_ExpoLocation"],[14,19,2,0],[14,22,2,0,"require"],[14,29,2,0],[14,30,2,0,"_dependencyMap"],[14,44,2,0],[15,2,2,0],[15,6,2,0,"ExpoLocation"],[15,18,2,0],[15,21,2,0,"_interopDefault"],[15,36,2,0],[15,37,2,0,"_ExpoLocation"],[15,50,2,0],[16,2,3,0],[16,6,3,0,"_LocationTypes"],[16,20,3,0],[16,23,3,0,"require"],[16,30,3,0],[16,31,3,0,"_dependencyMap"],[16,45,3,0],[17,2,4,0],[17,6,4,0,"_LocationSubscribers"],[17,26,4,0],[17,29,4,0,"require"],[17,36,4,0],[17,37,4,0,"_dependencyMap"],[17,51,4,0],[18,2,5,0],[19,2,6,0],[20,0,7,0],[21,0,8,0],[22,2,9,7],[22,11,9,16,"installWebGeolocationPolyfill"],[22,40,9,45,"installWebGeolocationPolyfill"],[22,41,9,45],[22,43,9,48],[23,4,10,4],[23,8,10,8,"Platform"],[23,24,10,16],[23,25,10,16,"Platform"],[23,33,10,16],[23,34,10,17,"OS"],[23,36,10,19],[23,41,10,24],[23,46,10,29],[23,48,10,31],[24,6,11,8],[25,6,12,8],[25,10,12,12],[25,12,12,14],[25,20,12,22],[25,24,12,26,"global"],[25,30,12,32],[25,31,12,33],[25,33,12,35],[26,8,13,12,"global"],[26,14,13,18],[26,15,13,19,"window"],[26,21,13,25],[26,24,13,28,"global"],[26,30,13,34],[27,6,14,8],[28,6,15,8],[28,10,15,12],[28,12,15,14],[28,23,15,25],[28,27,15,29,"global"],[28,33,15,35],[28,34,15,36,"window"],[28,40,15,42],[28,41,15,43],[28,43,15,45],[29,8,16,12,"global"],[29,14,16,18],[29,15,16,19,"window"],[29,21,16,25],[29,22,16,26,"navigator"],[29,31,16,35],[29,34,16,38],[29,35,16,39],[29,36,16,40],[30,6,17,8],[31,6,18,8],[32,6,19,8,"window"],[32,12,19,14],[32,13,19,15,"navigator"],[32,22,19,24],[32,23,19,25,"geolocation"],[32,34,19,36],[32,37,19,39],[33,8,20,12,"getCurrentPosition"],[33,26,20,30],[34,8,21,12,"watchPosition"],[34,21,21,25],[35,8,22,12,"clearWatch"],[35,18,22,22],[36,8,23,12],[37,8,24,12],[38,8,25,12,"stopObserving"],[38,21,25,25],[38,23,25,27,"stopObserving"],[38,24,25,27],[38,29,25,33],[38,30,25,35],[39,6,26,8],[39,7,26,9],[40,4,27,4],[41,2,28,0],[42,2,29,0],[42,11,29,9,"convertGeolocationOptions"],[42,36,29,34,"convertGeolocationOptions"],[42,37,29,35,"options"],[42,44,29,42],[42,46,29,44],[43,4,30,4],[43,11,30,11],[44,6,31,8,"accuracy"],[44,14,31,16],[44,16,31,18,"options"],[44,23,31,25],[44,24,31,26,"enableHighAccuracy"],[44,42,31,44],[44,45,31,47,"LocationAccuracy"],[44,59,31,63],[44,60,31,63,"LocationAccuracy"],[44,76,31,63],[44,77,31,64,"High"],[44,81,31,68],[44,84,31,71,"LocationAccuracy"],[44,98,31,87],[44,99,31,87,"LocationAccuracy"],[44,115,31,87],[44,116,31,88,"Balanced"],[45,4,32,4],[45,5,32,5],[46,2,33,0],[47,2,34,0],[47,11,34,9,"getCurrentPosition"],[47,29,34,27,"getCurrentPosition"],[47,30,34,28,"success"],[47,37,34,35],[47,39,34,37,"error"],[47,44,34,42],[47,47,34,45,"error"],[47,48,34,45],[47,53,34,51],[47,54,34,53],[47,55,34,54],[47,57,34,56,"options"],[47,64,34,63],[47,67,34,66],[47,68,34,67],[47,69,34,68],[47,71,34,70],[48,4,35,4,"_getCurrentPositionAsyncWrapper"],[48,35,35,35],[48,36,35,36,"success"],[48,43,35,43],[48,45,35,45,"error"],[48,50,35,50],[48,52,35,52,"options"],[48,59,35,59],[48,60,35,60],[49,2,36,0],[50,2,37,0],[51,2,38,0],[52,2,39,0],[52,17,39,15,"_getCurrentPositionAsyncWrapper"],[52,48,39,46,"_getCurrentPositionAsyncWrapper"],[52,49,39,47,"success"],[52,56,39,54],[52,58,39,56,"error"],[52,63,39,61],[52,65,39,63,"options"],[52,72,39,70],[52,74,39,72],[53,4,40,4],[53,8,40,8],[54,6,41,8],[54,12,41,14,"ExpoLocation"],[54,24,41,26],[54,25,41,26,"default"],[54,32,41,26],[54,33,41,27,"requestPermissionsAsync"],[54,56,41,50],[54,57,41,51],[54,58,41,52],[55,6,42,8],[55,12,42,14,"result"],[55,18,42,20],[55,21,42,23],[55,27,42,29,"ExpoLocation"],[55,39,42,41],[55,40,42,41,"default"],[55,47,42,41],[55,48,42,42,"getCurrentPositionAsync"],[55,71,42,65],[55,72,42,66,"convertGeolocationOptions"],[55,97,42,91],[55,98,42,92,"options"],[55,105,42,99],[55,106,42,100],[55,107,42,101],[56,6,43,8,"success"],[56,13,43,15],[56,14,43,16,"result"],[56,20,43,22],[56,21,43,23],[57,4,44,4],[57,5,44,5],[57,6,45,4],[57,13,45,11,"e"],[57,14,45,12],[57,16,45,14],[58,6,46,8,"error"],[58,11,46,13],[58,12,46,14,"e"],[58,13,46,15],[58,14,46,16],[59,4,47,4],[60,2,48,0],[61,2,49,0],[62,2,50,0],[62,11,50,9,"watchPosition"],[62,24,50,22,"watchPosition"],[62,25,50,23,"success"],[62,32,50,30],[62,34,50,32,"error"],[62,39,50,37],[62,41,50,39,"options"],[62,48,50,46],[62,50,50,48],[63,4,51,4],[63,10,51,10,"watchId"],[63,17,51,17],[63,20,51,20,"LocationSubscriber"],[63,40,51,38],[63,41,51,38,"LocationSubscriber"],[63,59,51,38],[63,60,51,39,"registerCallback"],[63,76,51,55],[63,77,51,56,"success"],[63,84,51,63],[63,85,51,64],[64,4,52,4,"ExpoLocation"],[64,16,52,16],[64,17,52,16,"default"],[64,24,52,16],[64,25,52,17,"watchPositionImplAsync"],[64,47,52,39],[64,48,52,40,"watchId"],[64,55,52,47],[64,57,52,49,"options"],[64,64,52,56],[64,65,52,57],[64,66,52,58,"catch"],[64,71,52,63],[64,72,52,65,"err"],[64,75,52,68],[64,79,52,73],[65,6,53,8,"LocationSubscriber"],[65,26,53,26],[65,27,53,26,"LocationSubscriber"],[65,45,53,26],[65,46,53,27,"unregisterCallback"],[65,64,53,45],[65,65,53,46,"watchId"],[65,72,53,53],[65,73,53,54],[66,6,54,8,"error"],[66,11,54,13],[66,12,54,14],[67,8,54,16,"watchId"],[67,15,54,23],[68,8,54,25,"message"],[68,15,54,32],[68,17,54,34,"err"],[68,20,54,37],[68,21,54,38,"message"],[68,28,54,45],[69,8,54,47,"code"],[69,12,54,51],[69,14,54,53,"err"],[69,17,54,56],[69,18,54,57,"code"],[70,6,54,62],[70,7,54,63],[70,8,54,64],[71,4,55,4],[71,5,55,5],[71,6,55,6],[72,4,56,4],[72,11,56,11,"watchId"],[72,18,56,18],[73,2,57,0],[74,2,58,0],[75,2,59,0],[75,11,59,9,"clearWatch"],[75,21,59,19,"clearWatch"],[75,22,59,20,"watchId"],[75,29,59,27],[75,31,59,29],[76,4,60,4,"LocationSubscriber"],[76,24,60,22],[76,25,60,22,"LocationSubscriber"],[76,43,60,22],[76,44,60,23,"unregisterCallback"],[76,62,60,41],[76,63,60,42,"watchId"],[76,70,60,49],[76,71,60,50],[77,2,61,0],[78,0,61,1],[78,3]],"functionMap":{"names":["<global>","installWebGeolocationPolyfill","window.navigator.geolocation.stopObserving","convertGeolocationOptions","getCurrentPosition","<anonymous>","_getCurrentPositionAsyncWrapper","watchPosition","ExpoLocation.watchPositionImplAsync._catch$argument_0","clearWatch"],"mappings":"AAA;OCQ;2BCgB,SD;CDG;AGC;CHI;AIC,6CC,SD;CJE;AMG;CNS;AOE;gECE;KDG;CPE;ASE;CTE"},"hasCjsExports":false},"type":"js/module"}]}