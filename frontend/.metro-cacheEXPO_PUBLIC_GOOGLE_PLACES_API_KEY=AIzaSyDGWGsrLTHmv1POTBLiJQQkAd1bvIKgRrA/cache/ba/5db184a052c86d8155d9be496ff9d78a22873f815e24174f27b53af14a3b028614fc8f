{"dependencies":[{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Alert","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"PEUC6jrQVoAGZ2qYkvimljMOyJI=","exportNames":["*"],"imports":1}},{"name":"../utils/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":48},"end":{"line":2,"column":31,"index":79}}],"key":"XoJ+jbKCrEi38eKczMqtlbk+TCk=","exportNames":["*"],"imports":1}},{"name":"react-native-google-mobile-ads","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":31,"column":8,"index":816},"end":{"line":31,"column":49,"index":857}}],"key":"xLMv7sLcbPpHgIe8huLBOAaybLs=","exportNames":["*"],"imports":1,"isOptional":true}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"rewardedAdManager\", {\n    enumerable: true,\n    get: function () {\n      return rewardedAdManager;\n    }\n  });\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[0], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _reactNativeWebDistExportsAlert = require(_dependencyMap[1], \"react-native-web/dist/exports/Alert\");\n  var Alert = _interopDefault(_reactNativeWebDistExportsAlert);\n  var _utilsApi = require(_dependencyMap[2], \"../utils/api\");\n  var api = _interopDefault(_utilsApi);\n  class RewardedAdManager {\n    isLoading = false;\n    currentUserId = '';\n    adReady = false;\n    rewardedInterstitial = null;\n    async loadRewardedAd(userId) {\n      this.currentUserId = userId;\n\n      // Only load ads on native platforms\n      if (Platform.default.OS === 'web') {\n        this.adReady = false;\n        return;\n      }\n      try {\n        // Dynamically import AdMob only on native platforms\n        const {\n          RewardedInterstitialAd,\n          RewardedAdEventType,\n          TestIds\n        } = require(_dependencyMap[3], \"react-native-google-mobile-ads\");\n        const adUnitId = __DEV__ ? TestIds.REWARDED_INTERSTITIAL : Platform.default.select({\n          ios: 'ca-app-pub-3940256099942544/5224354917',\n          android: 'ca-app-pub-3940256099942544/5224354917'\n        }) || TestIds.REWARDED_INTERSTITIAL;\n        this.rewardedInterstitial = RewardedInterstitialAd.createForAdRequest(adUnitId, {\n          requestNonPersonalizedAdsOnly: false,\n          keywords: ['game', 'raffle', 'prize', 'reward']\n        });\n\n        // Set up event listeners\n        const unsubscribeLoaded = this.rewardedInterstitial.addAdEventListener(RewardedAdEventType.LOADED, () => {\n          console.log('Rewarded ad loaded successfully');\n          this.adReady = true;\n        });\n        const unsubscribeEarned = this.rewardedInterstitial.addAdEventListener(RewardedAdEventType.EARNED_REWARD, async reward => {\n          console.log('User earned reward:', reward);\n          await this.handleRewardEarned(reward);\n        });\n\n        // Load the ad\n        await this.rewardedInterstitial.load();\n      } catch (error) {\n        console.error('Failed to load rewarded ad:', error);\n        this.adReady = false;\n      }\n    }\n    async showRewardedAd() {\n      if (Platform.default.OS === 'web') {\n        Alert.default.alert('Ads Not Available', 'Rewarded ads are only available on mobile devices. Install the app via Expo Go or production build to earn tickets!');\n        return;\n      }\n      if (!this.rewardedInterstitial || !this.adReady) {\n        Alert.default.alert('Ad Not Ready', 'Please wait for the ad to load...');\n        return;\n      }\n      try {\n        await this.rewardedInterstitial.show();\n        this.adReady = false;\n        // Reload next ad\n        setTimeout(() => {\n          this.loadRewardedAd(this.currentUserId);\n        }, 1000);\n      } catch (error) {\n        console.error('Failed to show rewarded ad:', error);\n        Alert.default.alert('Ad Error', 'Failed to show ad. Please try again.');\n      }\n    }\n    async handleRewardEarned(reward) {\n      try {\n        const transactionId = this.generateTransactionId();\n        const rewardEvent = {\n          userId: this.currentUserId,\n          rewardType: reward.type || 'tickets',\n          rewardAmount: reward.amount || 10,\n          transactionId,\n          timestamp: Date.now()\n        };\n\n        // Send reward to backend\n        const response = await api.default.post('/api/rewards/verify-ad', rewardEvent);\n        if (response.data.success) {\n          Alert.default.alert('ðŸŽ‰ Tickets Earned!', `You earned ${response.data.ticketsAwarded} tickets!\\nNew balance: ${response.data.newBalance} tickets`);\n\n          // Call reward callback\n          if (this.onRewardCallback) {\n            this.onRewardCallback(rewardEvent);\n          }\n        }\n      } catch (error) {\n        console.error('Failed to process reward:', error);\n        Alert.default.alert('Error', 'Failed to credit tickets. Please contact support.');\n      }\n    }\n    isRewardedAdReady() {\n      return this.adReady && Platform.default.OS !== 'web';\n    }\n    setRewardCallback(callback) {\n      this.onRewardCallback = callback;\n    }\n    generateTransactionId() {\n      return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n    }\n  }\n  const rewardedAdManager = new RewardedAdManager();\n});","lineCount":128,"map":[[12,2,142,0,"Object"],[12,8,142,0],[12,9,142,0,"defineProperty"],[12,23,142,0],[12,24,142,0,"exports"],[12,31,142,0],[13,4,142,0,"enumerable"],[13,14,142,0],[14,4,142,0,"get"],[14,7,142,0],[14,18,142,0,"get"],[14,19,142,0],[15,6,142,0],[15,13,142,0,"rewardedAdManager"],[15,30,142,0],[16,4,142,0],[17,2,142,0],[18,2,142,57],[18,6,142,57,"_reactNativeWebDistExportsPlatform"],[18,40,142,57],[18,43,142,57,"require"],[18,50,142,57],[18,51,142,57,"_dependencyMap"],[18,65,142,57],[19,2,142,57],[19,6,142,57,"Platform"],[19,14,142,57],[19,17,142,57,"_interopDefault"],[19,32,142,57],[19,33,142,57,"_reactNativeWebDistExportsPlatform"],[19,67,142,57],[20,2,142,57],[20,6,142,57,"_reactNativeWebDistExportsAlert"],[20,37,142,57],[20,40,142,57,"require"],[20,47,142,57],[20,48,142,57,"_dependencyMap"],[20,62,142,57],[21,2,142,57],[21,6,142,57,"Alert"],[21,11,142,57],[21,14,142,57,"_interopDefault"],[21,29,142,57],[21,30,142,57,"_reactNativeWebDistExportsAlert"],[21,61,142,57],[22,2,2,0],[22,6,2,0,"_utilsApi"],[22,15,2,0],[22,18,2,0,"require"],[22,25,2,0],[22,26,2,0,"_dependencyMap"],[22,40,2,0],[23,2,2,0],[23,6,2,0,"api"],[23,9,2,0],[23,12,2,0,"_interopDefault"],[23,27,2,0],[23,28,2,0,"_utilsApi"],[23,37,2,0],[24,2,12,0],[24,8,12,6,"RewardedAdManager"],[24,25,12,23],[24,26,12,24],[25,4,13,10,"isLoading"],[25,13,13,19],[25,16,13,22],[25,21,13,27],[26,4,14,10,"currentUserId"],[26,17,14,23],[26,20,14,34],[26,22,14,36],[27,4,16,10,"adReady"],[27,11,16,17],[27,14,16,20],[27,19,16,25],[28,4,17,10,"rewardedInterstitial"],[28,24,17,30],[28,27,17,38],[28,31,17,42],[29,4,19,2],[29,10,19,8,"loadRewardedAd"],[29,24,19,22,"loadRewardedAd"],[29,25,19,23,"userId"],[29,31,19,37],[29,33,19,54],[30,6,20,4],[30,10,20,8],[30,11,20,9,"currentUserId"],[30,24,20,22],[30,27,20,25,"userId"],[30,33,20,31],[32,6,22,4],[33,6,23,4],[33,10,23,8,"Platform"],[33,18,23,16],[33,19,23,16,"default"],[33,26,23,16],[33,27,23,17,"OS"],[33,29,23,19],[33,34,23,24],[33,39,23,29],[33,41,23,31],[34,8,24,6],[34,12,24,10],[34,13,24,11,"adReady"],[34,20,24,18],[34,23,24,21],[34,28,24,26],[35,8,25,6],[36,6,26,4],[37,6,28,4],[37,10,28,8],[38,8,29,6],[39,8,30,6],[39,14,30,12],[40,10,30,14,"RewardedInterstitialAd"],[40,32,30,36],[41,10,30,38,"RewardedAdEventType"],[41,29,30,57],[42,10,30,59,"TestIds"],[43,8,30,67],[43,9,30,68],[43,12,31,8,"require"],[43,19,31,15],[43,20,31,15,"_dependencyMap"],[43,34,31,15],[43,71,31,48],[43,72,31,49],[44,8,33,6],[44,14,33,12,"adUnitId"],[44,22,33,20],[44,25,33,23,"__DEV__"],[44,32,33,30],[44,35,34,10,"TestIds"],[44,42,34,17],[44,43,34,18,"REWARDED_INTERSTITIAL"],[44,64,34,39],[44,67,35,10,"Platform"],[44,75,35,18],[44,76,35,18,"default"],[44,83,35,18],[44,84,35,19,"select"],[44,90,35,25],[44,91,35,26],[45,10,36,12,"ios"],[45,13,36,15],[45,15,36,17],[45,55,36,57],[46,10,37,12,"android"],[46,17,37,19],[46,19,37,21],[47,8,38,10],[47,9,38,11],[47,10,38,12],[47,14,38,16,"TestIds"],[47,21,38,23],[47,22,38,24,"REWARDED_INTERSTITIAL"],[47,43,38,45],[48,8,40,6],[48,12,40,10],[48,13,40,11,"rewardedInterstitial"],[48,33,40,31],[48,36,40,34,"RewardedInterstitialAd"],[48,58,40,56],[48,59,40,57,"createForAdRequest"],[48,77,40,75],[48,78,40,76,"adUnitId"],[48,86,40,84],[48,88,40,86],[49,10,41,8,"requestNonPersonalizedAdsOnly"],[49,39,41,37],[49,41,41,39],[49,46,41,44],[50,10,42,8,"keywords"],[50,18,42,16],[50,20,42,18],[50,21,42,19],[50,27,42,25],[50,29,42,27],[50,37,42,35],[50,39,42,37],[50,46,42,44],[50,48,42,46],[50,56,42,54],[51,8,43,6],[51,9,43,7],[51,10,43,8],[53,8,45,6],[54,8,46,6],[54,14,46,12,"unsubscribeLoaded"],[54,31,46,29],[54,34,46,32],[54,38,46,36],[54,39,46,37,"rewardedInterstitial"],[54,59,46,57],[54,60,46,58,"addAdEventListener"],[54,78,46,76],[54,79,47,8,"RewardedAdEventType"],[54,98,47,27],[54,99,47,28,"LOADED"],[54,105,47,34],[54,107,48,8],[54,113,48,14],[55,10,49,10,"console"],[55,17,49,17],[55,18,49,18,"log"],[55,21,49,21],[55,22,49,22],[55,55,49,55],[55,56,49,56],[56,10,50,10],[56,14,50,14],[56,15,50,15,"adReady"],[56,22,50,22],[56,25,50,25],[56,29,50,29],[57,8,51,8],[57,9,52,6],[57,10,52,7],[58,8,54,6],[58,14,54,12,"unsubscribeEarned"],[58,31,54,29],[58,34,54,32],[58,38,54,36],[58,39,54,37,"rewardedInterstitial"],[58,59,54,57],[58,60,54,58,"addAdEventListener"],[58,78,54,76],[58,79,55,8,"RewardedAdEventType"],[58,98,55,27],[58,99,55,28,"EARNED_REWARD"],[58,112,55,41],[58,114,56,8],[58,120,56,15,"reward"],[58,126,56,26],[58,130,56,31],[59,10,57,10,"console"],[59,17,57,17],[59,18,57,18,"log"],[59,21,57,21],[59,22,57,22],[59,43,57,43],[59,45,57,45,"reward"],[59,51,57,51],[59,52,57,52],[60,10,58,10],[60,16,58,16],[60,20,58,20],[60,21,58,21,"handleRewardEarned"],[60,39,58,39],[60,40,58,40,"reward"],[60,46,58,46],[60,47,58,47],[61,8,59,8],[61,9,60,6],[61,10,60,7],[63,8,62,6],[64,8,63,6],[64,14,63,12],[64,18,63,16],[64,19,63,17,"rewardedInterstitial"],[64,39,63,37],[64,40,63,38,"load"],[64,44,63,42],[64,45,63,43],[64,46,63,44],[65,6,65,4],[65,7,65,5],[65,8,65,6],[65,15,65,13,"error"],[65,20,65,18],[65,22,65,20],[66,8,66,6,"console"],[66,15,66,13],[66,16,66,14,"error"],[66,21,66,19],[66,22,66,20],[66,51,66,49],[66,53,66,51,"error"],[66,58,66,56],[66,59,66,57],[67,8,67,6],[67,12,67,10],[67,13,67,11,"adReady"],[67,20,67,18],[67,23,67,21],[67,28,67,26],[68,6,68,4],[69,4,69,2],[70,4,71,2],[70,10,71,8,"showRewardedAd"],[70,24,71,22,"showRewardedAd"],[70,25,71,22],[70,27,71,40],[71,6,72,4],[71,10,72,8,"Platform"],[71,18,72,16],[71,19,72,16,"default"],[71,26,72,16],[71,27,72,17,"OS"],[71,29,72,19],[71,34,72,24],[71,39,72,29],[71,41,72,31],[72,8,73,6,"Alert"],[72,13,73,11],[72,14,73,11,"default"],[72,21,73,11],[72,22,73,12,"alert"],[72,27,73,17],[72,28,74,8],[72,47,74,27],[72,49,75,8],[72,166,76,6],[72,167,76,7],[73,8,77,6],[74,6,78,4],[75,6,80,4],[75,10,80,8],[75,11,80,9],[75,15,80,13],[75,16,80,14,"rewardedInterstitial"],[75,36,80,34],[75,40,80,38],[75,41,80,39],[75,45,80,43],[75,46,80,44,"adReady"],[75,53,80,51],[75,55,80,53],[76,8,81,6,"Alert"],[76,13,81,11],[76,14,81,11,"default"],[76,21,81,11],[76,22,81,12,"alert"],[76,27,81,17],[76,28,81,18],[76,42,81,32],[76,44,81,34],[76,79,81,69],[76,80,81,70],[77,8,82,6],[78,6,83,4],[79,6,85,4],[79,10,85,8],[80,8,86,6],[80,14,86,12],[80,18,86,16],[80,19,86,17,"rewardedInterstitial"],[80,39,86,37],[80,40,86,38,"show"],[80,44,86,42],[80,45,86,43],[80,46,86,44],[81,8,87,6],[81,12,87,10],[81,13,87,11,"adReady"],[81,20,87,18],[81,23,87,21],[81,28,87,26],[82,8,88,6],[83,8,89,6,"setTimeout"],[83,18,89,16],[83,19,89,17],[83,25,89,23],[84,10,90,8],[84,14,90,12],[84,15,90,13,"loadRewardedAd"],[84,29,90,27],[84,30,90,28],[84,34,90,32],[84,35,90,33,"currentUserId"],[84,48,90,46],[84,49,90,47],[85,8,91,6],[85,9,91,7],[85,11,91,9],[85,15,91,13],[85,16,91,14],[86,6,92,4],[86,7,92,5],[86,8,92,6],[86,15,92,13,"error"],[86,20,92,18],[86,22,92,20],[87,8,93,6,"console"],[87,15,93,13],[87,16,93,14,"error"],[87,21,93,19],[87,22,93,20],[87,51,93,49],[87,53,93,51,"error"],[87,58,93,56],[87,59,93,57],[88,8,94,6,"Alert"],[88,13,94,11],[88,14,94,11,"default"],[88,21,94,11],[88,22,94,12,"alert"],[88,27,94,17],[88,28,94,18],[88,38,94,28],[88,40,94,30],[88,78,94,68],[88,79,94,69],[89,6,95,4],[90,4,96,2],[91,4,98,2],[91,10,98,16,"handleRewardEarned"],[91,28,98,34,"handleRewardEarned"],[91,29,98,35,"reward"],[91,35,98,46],[91,37,98,63],[92,6,99,4],[92,10,99,8],[93,8,100,6],[93,14,100,12,"transactionId"],[93,27,100,25],[93,30,100,28],[93,34,100,32],[93,35,100,33,"generateTransactionId"],[93,56,100,54],[93,57,100,55],[93,58,100,56],[94,8,101,6],[94,14,101,12,"rewardEvent"],[94,25,101,36],[94,28,101,39],[95,10,102,8,"userId"],[95,16,102,14],[95,18,102,16],[95,22,102,20],[95,23,102,21,"currentUserId"],[95,36,102,34],[96,10,103,8,"rewardType"],[96,20,103,18],[96,22,103,20,"reward"],[96,28,103,26],[96,29,103,27,"type"],[96,33,103,31],[96,37,103,35],[96,46,103,44],[97,10,104,8,"rewardAmount"],[97,22,104,20],[97,24,104,22,"reward"],[97,30,104,28],[97,31,104,29,"amount"],[97,37,104,35],[97,41,104,39],[97,43,104,41],[98,10,105,8,"transactionId"],[98,23,105,21],[99,10,106,8,"timestamp"],[99,19,106,17],[99,21,106,19,"Date"],[99,25,106,23],[99,26,106,24,"now"],[99,29,106,27],[99,30,106,28],[100,8,107,6],[100,9,107,7],[102,8,109,6],[103,8,110,6],[103,14,110,12,"response"],[103,22,110,20],[103,25,110,23],[103,31,110,29,"api"],[103,34,110,32],[103,35,110,32,"default"],[103,42,110,32],[103,43,110,33,"post"],[103,47,110,37],[103,48,110,38],[103,72,110,62],[103,74,110,64,"rewardEvent"],[103,85,110,75],[103,86,110,76],[104,8,112,6],[104,12,112,10,"response"],[104,20,112,18],[104,21,112,19,"data"],[104,25,112,23],[104,26,112,24,"success"],[104,33,112,31],[104,35,112,33],[105,10,113,8,"Alert"],[105,15,113,13],[105,16,113,13,"default"],[105,23,113,13],[105,24,113,14,"alert"],[105,29,113,19],[105,30,114,10],[105,50,114,30],[105,52,115,10],[105,66,115,24,"response"],[105,74,115,32],[105,75,115,33,"data"],[105,79,115,37],[105,80,115,38,"ticketsAwarded"],[105,94,115,52],[105,121,115,79,"response"],[105,129,115,87],[105,130,115,88,"data"],[105,134,115,92],[105,135,115,93,"newBalance"],[105,145,115,103],[105,155,116,8],[105,156,116,9],[107,10,118,8],[108,10,119,8],[108,14,119,12],[108,18,119,16],[108,19,119,17,"onRewardCallback"],[108,35,119,33],[108,37,119,35],[109,12,120,10],[109,16,120,14],[109,17,120,15,"onRewardCallback"],[109,33,120,31],[109,34,120,32,"rewardEvent"],[109,45,120,43],[109,46,120,44],[110,10,121,8],[111,8,122,6],[112,6,123,4],[112,7,123,5],[112,8,123,6],[112,15,123,13,"error"],[112,20,123,23],[112,22,123,25],[113,8,124,6,"console"],[113,15,124,13],[113,16,124,14,"error"],[113,21,124,19],[113,22,124,20],[113,49,124,47],[113,51,124,49,"error"],[113,56,124,54],[113,57,124,55],[114,8,125,6,"Alert"],[114,13,125,11],[114,14,125,11,"default"],[114,21,125,11],[114,22,125,12,"alert"],[114,27,125,17],[114,28,125,18],[114,35,125,25],[114,37,125,27],[114,88,125,78],[114,89,125,79],[115,6,126,4],[116,4,127,2],[117,4,129,2,"isRewardedAdReady"],[117,21,129,19,"isRewardedAdReady"],[117,22,129,19],[117,24,129,31],[118,6,130,4],[118,13,130,11],[118,17,130,15],[118,18,130,16,"adReady"],[118,25,130,23],[118,29,130,27,"Platform"],[118,37,130,35],[118,38,130,35,"default"],[118,45,130,35],[118,46,130,36,"OS"],[118,48,130,38],[118,53,130,43],[118,58,130,48],[119,4,131,2],[120,4,133,2,"setRewardCallback"],[120,21,133,19,"setRewardCallback"],[120,22,133,20,"callback"],[120,30,133,59],[120,32,133,67],[121,6,134,4],[121,10,134,8],[121,11,134,9,"onRewardCallback"],[121,27,134,25],[121,30,134,28,"callback"],[121,38,134,36],[122,4,135,2],[123,4,137,10,"generateTransactionId"],[123,25,137,31,"generateTransactionId"],[123,26,137,31],[123,28,137,42],[124,6,138,4],[124,13,138,11],[124,16,138,14,"Date"],[124,20,138,18],[124,21,138,19,"now"],[124,24,138,22],[124,25,138,23],[124,26,138,24],[124,30,138,28,"Math"],[124,34,138,32],[124,35,138,33,"random"],[124,41,138,39],[124,42,138,40],[124,43,138,41],[124,44,138,42,"toString"],[124,52,138,50],[124,53,138,51],[124,55,138,53],[124,56,138,54],[124,57,138,55,"substr"],[124,63,138,61],[124,64,138,62],[124,65,138,63],[124,67,138,65],[124,68,138,66],[124,69,138,67],[124,71,138,69],[125,4,139,2],[126,2,140,0],[127,2,142,7],[127,8,142,13,"rewardedAdManager"],[127,25,142,30],[127,28,142,33],[127,32,142,37,"RewardedAdManager"],[127,49,142,54],[127,50,142,55],[127,51,142,56],[128,0,142,57],[128,3]],"functionMap":{"names":["<global>","RewardedAdManager","loadRewardedAd","rewardedInterstitial.addAdEventListener$argument_1","showRewardedAd","setTimeout$argument_0","handleRewardEarned","isRewardedAdReady","setRewardCallback","generateTransactionId"],"mappings":"AAA;ACW;ECO;QC6B;SDG;QCK;SDG;GDU;EGE;iBCkB;ODE;GHK;EKE;GL6B;EME;GNE;EOE;GPE;EQE;GRE;CDC"},"hasCjsExports":false},"type":"js/module"}]}